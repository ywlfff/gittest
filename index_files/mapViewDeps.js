// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.14/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/2d/LabelManager":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Error ../../core/HandleOwner ../../core/Logger ../../core/throttle ../../core/accessorSupport/decorators ./engine".split(" "),function(w,a,u,f,r,q,h,t,m,e,v){Object.defineProperty(a,"__esModule",{value:!0});var p=t.getLogger("esri.views.2d.layers.labels.LabelManager");w=function(a){function b(b){b=a.call(this,b)||
this;b._applyVisibilityPassThrottled=m.throttle(b._applyVisibilityPass,64,b);b.lastUpdateId=-1;b.updateRequested=!1;b.view=null;return b}u(b,a);b.prototype.initialize=function(){var b=this;this.collisionEngine=new v.CollisionEngine(this.view.featuresTilingScheme);this._layerViewSorter=new v.LayerViewSorter(function(a,c){b.collisionEngine.registerLayerView(a,c);(c=a.tileRenderer)&&c.forEachTile(function(c){c.isDirty=!0;b.addTile(a,c)});b.requestUpdate()},function(a){b.collisionEngine.unregisterLayerView(a);
b.requestUpdate()});this.handles.add(this.view.allLayerViews.on("change",function(a){b._layerViewSorter.update(a)}))};b.prototype.destroy=function(){this._layerViewSorter.destroy();this.collisionEngine=this._layerViewSorter=null;this._applyVisibilityPassThrottled.remove()};Object.defineProperty(b.prototype,"updating",{get:function(){return this.updateRequested},enumerable:!0,configurable:!0});b.prototype.update=function(b){this._applyVisibilityPassThrottled(b)};b.prototype.viewChange=function(){this.requestUpdate()};
b.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate(this))};b.prototype.processUpdate=function(b){this._set("updateParameters",b);this.updateRequested&&(this.update(b),this.updateRequested=!1)};b.prototype.addTile=function(b,a){this.collisionEngine.addTile(b,a)};b.prototype.removeTile=function(b,a){this.collisionEngine.removeTile(b,a)};b.prototype._applyVisibilityPass=function(b){try{var a=this.view.featuresTilingScheme.getClosestInfoForScale(b.state.scale).level;
this.collisionEngine.run(b,a)}catch(c){p.error(new q("mapview-labeling","Encountered an error during label decluttering",c))}};f([e.property()],b.prototype,"updateRequested",void 0);f([e.property({readOnly:!0})],b.prototype,"updateParameters",void 0);f([e.property({dependsOn:["updateRequested"]})],b.prototype,"updating",null);f([e.property()],b.prototype,"view",void 0);return b=f([e.subclass("esri.views.2d.layers.labels.LabelManager")],b)}(e.declared(h.HandleOwnerMixin(r)));a.default=w})},"esri/core/throttle":function(){define(["require",
"exports"],function(w,a){function u(a,r,q,h){var f=null,m=1E3;"number"===typeof r?(m=r,h=q):(f=r,m=q);var e=0,v,p=function(){e=0;a.apply(h,v)};r=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];f&&f.apply(h,a);v=a;m?e||(e=setTimeout(p,m)):p()};r.remove=function(){e&&(clearTimeout(e),e=0)};r.forceUpdate=function(){e&&(clearTimeout(e),p())};r.hasPendingUpdates=function(){return!!e};return r}Object.defineProperty(a,"__esModule",{value:!0});a.throttle=u;a.default=u})},"esri/views/2d/layers/graphics/GraphicsView2D":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/Accessor ../../../../core/HandleOwner ../../../../core/Identifiable ../../../../core/iteratorUtils ../../../../core/MapPool ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/promiseUtils ../../../../core/screenUtils ../../../../core/accessorSupport/decorators ../../../../geometry/Polygon ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/coordsUtils ../../../../geometry/support/jsonUtils ../../../../geometry/support/spatialReferenceUtils ../../../../layers/graphics/data/projectionSupport ../../../../symbols/support/cimSymbolUtils ../../../../symbols/support/defaults ../../engine ../../engine/webgl/definitions ../features/support/AttributeStore ../features/support/TileStore ./GraphicContainer ./GraphicProcessingQueue ./GraphicStore ./graphicsUtils ../../../layers/GraphicsView".split(" "),
function(w,a,u,f,r,q,h,t,m,e,v,p,z,b,g,n,c,d,l,k,x,y,J,F,H,C,E,G,I,D,A,K,P,L){function B(b,c,a){if(a.has(b))return a.get(b);c={tile:c,addedOrModified:[],removed:[]};a.set(b,c);return c}Object.defineProperty(a,"__esModule",{value:!0});w=function(a){function e(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];c=a.apply(this,c)||this;c._tiles=new Map;c._graphicStoreUpdate=!1;c._graphicsSet=new Set;c._matcher=b.resolve(null);c._tileUpdateSet=new Set;c._tilesToUpdate=new Map;c._graphicIdToAbortController=
new Map;c._attached=!1;c._highlightIds=new Map;c._updatingGraphicsTimer=null;c.lastUpdateId=-1;c.updateRequested=!1;c.graphicUpdateHandler=c.graphicUpdateHandler.bind(c);c.addOrUpdateGraphic=c.addOrUpdateGraphic.bind(c);c._processAnalyzedGraphics=c._processAnalyzedGraphics.bind(c);c._graphicsChangeHandler=c._graphicsChangeHandler.bind(c);return c}u(e,a);e.prototype.initialize=function(){var c=this;this._tileStore=new I.default(this.view.featuresTilingScheme);this.container=new D.default(this.view.featuresTilingScheme,
null);this._attributeStore=new G.default({type:"local",initialize:function(a){return b.resolve(c.container.attributeView.initialize(a))},update:function(b){return c.container.attributeView.requestUpdate(b)},render:function(){return c.container.requestRender()}});this._graphicStore=new K.default(this.view.featuresTilingScheme,this.view.state.scale,this.uid,this.graphics,function(b){c._attributeStore.createLocalId(b.uid);c._setFilterState(b.uid,b.visible)},function(b){c._attributeStore.freeLocalId(b.uid)});
this._graphicProcessingQueue=new A.default({process:this.addOrUpdateGraphic});var a=new C.WGLTemplateStore(this.container.getMaterialItems.bind(this.container),!0),d=this._tileStore.tileScheme.tileInfo;this.renderer&&(this._matcher=C.createMatcher(this.renderer,a,null));this._meshFactory=new C.WGLMeshFactory(null,this.uid,null,a,null,d);this.watch("renderer",function(b){b&&(c._matcher=C.createMatcher(c.renderer,a,null))});this._tileStore.on("update",this._onTileUpdate.bind(this));this.container.on("attach",
function(){0<c.graphics.items.length&&c._graphicsChangeHandler({target:c.graphics,added:c.graphics.items,removed:[],moved:[]});c.handles.add(c.graphics.on("change",c._graphicsChangeHandler),"graphics");c._attached=!0;c.notifyChange("updating")});this.container.on("detach",function(){c._graphicProcessingQueue&&c._graphicProcessingQueue.clear()})};e.prototype.destroy=function(){this._updatingGraphicsTimer&&(clearTimeout(this._updatingGraphicsTimer),this._updatingGraphicsTimer=null,this.notifyChange("updating"));
this.container.dispose();this._set("graphics",null);this._graphicProcessingQueue&&(this._graphicProcessingQueue.destroy(),this._graphicProcessingQueue=null);this._graphicStore.clear();this._tileStore.destroy();this._attributeStore=null};Object.defineProperty(e.prototype,"updating",{get:function(){return!this._attached||null!==this._updatingGraphicsTimer||this._graphicProcessingQueue.updating||0<this._tileUpdateSet.size||0<this._tilesToUpdate.size},enumerable:!0,configurable:!0});e.prototype.install=
function(b){b.addChild(this.container)};e.prototype.uninstall=function(b){b.removeChild(this.container)};e.prototype.hitTest=function(c,a){if(!this.view||!this.view.position)return b.resolve();c=this.view.toMap(n.createScreenPoint(c,a));return this.searchFeatures(c).then(function(b){return b&&b.length?b[0]:null})};e.prototype.searchFeatures=function(c,a){var d=this;void 0===a&&(a=2);return b.create(function(b){b(d._graphicStore.hitTest(c.x,c.y,a,d.view.state.resolution,d.view.state.rotation))})};
e.prototype.update=function(b){b=b.state;var c=this.view.featuresTilingScheme.getClosestInfoForScale(b.scale).level;this._graphicStore.updateLevel(c);this._tileStore.setViewState(b);this._graphicStoreUpdate=!0;this.updateRequested=!1};e.prototype.viewChange=function(){this.requestUpdate()};e.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate(this))};e.prototype.processUpdate=function(b){this.updateRequested&&(this.updateRequested=!1,this.update(b))};
e.prototype.graphicUpdateHandler=function(b){var c=b.newValue,a=b.graphic;switch(b.property){case "geometry":case "symbol":this._graphicProcessingQueue.push(a,"update");break;case "visible":this._setFilterState(a.uid,c),this._attributeStore.sendUpdates()}};e.prototype.addHighlight=function(b){for(var c=0;c<b.length;c++){var a=b[c];if(this._highlightIds.has(a)){var d=this._highlightIds.get(a);this._highlightIds.set(a,d+1)}else this._highlightIds.set(a,1)}this._updateHighlight()};e.prototype.removeHighlight=
function(b){for(var c=0;c<b.length;c++){var a=b[c];if(this._highlightIds.has(a)){var d=this._highlightIds.get(a)-1;0===d?this._highlightIds.delete(a):this._highlightIds.set(a,d)}}this._updateHighlight()};e.prototype._updateHighlight=function(){this._attributeStore.setHighlight(v.keysOfMap(this._highlightIds))};e.prototype._getIntersectingTiles=function(b){return(b=this._graphicStore.getBounds(b))&&0!==l.width(b)&&0!==l.height(b)?this._tileStore.boundsIntersections(b):[]};e.prototype._updateTile=function(b){var c=
this,a=b.tile,d=this._getGraphicsData(a,b.addedOrModified);return this._processGraphics(a.key,d).then(function(d){c._patchTile(a.key,{addOrUpdate:d,remove:b.removed});return d})};e.prototype._patchTile=function(b,c){this._tiles.has(b)&&(b=this._tiles.get(b),this.container.onTileData(b,c),this.container.requestRender())};e.prototype._graphicsChangeHandler=function(c){var a=this;if(!this._graphicStoreUpdate){var d=this.view.state,l=this.view.featuresTilingScheme.getClosestInfoForScale(d.scale).level;
this._graphicStore.updateLevel(l);this._tileStore.setViewState(d)}var k=c.added,l=c.removed;c=c.moved;for(var x=this._tilesToUpdate,y,d=[],e=Array(k.length),g=0;g<k.length;g++){var n=k[g];e[g]=n;this._graphicsSet.add(n);d.push(this.addGraphic(n))}for(g=0;g<l.length;g++){n=l[g];this._abortProcessingGraphic(n.uid);for(var k=this._getIntersectingTiles(n),A=0,f=k;A<f.length;A++)k=f[A],y=k.key.id,k=B(y,k,x),k.removed.push(this._attributeStore.getLocalId(n.uid));this._graphicsSet.delete(n);this._graphicStore.remove(n)}for(l=
0;l<c.length;l++)for(g=c[l],k=this._getIntersectingTiles(g),n=0,A=k;n<A.length;n++)k=A[n],y=k.key.id,k=B(y,k,x),k.addedOrModified.push(g);this._flipUpdatingGraphics();b.all(d).then(function(){for(var c,d=0;d<e.length;d++){c=e[d];for(var l=0,k=a._getIntersectingTiles(c);l<k.length;l++){var g=k[l];y=g.key.id;B(y,g,x).addedOrModified.push(c)}}a._graphicStore.updateZ();var n=[];x.forEach(function(b){return n.push(a._updateTile(b))});return b.all(n).then(function(){x.clear();a.notifyChange("updating")})}).catch(function(){x.clear();
a.notifyChange("updating")})};e.prototype._getSymbolResources=function(c,a){return h(this,void 0,void 0,function(){var d,l,k,x,y,g,e,n;return q(this,function(A){switch(A.label){case 0:return this.container.attached?(d=z.isSome(c.symbol)?c.symbol:null)?[3,3]:this.renderer?[4,this.renderer.getSymbolAsync(c,{scale:this.view.scale})]:[3,2]:[2,b.resolve(null)];case 1:return d=A.sent(),[3,3];case 2:d=this._getNullSymbol(c),A.label=3;case 3:return[4,F.expandSymbol(d,a)];case 4:d=A.sent();l=[];if("text"===
d.type){k=new Set;x=d;y=C.bidiText(x.text)[0];for(g=0;g<y.length;g++)k.add(y.charCodeAt(g));e=[];k.forEach(function(b){return e.push(b)});l.push({symbol:x.toJSON(),id:0,glyphIds:e})}else l.push({symbol:d.toJSON(),id:c.uid,glyphIds:null});return[4,this.container.getMaterialItems(l,a).then(function(b){return b&&0<b.length?b[0].mosaicItem:null})];case 5:return n=A.sent(),[2,{symbol:d,mosaicItem:n}]}})})};e.prototype._projectAndNormalizeGeometry=function(c){return h(this,void 0,void 0,function(){var a,
l,y,g=this;return q(this,function(e){if(z.isNone(c.geometry))return[2,b.resolve(null)];a=c.geometry;x.isPolygon(a)?(l=a.rings,a.rings=l):x.isPolyline(a)?(y=a.paths,a.paths=y):x.isExtent(a)&&(a=d.fromExtent(a));return[2,J.checkProjectionSupport(a.spatialReference,this.view.spatialReference).then(function(){var b=P.normalizeCentralMeridian(a),b=J.project(b,a.spatialReference,g.view.spatialReference);k.closeRingsAndFixWinding(b);return b})]})})};e.prototype._onTileUpdate=function(b){var c=y.getInfo(this.view.spatialReference);
if(b.added&&0<b.added.length)for(var a=0,d=b.added;a<d.length;a++)this._addNewTile(d[a],c);if(b.removed&&0<b.removed.length)for(c=0,b=b.removed;c<b.length;c++)this._removeTile(b[c].key)};e.prototype.addOrUpdateGraphic=function(b,c,a){return this._addOrUpdateGraphic(b,c,a)};e.prototype.addGraphic=function(c){var a=this;this._abortProcessingGraphic(c.uid);var d=g.createAbortController();this._graphicIdToAbortController.set(c.uid,d);return this._addOrUpdateGraphic(c,"add",{signal:d.signal}).then(function(){a._graphicIdToAbortController.delete(c.uid)}).catch(function(d){a._graphicIdToAbortController.delete(c.uid);
if(!b.isAbortError(d))throw d;})};e.prototype._addOrUpdateGraphic=function(c,a,d){var l=this,k=this._projectAndNormalizeGeometry(c),x=this._getSymbolResources(c,d);return b.all([k,x]).then(function(b){var k=b[0];b=b[1];return"add"===a?l._addProjectedGraphic(c,b,k):l._updateGraphic(c,b,k,d)})};e.prototype._addProjectedGraphic=function(b,c,a){this._graphicsSet.has(b)&&this._graphicStore.add(b,c,a)};e.prototype._updateGraphic=function(c,a,d,k){var x=this;if(!this._graphicStore.has(c)||b.isAborted(k))return b.resolve();
d=this._graphicStore.update(c,a,d);a=d.oldBounds;d=d.newBounds;var y=0===l.width(a)&&0===l.height(a),g=0===l.width(d)&&0===l.height(d),y=y?[]:this._tileStore.boundsIntersections(a);a=g?[]:this._tileStore.boundsIntersections(d);d=p.acquire();for(var e=0;e<y.length;e++)g=y[e],d.set(g.key,{addOrUpdate:null,remove:[this._attributeStore.getLocalId(c.uid)]});for(y=0;y<a.length;y++)g=a[y],e=this._getGraphicData(g,c),d.has(g.key)?(g=d.get(g.key),g.remove.length=0,g.addOrUpdate=e):d.set(g.key,{addOrUpdate:e,
remove:null});var n=[];d.forEach(function(b,c){var a=x._processGraphics(c,b.addOrUpdate,k).then(function(a){x._patchTile(c,{addOrUpdate:a,remove:b.remove})});n.push(a)});p.release(d);return b.all(n).then(function(){})};e.prototype._addTile=function(b,c){var a=l.create();this.view.featuresTilingScheme.getTileBounds(a,b);a=new C.WGLTile(b,a,!0);c={clear:!0,addOrUpdate:c,remove:[]};this._tiles.set(b,a);this.container.addChild(a);a.setData(c,!1,!1)};e.prototype._addNewTile=function(c,a){var d=this,l=
this._graphicStore.queryTileData(c);if(a){a=Math.round((a.valid[1]-a.valid[0])/c.resolution);for(var k=0;k<l.length;k++){var y=l[k];y.geometry&&x.isPoint(y.geometry)&&this._wrapPoints(y,a)}}var g=c.key;this._tileUpdateSet.add(c.key);this.notifyChange("updating");this._processGraphics(g,l).then(function(b){d._addTile(g,b);d._tileUpdateSet.delete(g);d.notifyChange("updating")}).catch(function(c){d._tileUpdateSet.delete(g);d.notifyChange("updating");if(!b.isAbortError(c))throw c;})};e.prototype._removeTile=
function(b){if(this._tiles.has(b)){var c=this._tiles.get(b);this.container.removeChild(c);c.destroy();this._tiles.delete(b)}};e.prototype._setFilterState=function(b,c){var a=this._attributeStore.getLocalId(b);b=this._attributeStore.getHighlightFlag(b);this._attributeStore.setData(a,0,0,b|(c?E.FILTER_FLAG_0:0))};e.prototype._getGraphicsData=function(b,c){var a=y.getInfo(this.view.spatialReference);c=this._graphicStore.getGraphicsData(b,c);if(a)for(b=Math.round((a.valid[1]-a.valid[0])/b.resolution),
a=0;a<c.length;a++){var d=c[a];d.geometry&&x.isPoint(d.geometry)&&this._wrapPoints(d,b)}c.sort(function(b,c){return b.insertAfter-c.insertAfter});return c};e.prototype._getGraphicData=function(b,c){c=this._graphicStore.getGraphicData(b,c);var a=[c],d=y.getInfo(this.view.spatialReference);d&&(b=Math.round((d.valid[1]-d.valid[0])/b.resolution),c.geometry&&x.isPoint(c.geometry)&&this._wrapPoints(c,b));return a};e.prototype._wrapPoints=function(b,c){var a=b.geometry;512===c?20>a.x?b.geometry={points:[[a.x,
a.y],[c,0]]}:492<a.x&&(b.geometry={points:[[a.x,a.y],[-c,0]]}):-20>a.x?b.geometry={points:[[a.x,a.y],[c,0]]}:532<a.x&&(b.geometry={points:[[a.x,a.y],[-c,0]]})};e.prototype._processGraphics=function(b,c,a){return h(this,void 0,void 0,function(){var d,l,k;return q(this,function(y){switch(y.label){case 0:d=c&&c.length;if(!d||!this._meshFactory)return[2,null];l=this._meshFactory;return[4,this._matcher.then(function(b){return l.analyze(c,!0,b,null,null,a)})];case 1:return k=y.sent(),this._attributeStore.sendUpdates(),
[2,this._processAnalyzedGraphics(b,k)]}})})};e.prototype._processAnalyzedGraphics=function(b,c){for(var a=this._meshFactory,d=a.createMeshData(c.length),l=this._attributeStore,k=0;k<c.length;k++){var y=c[k];y.insertAfter=-1===y.insertAfter?-1:l.getLocalId(y.insertAfter);y.localId=l.getLocalId(y.attributes[this.uid]);a.write(d,y,null,null,b.level)}return C.TileData.fromMeshData(d)};e.prototype._abortProcessingGraphic=function(b){this._graphicIdToAbortController.has(b)&&this._graphicIdToAbortController.get(b).abort()};
e.prototype._getNullSymbol=function(b){b=b.geometry;return x.isPolyline(b)?H.errorPolylineSymbol2D:x.isPolygon(b)||x.isExtent(b)?H.errorPolygonSymbol2D:H.errorPointSymbol2D};e.prototype._flipUpdatingGraphics=function(){var b=this;this._updatingGraphicsTimer&&clearTimeout(this._updatingGraphicsTimer);this._updatingGraphicsTimer=setTimeout(function(){b._updatingGraphicsTimer=null;b.notifyChange("updating")},160);this.notifyChange("updating")};f([c.property()],e.prototype,"_graphicProcessingQueue",void 0);
f([c.property({constructOnly:!0})],e.prototype,"graphics",void 0);f([c.property({dependsOn:["_graphicProcessingQueue.updating"]})],e.prototype,"updating",null);f([c.property()],e.prototype,"view",void 0);f([c.property()],e.prototype,"updateRequested",void 0);return e=f([c.subclass("esri.views.2d.layers.support.GraphicsView2D")],e)}(c.declared(L.GraphicsView(m.HandleOwnerMixin(e.IdentifiableMixin(t)))));a.default=w})},"esri/core/MapPool":function(){define(["require","exports","./ObjectPool"],function(w,
a,u){w=function(){function a(a,f){void 0===a&&(a=50);void 0===f&&(f=50);this._pool=new u(Map,!1,function(a){return a.clear()},f,a)}a.prototype.acquire=function(){return this._pool.acquire()};a.prototype.release=function(a){this._pool.release(a)};a.acquire=function(){return f.acquire()};a.release=function(a){return f.release(a)};return a}();var f=new w(100);return w})},"esri/layers/graphics/data/projectionSupport":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/Error ../../../core/promiseUtils ../../../geometry/projection ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(w,a,u,f,r,q,h,t,m){function e(c,a){var d;if(!a)return null;if("x"in a){var l={x:0,y:0};c=c(a.x,a.y,b);l.x=c[0];l.y=c[1];null!=a.z&&(l.z=a.z);null!=a.m&&(l.m=a.m);return l}if("xmin"in a)return l={xmin:0,ymin:0,xmax:0,ymax:0},d=c(a.xmin,a.ymin,b),l.xmin=d[0],l.ymin=d[1],c=c(a.xmax,a.ymax,b),l.xmax=c[0],l.ymax=c[1],a.hasZ&&(l.zmin=a.zmin,l.zmax=a.zmax,l.hasZ=!0),a.hasM&&(l.mmin=a.mmin,l.mmax=a.mmax,l.hasM=!0),l;if("rings"in a)return{rings:v(a.rings,c),hasM:a.hasM,hasZ:a.hasZ};if("paths"in a)return{paths:v(a.paths,
c),hasM:a.hasM,hasZ:a.hasZ};if("points"in a)return{points:p(a.points,c),hasM:a.hasM,hasZ:a.hasZ}}function v(b,c){for(var a=[],d=0;d<b.length;d++)a.push(p(b[d],c));return a}function p(b,c){for(var a=[],d=0;d<b.length;d++){var l=b[d],g=c(l[0],l[1],[0,0]);a.push(g);2<l.length&&g.push(l[2]);3<l.length&&g.push(l[3])}return a}function z(b,c){return!t.isValid(b)||!t.isValid(c)||t.equals(b,c)||m.canProject(b,c)?!1:!0}Object.defineProperty(a,"__esModule",{value:!0});var b=[0,0];a.doesBrowserSupportProjection=
function(b,c){return z(b,c)?h.isSupported():!0};a.checkProjectionSupport=function(b,c){return f(this,void 0,void 0,function(){var a,d,l;return u(this,function(k){if(!c)return[2];if(Array.isArray(b)){a=0;for(d=b;a<d.length;a++)if(l=d[a],z(l.geometry&&l.geometry.spatialReference,c)){if(h.isSupported())return[2,h.load()];throw new r("feature-store:unsupported-query","projection not supported",{inSpatialReference:b,outSpatialReference:c});}return[2]}if(!z(b,c))return[2];if(h.isSupported())return[2,h.load()];
throw new r("feature-store:unsupported-query","projection not supported",{inSpatialReference:b,outSpatialReference:c});})})};var g=e.bind(null,m.lngLatToXY),n=e.bind(null,m.xyToLngLat);a.project=function(b,c,a){if(!b)return b;a||(a=c,c=b.spatialReference);return t.isValid(c)&&t.isValid(a)&&!t.equals(c,a)?m.canProject(c,a)?t.isWebMercator(a)?g(b):n(b):h.projectMany([b],c,a,null,!0)[0]:b};var c=new (function(){function b(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}b.prototype.push=
function(b,c,a){return f(this,void 0,void 0,function(){var d,l=this;return u(this,function(k){b&&b.length&&c&&a&&!t.equals(c,a)||q.resolve(b);d={geometries:b,inSpatialReference:c,outSpatialReference:a,resolve:null};this._jobs.push(d);return[2,q.create(function(b){d.resolve=b;null===l._timer&&(l._timer=setTimeout(l._process,10))},function(){var b=l._jobs.indexOf(d);-1<b&&l._jobs.splice(b,1)})]})})};b.prototype._process=function(){this._timer=null;var b=this._jobs.shift();if(b){var c=b.geometries,a=
b.inSpatialReference,d=b.outSpatialReference,b=b.resolve;m.canProject(a,d)?t.isWebMercator(d)?b(c.map(g)):b(c.map(n)):b(h.projectMany(c,a,d,null,!0));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return b}());a.projectMany=function(b,a,k){return f(this,void 0,void 0,function(){return u(this,function(d){return[2,c.push(b,a,k)]})})}})},"esri/geometry/projection":function(){define("require exports ../core/promiseUtils ./pe ./SpatialReference ./support/GeographicTransformation".split(" "),
function(w,a,u,f,r,q){function h(a,e,b,g,n){void 0===g&&(g=null);void 0===n&&(n=!1);if(null===g){var c=q.cacheKey(e,b);void 0!==v[c]?g=v[c]:(g=t(e,b,null),null===g&&(g=new q),v[c]=g)}return m._project(a,e,b instanceof r||!1===n?b:new r(b),g,n)}function t(a,e,b){void 0===b&&(b=null);a=m._getTransformation(a,e,b);return null!==a?q.fromGE(a):null}Object.defineProperty(a,"__esModule",{value:!0});var m=null;a.isLoaded=function(){return!!m&&f.isLoaded()};a.isSupported=function(){return f.isSupported()};
var e=null;a.load=function(){return e?e:e=u.create(function(a,e){var b=f.load();w(["./geometryEngine"],function(g){m=g;b.then(function(){m._enableProjection(f);a()},function(b){e(b)})})})};a.project=function(a,e,b){void 0===b&&(b=null);return a instanceof Array?0===a.length?[]:h(a,a[0].spatialReference,e,b):h([a],a.spatialReference,e,b)[0]};var v={};a.projectMany=h;a.getTransformation=t;a.getTransformations=function(a,e,b){void 0===b&&(b=null);a=m._getTransformationBySuitability(a,e,b);if(null!==
a){e=[];for(b=0;b<a.length;b++)e.push(q.fromGE(a[b]));return e}return[]}})},"esri/geometry/pe":function(){define(["require","exports","../core/tsSupport/extendsHelper","../core/has","../core/promiseUtils"],function(w,a,u,f,r){function q(c){function d(b,c,a){b[c]=a(b[c])}a._pe=c;p.init();z.init();b.init();g.init();n.init();a.PeGCSExtent=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}u(c,b);c.prototype.destroy=function(){a._pe.destroy(this)};return c}(a._pe.PeGCSExtent);for(var l=
0,k=[a._pe.PeDatum,a._pe.PeGeogcs,a._pe.PeGeogtran,a._pe.PeObject,a._pe.PeParameter,a._pe.PePrimem,a._pe.PeProjcs,a._pe.PeSpheroid,a._pe.PeUnit];l<k.length;l++)c=k[l],d(c.prototype,"getName",function(b){return function(){return b.call(this,Array(p.PE_NAME_MAX))}});l=0;for(k=[a._pe.PeGeogtran,a._pe.PeProjcs];l<k.length;l++)c=k[l],d(c.prototype,"getParameters",function(b){return function(){for(var c=Array(p.PE_PARM_MAX),d=b.call(this),l=0;l<c.length;l++){var k=a._pe.getValue(d,"*");c[l]=k?a._pe.wrapPointer(k,
a._pe.PeParameter):null;d+=Int32Array.BYTES_PER_ELEMENT}return c}});d(a._pe.PeHorizon.prototype,"getCoord",function(b){return function(){var c=this.getSize();if(!c)return null;var a=[],d=b.call(this);e(a,c,d);return a}});d(a._pe.PeGTlistExtendedEntry.prototype,"getEntries",function(b){var c=a._pe._pe_getPeGTlistExtendedGTsSize();return function(){var d=null,l=b.call(this);if(!a._pe.compare(l,a._pe.NULL)){var d=[l],k=this.getSteps();if(1<k)for(var l=a._pe.getPointer(l),g=1;g<k;g++)d.push(a._pe.wrapPointer(l+
c*g,a._pe.PeGTlistExtendedGTs))}return d}});var x=a._pe._pe_getPeHorizonSize();c=function(b){return function(){var c=this._cache;c||(this._cache=c=new Map);if(c.has(b))return c.get(b);var d=null,l=b.call(this);if(!a._pe.compare(l,a._pe.NULL)){var d=[l],k=l.getNump();if(1<k)for(var l=a._pe.getPointer(l),g=1;g<k;g++)d.push(a._pe.wrapPointer(l+x*g,a._pe.PeHorizon))}c.set(b,d);return d}};d(a._pe.PeProjcs.prototype,"horizonGcsGenerate",c);d(a._pe.PeProjcs.prototype,"horizonPcsGenerate",c);a._pe.PeObject.prototype.toString=
function(b){void 0===b&&(b=p.PE_STR_OPTS_NONE);a._pe.ensureCache.prepare();var c=a._pe.getPointer(this),d=a._pe.ensureInt8(Array(p.PE_BUFFER_MAX));return a._pe.UTF8ToString(a._pe._pe_object_to_string_ext(c,b,d))}}function h(b){if(b){var c=a._pe.getClass(b);c&&(c=a._pe.getCache(c))&&(b=a._pe.getPointer(b))&&delete c[b]}}function t(b,d){var c=[];d=Array(d);for(var k=0;k<b;k++)c.push(a._pe.ensureInt8(d));return c}function m(b){var c;Array.isArray(b[0])?(c=[],b.forEach(function(b){c.push(b[0],b[1])})):
c=b;return c}function e(b,d,l,k){void 0===k&&(k=!1);if(k)for(k=0;k<2*d;k++)b[k]=a._pe.getValue(l+k*Float64Array.BYTES_PER_ELEMENT,"double");else{var c=0===b.length;for(k=0;k<d;k++)c&&(b[k]=Array(2)),b[k][0]=a._pe.getValue(l,"double"),b[k][1]=a._pe.getValue(l+Float64Array.BYTES_PER_ELEMENT,"double"),l+=2*Float64Array.BYTES_PER_ELEMENT}}Object.defineProperty(a,"__esModule",{value:!0});var v;a._pe=null;a.isLoaded=function(){return!!a._pe};a.isSupported=function(){return!!f("esri-wasm")};a.load=function(){return v?
v:v=r.create(function(b,a){w(["./support/pe-wasm"],function(c){c({locateFile:function(b){return w.toUrl("./support/"+b)},onAbort:function(b){a(Error(b))}}).then(function(c){q(c);b()})})})};(function(b){function c(b,c,d){a._pe.ensureCache.prepare();var l=m(d),k=d===l,l=a._pe.ensureFloat64(l);(b=a._pe._pe_geog_to_proj(a._pe.getPointer(b),c,l))&&e(d,c,l,k);return b}function l(b,c,a){return k(b,c,a,0)}function k(b,c,d,l){a._pe.ensureCache.prepare();var k=m(d),g=d===k,k=a._pe.ensureFloat64(k);(b=a._pe._pe_proj_to_geog_center(a._pe.getPointer(b),
c,k,l))&&e(d,c,k,g);return b}b.geogToProj=c;b.projGeog=function(b,a,d,k){switch(k){case p.PE_TRANSFORM_P_TO_G:return l(b,a,d);case p.PE_TRANSFORM_G_TO_P:return c(b,a,d)}return 0};b.projToGeog=l;b.projToGeogCenter=k})(a.PeCSTransformations||(a.PeCSTransformations={}));var p;(function(b){b.init=function(){b.PE_BUFFER_MAX=a._pe.PeDefs.prototype.PE_BUFFER_MAX;b.PE_NAME_MAX=a._pe.PeDefs.prototype.PE_NAME_MAX;b.PE_MGRS_MAX=a._pe.PeDefs.prototype.PE_MGRS_MAX;b.PE_USNG_MAX=a._pe.PeDefs.prototype.PE_USNG_MAX;
b.PE_DD_MAX=a._pe.PeDefs.prototype.PE_DD_MAX;b.PE_DDM_MAX=a._pe.PeDefs.prototype.PE_DDM_MAX;b.PE_DMS_MAX=a._pe.PeDefs.prototype.PE_DMS_MAX;b.PE_UTM_MAX=a._pe.PeDefs.prototype.PE_UTM_MAX;b.PE_PARM_MAX=a._pe.PeDefs.prototype.PE_PARM_MAX;b.PE_TYPE_NONE=a._pe.PeDefs.prototype.PE_TYPE_NONE;b.PE_TYPE_GEOGCS=a._pe.PeDefs.prototype.PE_TYPE_GEOGCS;b.PE_TYPE_PROJCS=a._pe.PeDefs.prototype.PE_TYPE_PROJCS;b.PE_TYPE_GEOGTRAN=a._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;b.PE_TYPE_COORDSYS=a._pe.PeDefs.prototype.PE_TYPE_COORDSYS;
b.PE_TYPE_UNIT=a._pe.PeDefs.prototype.PE_TYPE_UNIT;b.PE_STR_OPTS_NONE=a._pe.PeDefs.prototype.PE_STR_OPTS_NONE;b.PE_STR_AUTH_NONE=a._pe.PeDefs.prototype.PE_STR_AUTH_NONE;b.PE_STR_AUTH_TOP=a._pe.PeDefs.prototype.PE_STR_AUTH_TOP;b.PE_STR_NAME_CANON=a._pe.PeDefs.prototype.PE_STR_NAME_CANON;b.PE_PARM_X0=a._pe.PeDefs.prototype.PE_PARM_X0;b.PE_PARM_ND=a._pe.PeDefs.prototype.PE_PARM_ND;b.PE_TRANSFORM_1_TO_2=a._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;b.PE_TRANSFORM_2_TO_1=a._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;
b.PE_TRANSFORM_P_TO_G=a._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;b.PE_TRANSFORM_G_TO_P=a._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;b.PE_HORIZON_RECT=a._pe.PeDefs.prototype.PE_HORIZON_RECT;b.PE_HORIZON_POLY=a._pe.PeDefs.prototype.PE_HORIZON_POLY;b.PE_HORIZON_LINE=a._pe.PeDefs.prototype.PE_HORIZON_LINE;b.PE_HORIZON_DELTA=a._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(p=a.PeDefs||(a.PeDefs={}));(function(b){function c(b,c){var d=null,g=k[b];g||(g={},k[b]=g);g.hasOwnProperty(String(c))?d=g[c]:(b=a._pe.PeFactory.prototype.factoryByType(b,
c),a._pe.compare(b,a._pe.NULL)||(d=b,g[c]=d));return d=l(d)}function l(b){if(b){var c=b.getType();switch(c){case p.PE_TYPE_GEOGCS:b=a._pe.castObject(b,a._pe.PeGeogcs);break;case p.PE_TYPE_PROJCS:b=a._pe.castObject(b,a._pe.PeProjcs);break;case p.PE_TYPE_GEOGTRAN:b=a._pe.castObject(b,a._pe.PeGeogtran);break;default:c&p.PE_TYPE_UNIT&&(b=a._pe.castObject(b,a._pe.PeUnit))}}return b}var k={},g={};b.initialize=function(){a._pe.PeFactory.prototype.initialize(null)};b.coordsys=function(b){return c(p.PE_TYPE_COORDSYS,
b)};b.factoryByType=c;b.fromString=function(b,c){var d=null,k=g[b];k||(k={},g[b]=k);k.hasOwnProperty(c)?d=k[c]:(b=a._pe.PeFactory.prototype.fromString(b,c),a._pe.compare(b,a._pe.NULL)||(d=b,k[c]=d));return d=l(d)};b.geogcs=function(b){return c(p.PE_TYPE_GEOGCS,b)};b.geogtran=function(b){return c(p.PE_TYPE_GEOGTRAN,b)};b.getCode=function(b){return a._pe.PeFactory.prototype.getCode(b)};b.projcs=function(b){return c(p.PE_TYPE_PROJCS,b)};b.unit=function(b){return c(p.PE_TYPE_UNIT,b)}})(a.PeFactory||(a.PeFactory=
{}));a.PeGCSExtent=null;var z;(function(b){var c;b.init=function(){b.PE_GTLIST_OPTS_COMMON=a._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;c=a._pe._pe_getPeGTlistExtendedEntrySize()};b.getGTlist=function(b,d,g,e,n,f){var k=null,l=new a._pe.PeInteger(f);try{var x=a._pe.PeGTlistExtended.prototype.getGTlist(b,d,g,e,n,l);if(f=l.val)if(k=[x],1<f){var y=a._pe.getPointer(x);for(b=1;b<f;b++)k.push(a._pe.wrapPointer(y+c*b,a._pe.PeGTlistExtendedEntry))}}finally{a._pe.destroy(l)}return k}})(z=a.PeGTlistExtended||
(a.PeGTlistExtended={}));(function(b){b.destroy=function(b){if(b&&b.length){for(var c=0;c<b.length;c++){var d=b[c];h(d);d.getEntries().forEach(function(b){h(b);b=b.getGeogtran();h(b);b.getParameters().forEach(h);[b.getGeogcs1(),b.getGeogcs2()].forEach(function(b){h(b);var c=b.getDatum();h(c);h(c.getSpheroid());h(b.getPrimem());h(b.getUnit())})})}a._pe.PeGTlistExtendedEntry.prototype.Delete(b[0])}}})(a.PeGTlistExtendedEntry||(a.PeGTlistExtendedEntry={}));(function(b){b.geogToGeog=function(b,c,k,g,
n){a._pe.ensureCache.prepare();var d=m(k),l=k===d,d=a._pe.ensureFloat64(d),x=0;g&&(x=a._pe.ensureFloat64(g));(b=a._pe._pe_geog_to_geog(a._pe.getPointer(b),c,d,x,n))&&e(k,c,d,l);return b}})(a.PeGTTransformations||(a.PeGTTransformations={}));(function(b){function c(b,c,d,g,l,e){a._pe.ensureCache.prepare();var k,n;switch(b){case "dd":k=a._pe._pe_geog_to_dd;n=p.PE_DD_MAX;break;case "ddm":k=a._pe._pe_geog_to_ddm;n=p.PE_DDM_MAX;break;case "dms":k=a._pe._pe_geog_to_dms,n=p.PE_DMS_MAX}b=0;c&&(b=a._pe.getPointer(c));
c=m(g);c=a._pe.ensureFloat64(c);n=t(d,n);g=a._pe.ensureInt32(n);if(l=k(b,d,c,l,g))for(k=0;k<d;k++)e[k]=a._pe.UTF8ToString(n[k]);return l}function g(b,c,d,g,l){a._pe.ensureCache.prepare();var k;switch(b){case "dd":k=a._pe._pe_dd_to_geog;break;case "ddm":k=a._pe._pe_ddm_to_geog;break;case "dms":k=a._pe._pe_dms_to_geog}b=0;c&&(b=a._pe.getPointer(c));c=g.map(function(b){return a._pe.ensureString(b)});g=a._pe.ensureInt32(c);c=a._pe.ensureFloat64(Array(2*d));(k=k(b,d,g,c))&&e(l,d,c);return k}b.geog_to_dms=
function(b,a,d,g,l){return c("dms",b,a,d,g,l)};b.dms_to_geog=function(b,c,a,d){return g("dms",b,c,a,d)};b.geog_to_ddm=function(b,a,d,g,l){return c("ddm",b,a,d,g,l)};b.ddm_to_geog=function(b,c,a,d){return g("ddm",b,c,a,d)};b.geog_to_dd=function(b,a,d,g,l){return c("dd",b,a,d,g,l)};b.dd_to_geog=function(b,c,a,d){return g("dd",b,c,a,d)}})(a.PeNotationDms||(a.PeNotationDms={}));var b;(function(b){b.init=function(){b.PE_MGRS_STYLE_NEW=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;b.PE_MGRS_STYLE_OLD=
a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;b.PE_MGRS_STYLE_AUTO=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;b.PE_MGRS_180_ZONE_1_PLUS=a._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;b.PE_MGRS_ADD_SPACES=a._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};b.geog_to_mgrs_extended=function(b,c,g,e,n,f,h){a._pe.ensureCache.prepare();var d=0;b&&(d=a._pe.getPointer(b));b=m(g);g=a._pe.ensureFloat64(b);b=t(c,p.PE_MGRS_MAX);var l=a._pe.ensureInt32(b);if(e=a._pe._pe_geog_to_mgrs_extended(d,
c,g,e,n,f,l))for(n=0;n<c;n++)h[n]=a._pe.UTF8ToString(b[n]);return e};b.mgrs_to_geog_extended=function(b,c,g,n,f){a._pe.ensureCache.prepare();var d=0;b&&(d=a._pe.getPointer(b));b=g.map(function(b){return a._pe.ensureString(b)});g=a._pe.ensureInt32(b);b=a._pe.ensureFloat64(Array(2*c));(n=a._pe._pe_mgrs_to_geog_extended(d,c,g,n,b))&&e(f,c,b);return n}})(b=a.PeNotationMgrs||(a.PeNotationMgrs={}));(function(b){b.geog_to_usng=function(b,c,g,e,n,f,h){a._pe.ensureCache.prepare();var d=0;b&&(d=a._pe.getPointer(b));
b=m(g);g=a._pe.ensureFloat64(b);b=t(c,p.PE_MGRS_MAX);var l=a._pe.ensureInt32(b);if(e=a._pe._pe_geog_to_usng(d,c,g,e,n,f,l))for(n=0;n<c;n++)h[n]=a._pe.UTF8ToString(b[n]);return e};b.usng_to_geog=function(b,c,g,n){a._pe.ensureCache.prepare();var d=0;b&&(d=a._pe.getPointer(b));b=g.map(function(b){return a._pe.ensureString(b)});g=a._pe.ensureInt32(b);b=a._pe.ensureFloat64(Array(2*c));(d=a._pe._pe_usng_to_geog(d,c,g,b))&&e(n,c,b);return d}})(a.PeNotationUsng||(a.PeNotationUsng={}));var g;(function(b){b.init=
function(){b.PE_UTM_OPTS_NONE=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;b.PE_UTM_OPTS_ADD_SPACES=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;b.PE_UTM_OPTS_NS=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};b.geog_to_utm=function(b,c,g,e,n){a._pe.ensureCache.prepare();var d=0;b&&(d=a._pe.getPointer(b));b=m(g);g=a._pe.ensureFloat64(b);b=t(c,p.PE_UTM_MAX);var l=a._pe.ensureInt32(b);if(e=a._pe._pe_geog_to_utm(d,c,g,e,l))for(d=0;d<c;d++)n[d]=a._pe.UTF8ToString(b[d]);return e};b.utm_to_geog=
function(b,c,g,n,f){a._pe.ensureCache.prepare();var d=0;b&&(d=a._pe.getPointer(b));b=g.map(function(b){return a._pe.ensureString(b)});g=a._pe.ensureInt32(b);b=a._pe.ensureFloat64(Array(2*c));(n=a._pe._pe_utm_to_geog(d,c,g,n,b))&&e(f,c,b);return n}})(g=a.PeNotationUtm||(a.PeNotationUtm={}));var n;(function(b){var c=new Map;b.init=function(){b.PE_PCSINFO_OPTION_NONE=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;b.PE_PCSINFO_OPTION_DOMAIN=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;b.PE_POLE_OUTSIDE_BOUNDARY=
a._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;b.PE_POLE_POINT=a._pe.PePCSInfo.prototype.PE_POLE_POINT};b.generate=function(d,g){void 0===g&&(g=b.PE_PCSINFO_OPTION_DOMAIN);var l,e;c.has(d)&&(e=c.get(d),e[g]&&(l=e[g]));l||(l=a._pe.PePCSInfo.prototype.generate(d,g),e||(e=[],c.set(d,e)),e[g]=l);return l}})(n=a.PePCSInfo||(a.PePCSInfo={}));(function(b){b.version_string=function(){return a._pe.PeVersion.prototype.version_string()}})(a.PeVersion||(a.PeVersion={}));a._init=q})},"esri/geometry/support/GeographicTransformation":function(){define(["require",
"exports","./GeographicTransformationStep"],function(w,a,u){return function(){function a(a){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(a&&a.steps){var f=0;for(a=a.steps;f<a.length;f++){var h=a[f];h instanceof u?this.steps.push(h):this.steps.push(new u({wkid:h.wkid,wkt:h.wkt,isInverse:h.isInverse}))}}}a.cacheKey=function(a,f){return[void 0!==a.wkid&&null!==a.wkid?a.wkid.toString():"-1",void 0!==a.wkt&&null!==a.wkt?a.wkt.toString():"",void 0!==f.wkid&&null!==f.wkid?
f.wkid.toString():"-1",void 0!==f.wkt&&null!==f.wkt?f.wkt.toString():""].join()};a.fromGE=function(f){var r=new a,h="",t=0;for(f=f.steps;t<f.length;t++){var m=u.fromGE(f[t]);r.steps.push(m);h+=m.uid.toString()+","}r._cached_projection={};r._gtlistentry=null;r._chain=h;return r};a.prototype.getInverse=function(){var f=new a;f.steps=[];for(var q=this.steps.length-1;0<=q;q--)f.steps.push(this.steps[q].getInverse());return f};a.prototype.getGTListEntry=function(){for(var a="",f=0,h=this.steps;f<h.length;f++)a+=
h[f].uid.toString()+",";a!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=a);return this._gtlistentry};a.prototype.assignCachedGe=function(f,q,h){this._cached_projection[a.cacheKey(f,q)]=h};a.prototype.getCachedGeTransformation=function(f,q){for(var h="",t=0,m=this.steps;t<m.length;t++)h+=m[t].uid.toString()+",";h!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=h);f=this._cached_projection[a.cacheKey(f,q)];return void 0===f?null:f};return a}()})},
"esri/geometry/support/GeographicTransformationStep":function(){define(["require","exports"],function(w,a){var u=0;return function(){function a(a){void 0===a&&(a=null);this.uid=u++;a?(this._wkt=void 0!==a.wkt?a.wkt:null,this._wkid=void 0!==a.wkid?a.wkid:-1,this._isInverse=void 0!==a.isInverse?!0===a.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}a.fromGE=function(f){var r=new a;r._wkt=f.wkt;r._wkid=f.wkid;r._isInverse=f.isInverse;return r};Object.defineProperty(a.prototype,"wkt",
{get:function(){return this._wkt},set:function(a){this._wkt=a;this.uid=u++},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"wkid",{get:function(){return this._wkid},set:function(a){this._wkid=a;this.uid=u++},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isInverse",{get:function(){return this._isInverse},set:function(a){this._isInverse=a;this.uid=u++},enumerable:!0,configurable:!0});a.prototype.getInverse=function(){var f=new a;f._wkt=this.wkt;f._wkid=this._wkid;
f._isInverse=!this.isInverse;return f};return a}()})},"esri/views/2d/layers/features/support/AttributeStore":function(){define("require exports ../../../../../core/tsSupport/generatorHelper ../../../../../core/tsSupport/awaiterHelper ../../../../../core/Error ../../../../../core/has ../../../../../core/Logger ../../../../../core/mathUtils ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../layers/support/FieldsIndex ../../../../../support/arcadeOnDemand ../../../../webgl ../../../engine ../../../arcade/utils ../../../engine/webgl/definitions ../tileRenderers/support/visualVariablesUtils @dojo/framework/shim/Promise".split(" "),
function(w,a,u,f,r,q,h,t,m,e,v,p,z,b,g,n,c){Object.defineProperty(a,"__esModule",{value:!0});var d=h.getLogger("esri.views.layers.2d.features.support.AttributeStore"),l=b.debug.createDebugLogger(b.debug.DEBUG_ATTR_UPDATES,d),k=function(b,a){return function(c,d,g){var e;try{e=a(c,d,g)}catch(K){e=NaN}return(null===e||isNaN(e)||Infinity===e)&&b||e}},x=q("esri-shared-array-buffer"),y=q("esri-webgl-texture-float"),J=q("esri-webgl-max-texture-size"),F=q("esri-atomics"),H=function(){function a(b,a,c,d){this.texelSize=
4;var g=d.pixelType,e=d.layout;this.textureOnly=(d=d.textureOnly)||!1;this.pixelType=g;this._ctype=a;this.layout=e;this._resetRange();this._shared=b;d||(this.data=this._initData(g,c,b,a))}Object.defineProperty(a.prototype,"buffer",{get:function(){return m.andThen(this.data,function(b){return b.buffer})},enumerable:!0,configurable:!0});a.prototype.getData=function(b,a){b&=2147483647;return m.expect(this.data)[b*this.texelSize+a]};a.prototype.setData=function(b,a,c){b&=2147483647;0===(this.layout&1<<
a)?d.error("mapview-attributes-store","Tried to set a value for a texel's readonly component"):(this.data[b*this.texelSize+a]=c,this.dirtyStart=Math.min(this.dirtyStart,b),this.dirtyEnd=Math.max(this.dirtyEnd,b))};a.prototype.lock=function(){5121===this.pixelType&&this._shared&&F&&"local"!==this._ctype&&Atomics.store(this.data,0,1)};a.prototype.unlock=function(){5121===this.pixelType&&this._shared&&F&&"local"!==this._ctype&&Atomics.store(this.data,0,0)};a.prototype.expand=function(b){if(!this.textureOnly){b=
this._initData(this.pixelType,b,this._shared,this._ctype);var a=m.expect(this.data);b.set(a);this.data=b}};a.prototype.toMessage=function(){var a=this.dirtyStart,c=this.dirtyEnd,d=this.texelSize;if(a>c)return null;this._resetRange();var g=!this._shared&&"local"!==this._ctype,e=this.pixelType,l=this.layout,n=m.expect(this.data);if(!n.slice){if(!g)return{start:a,end:c,data:null,pixelType:e,layout:l};d=new (b.Utils.getPixelArrayCtor(this.pixelType))(Array.prototype.slice.call(this.data,a*d,(c+1)*d));
return{start:a,end:c,data:d,pixelType:e,layout:l}}d=g&&n.slice(a*d,(c+1)*d)||null;return{start:a,end:c,data:d,pixelType:e,layout:l}};a.prototype._initData=function(a,c,d,g){d=d&&"local"!==g?SharedArrayBuffer:ArrayBuffer;a=b.Utils.getPixelArrayCtor(a);c=new a(new d(c*c*4*a.BYTES_PER_ELEMENT));for(a=0;a<c.length;a+=4)c[a+1]=255;return c};a.prototype._resetRange=function(){this.dirtyStart=2147483647;this.dirtyEnd=0};return a}();q=function(){function a(a){this._attributeComputeMap=new Map;this._blocks=
[];this._idMap=new Map;this._localToObjectId=new Map;this._filters=Array(b.definitions.MAX_FILTERS);this._freeTexelsList=[];this._abortController=e.createAbortController();this._hasScaleExpr=!1;this._size=32;this._idCounter=1;this._idsToHighlight=new Set;var c=y?5126:5121;l("Creating AttributeStore "+(x?"with":"without")+" shared memory");this._client=a;this._blockDescriptors=[{pixelType:5121,layout:1},{pixelType:5121,layout:15,textureOnly:!0},{pixelType:c,layout:15},{pixelType:c,layout:15}];this._blocks=
this._blockDescriptors.map(function(){return null})}a.prototype.destroy=function(){this._abortController.abort()};Object.defineProperty(a.prototype,"hasScaleExpr",{get:function(){return this._hasScaleExpr},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_signal",{get:function(){return this._abortController.signal},enumerable:!0,configurable:!0});a.prototype.invalidateResources=function(){this._createResourcesPromise=null;this._abortController.abort();this._abortController=e.createAbortController()};
a.prototype.createLocalId=function(b,a){void 0===a&&(a=!1);if(!this._idMap.has(b)){var c=this._getFreeTexel();a=((a?2147483648:0)|c)>>>0;this._idMap.set(b,-1===a?0:a);this._localToObjectId.set(a,b)}return this._idMap.get(b)};a.prototype.addLocalId=function(b){this._getBlock(0).setData(b,0,0);this._freeTexelsList.push(b&2147483647)};a.prototype.removeLocalId=function(b){var a=this._idMap.get(b);this._idMap.delete(b);this._localToObjectId.delete(a);return a};a.prototype.freeLocalId=function(b){var a=
this._idMap.get(b);this._getBlock(0).setData(a,0,0);this._idMap.delete(b);this._localToObjectId.delete(a);this._freeTexelsList.push(a&2147483647)};a.prototype.getFeatureId=function(b){return this._localToObjectId.get(b)};a.prototype.getLocalId=function(b){return this._idMap.has(b)?this._idMap.get(b):null};a.prototype.setHighlight=function(b){return f(this,void 0,void 0,function(){var a,c,d,g,e,l,n=this;return u(this,function(k){switch(k.label){case 0:this._getBlock(0).lock();this._idsToHighlight.forEach(function(b){if(b=
n.getLocalId(b)){var a=n._getBlock(0).getData(b,0);n._getBlock(0).setData(b,0,a&-2)}});this._idsToHighlight.clear();a=0;for(c=b;a<c.length;a++)d=c[a],this._idsToHighlight.add(d);for(g=0;g<b.length;g++)e=this.getLocalId(b[g]),null!=e&&(l=this._getBlock(0).getData(e,0),this._getBlock(0).setData(e,0,l|1));this._getBlock(0).unlock();return[4,this.sendUpdates()];case 1:return k.sent(),[2]}})})};a.prototype.addHighlight=function(){return f(this,void 0,void 0,function(){return u(this,function(b){return[2]})})};
a.prototype.removeHighlight=function(){return f(this,void 0,void 0,function(){return u(this,function(b){return[2]})})};a.prototype.updateFilters=function(b){return f(this,void 0,void 0,function(){var a,c,d,g,l,n=this;return u(this,function(k){switch(k.label){case 0:return a=b.config,c=b.service,d=b.spatialReference,g=a.filters,l=g.map(function(a,g){return n._updateFilter(b,a,g,c,d)}),[4,e.all(l)];case 1:return k.sent(),[2]}})})};a.prototype.setAttributeBindings=function(b,a){return f(this,void 0,
void 0,function(){return u(this,function(c){this._hasScaleExpr=!1;switch(b.type){case "simple":case "class-breaks":case "unique-value":case "dictionary":return[2,this._bindVVEvaluators(b.visualVariables,a)];case "dot-density":return[2,this._bindDDEvaluators(b.attributes,a)];case "heatmap":break;default:d.error(new r("attribute-store","Found invalid renderer type: "+b))}return[2]})})};a.prototype.setData=function(b,a,c,d){this._getBlock(a).setData(b,c,d)};a.prototype.getData=function(b,a,c){return this._getBlock(a).getData(b,
c)};a.prototype.getHighlightFlag=function(b){return this._idsToHighlight.has(b)?n.HIGHLIGHT_FLAG:0};a.prototype.setAttributeData=function(a,c,d,g){var e=this;this._getBlock(0).setData(a,0,this.getFilterFlags(c));var l=y?1:2;this._attributeComputeMap.forEach(function(k,f){var A=f*l%4;f=e._getBlock(Math.floor(f*l/4)+n.ATTRIBUTE_DATA_VV);k=k(c,{$view:g},d);if(y)f.setData(a,A,k);else if(k===b.definitions.NAN_MAGIC_NUMBER)f.setData(a,A,255),f.setData(a,A+1,255);else{k=t.clamp(Math.round(k),-32767,32766)+
32768;var m=(k&65280)>>8;f.setData(a,A,k&255);f.setData(a,A+1,m)}})};a.prototype.sendUpdates=function(){var b=this;if(this._nextUpdate)return this._nextUpdate.promise;if(this._currUpdate)return this._nextUpdate=e.createResolver(),this._nextUpdate.promise;var a={blocks:this._blocks.map(function(b){return m.isSome(b)?b.toMessage():null})};return this._currUpdate=this._createResources().then(function(){var c=function(){b._currUpdate=null;if(b._nextUpdate){var a=b._nextUpdate;b._nextUpdate=null;b.sendUpdates().then(function(){return a.resolve()})}},
c=b._client.update(a,b._signal).then(c).catch(c);b._client.render();return c}).catch(function(a){if(e.isAbortError(a))return b._createResourcesPromise=null,b._createResources();d.error(new r("mapview-attribute-store","Encountered an error during client update",a));return e.resolve()})};a.prototype._createResources=function(){var b=this;if(m.isSome(this._createResourcesPromise))return this._createResourcesPromise;this._getBlock(n.ATTRIBUTE_DATA_ANIMATION);l("Initializing AttributeStore");var a={shared:x&&
"local"!==this._client.type,size:this._size,blocks:m.mapMany(this._blocks,function(b){return{textureOnly:b.textureOnly,buffer:b.buffer,pixelType:b.pixelType}})};this._createResourcesPromise=a=this._client.initialize(a,this._signal).catch(function(a){e.isAbortError(a)&&(b._createResourcesPromise=null);d.error(new r("mapview-attribute-store","Encountered an error during client initialization",a))});a.then(function(){return m.isNone(b._createResourcesPromise)?b._createResources():void 0});return a};
a.prototype._getBlock=function(b){var a=this._blocks[b];if(m.isSome(a))return a;l("Initializing AttributeBlock at index "+b);a=new H(x,this._client.type,this._size,this._blockDescriptors[b]);this._blocks[b]=a;this._createResourcesPromise=null;return a};a.prototype._expand=function(){if(this._size<J){var b=this._size<<=1;l("Expanding block size to",b,this._blocks);m.forEachSome(this._blocks,function(a){return a.expand(b)});this._createResourcesPromise=null;this._size=b;return 0}d.error(new r("mapview-limitations",
"Maximum number of onscreen features exceeded."));return-1};a.prototype._getFreeTexel=function(){return this._freeTexelsList.length?this._freeTexelsList.pop():this._idCounter>=this._size*this._size&&this._expand()?-1:this._idCounter++};a.prototype._updateFilter=function(b,a,c,d,g){return f(this,void 0,void 0,function(){var e,l,n,k,f,A,x,h,p,v=this;return u(this,function(y){switch(y.label){case 0:e=this._filters[c];l=m.isSome(e)&&e.hash;if(l===JSON.stringify(a))return[2];n=1<<c+1;return m.isNone(a)?
(this._filters[c]=null,this._idMap.forEach(function(b){var a=v._getBlock(0).getData(b,0);v._getBlock(0).setData(b,0,a|n)}),[2]):[4,b.queryObjectIds(a)];case 1:return k=y.sent(),a.hiddenIds&&a.hiddenIds.length&&(k=k.filter(function(b){return-1===a.hiddenIds.indexOf(b)})),f=k.map(function(b){return v._idMap.get(b)}),[4,this._getFilter(c,d)];case 2:A=y.sent();A.update(a,g);this._getBlock(0).lock();this._idMap.forEach(function(b){if(1!==(b&2147483648)>>>31){var a=v._getBlock(0).getData(b,0);v._getBlock(0).setData(b,
0,a&~n)}});for(x=0;x<f.length;x++)h=f[x],null!=h&&(p=this._getBlock(0).getData(h,0),this._getBlock(0).setData(h,0,p|n));this._getBlock(0).unlock();return[2]}})})};a.prototype._getFilter=function(b,a){return f(this,void 0,void 0,function(){var c,d,g;return u(this,function(e){switch(e.label){case 0:return c=this._filters[b],m.isSome(c)?[2,c]:[4,new Promise(function(b,a){w(["../../../../../layers/graphics/data/FeatureFilter"],b,a)})];case 1:return d=e.sent().default,g=new d({geometryType:a.geometryType,
hasM:!1,hasZ:!1,timeInfo:a.timeInfo,fieldsIndex:new v(a.fields)}),this._filters[b]=g,[2,g]}})})};a.prototype.isVisible=function(b){return!!(this._getBlock(0).getData(b.localId,0)&2)};a.prototype.getFilterFlags=function(b){for(var a=0,c=1===(b.localId&2147483648)>>>31?254:255,d=0;d<this._filters.length;d++)var g=this._filters[d],g=!(c&1<<d)||m.isNone(g)||g.check(b),a=a|(g?1:0)<<d;b=this.getFeatureId(b.localId);return a<<1|this.getHighlightFlag(b)};a.prototype._bindVVEvaluators=function(a,c){return f(this,
void 0,void 0,function(){var d,g=this;return u(this,function(l){switch(l.label){case 0:this._attributeComputeMap.clear();if(!m.isSome(a))return[3,2];d=e.all(a.map(function(a){return f(g,void 0,void 0,function(){var d,g;return u(this,function(e){switch(e.label){case 0:return d=b.Utils.getVVType(a.type),[4,this._createGetValueFunction(a,c)];case 1:return g=e.sent(),m.isSome(g)&&this._attributeComputeMap.set(d,g),[2]}})})}));return[4,d];case 1:l.sent(),l.label=2;case 2:return[2]}})})};a.prototype._bindDDEvaluators=
function(a,c){return f(this,void 0,void 0,function(){var g,l,n,f=this;return u(this,function(A){switch(A.label){case 0:return this._attributeComputeMap.clear(),a.length>b.definitions.DOT_DENSITY_MAX_FIELDS&&d.warn("mapview-invalid-value","DotDensityRenderer supports a maximum of "+b.definitions.DOT_DENSITY_MAX_FIELDS+" attribtues, but found "+a.length),[4,e.all(a.map(function(b){return f._createNormalizedFunction(b,c)}))];case 1:g=A.sent().map(function(b){return k(0,b)});for(l=0;l<b.definitions.DOT_DENSITY_MAX_FIELDS;l++)(n=
l<a.length&&g[l])?this._attributeComputeMap.set(l,n):this._attributeComputeMap.has(l)&&this._attributeComputeMap.delete(l);return[2]}})})};a.prototype._createGetValueFunction=function(a,d){return f(this,void 0,void 0,function(){var g,e,l,n,f,m,x;return u(this,function(A){switch(A.label){case 0:if("size"!==a.type)return[3,2];g=b.getTypeOfSizeVisualVariable(a);if(g===b.enums.WGLVVFlag.SIZE_SCALE_STOPS)return[2,null];l=(e=g===b.enums.WGLVVFlag.SIZE_UNIT_VALUE)&&function(b){return c.getVisualVariableSizeValueRepresentationRatio(b,
a.valueRepresentation)};n=k;f=[b.definitions.NAN_MAGIC_NUMBER];return[4,this._createNormalizedFunction(a,d,l)];case 1:return[2,n.apply(void 0,f.concat([A.sent()]))];case 2:return m=k,x=[b.definitions.NAN_MAGIC_NUMBER],[4,this._createNormalizedFunction(a,d)];case 3:return[2,m.apply(void 0,x.concat([A.sent()]))]}})})};a.prototype._createNormalizedFunction=function(b,a,c){return f(this,void 0,void 0,function(){var e,l,n;return u(this,function(k){switch(k.label){case 0:if(e=b.field){if("string"===typeof e)return(l=
b.normalizationField)?[2,function(b){if(b.attributes[e]&&b.attributes[l])return b=b.attributes[e]/b.attributes[l],c?c(b):b}]:[2,c?function(b){return c(b.attributes[e])}:function(b){return b.attributes[e]}];d.error(new r("mapview-rendering:invalid-type","The field for a vv must be a string or a number, but got "+typeof e));return[2,function(){}]}if(!b.valueExpression)return[3,2];this._hasScaleExpr=this._hasScaleExpr||-1!==b.valueExpression.indexOf("scale");return[4,p.createVVExpression(b.valueExpression,
a.spatialReference,a.fields)];case 1:return n=k.sent(),[2,g.callWithOptimizedFeature.bind(null,n)];case 2:return d.error("Unable to create a normalized function for visual variable: "+b),[2,function(){}]}})})};return a}();a.default=q})},"esri/views/2d/layers/features/tileRenderers/support/visualVariablesUtils":function(){define("require exports ../../../../../../core/tsSupport/assignHelper ../../../../../../core/screenUtils ../../../../engine ../../../../engine/webgl/definitions ../../../../../3d/layers/support/FastSymbolUpdates".split(" "),
function(w,a,u,f,r,q,h){function t(b){return{value:b.value,size:f.toPt(b.size)}}function m(b){return b.map(function(b){return t(b)})}function e(b){return"string"===typeof b||"number"===typeof b?f.toPt(b):{type:"size",expression:b.expression,stops:m(b.stops)}}function v(b){var a={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if(r.Utils.isString(b.field))if(b.stops){if(8<b.stops.length)return null;var e=b.stops;for(b=0;8>b;++b){var c=e[Math.min(b,e.length-1)];a.values[b]=c.value;a.opacities[b]=
c.opacity}}else return null;else if(b.stops&&0<=b.stops.length)for(e=b.stops&&0<=b.stops.length&&b.stops[0].opacity,b=0;8>b;b++)a.values[b]=Infinity,a.opacities[b]=e;else return null;return a}Object.defineProperty(a,"__esModule",{value:!0});var p=r.enums.WGLVVFlag;a.getVisualVariableSizeValueRepresentationRatio=function(b,a){if(!b||!a)return b;switch(a){case "radius":case "distance":return 2*b;case "area":return Math.sqrt(b)}return b};a.stopToSizeStop=t;a.normalizeSizeStops=m;a.normalizeSizeElement=
e;a.getVisualVariablesFields=function(b){var a=b&&0<b.length?{}:null;a&&b.forEach(function(b){var c=b.type;b.field&&(a[c]=b.field)});return a};var z=function(b){var a=[],e=[];b=m(b);for(var c=b.length,d=0;6>d;d++){var l=b[Math.min(d,c-1)];a.push(l.value);e.push(null==l.size?q.NAN_MAGIC_NUMBER:f.pt2px(l.size))}return{values:new Float32Array(a),sizes:new Float32Array(e)}};a.convertVisualVariables=function(b){var a=b&&0<b.length?{}:null,n=a?{}:null;if(!a)return{vvFields:a,vvRanges:n};for(var c=0;c<b.length;c++){var d=
b[c],l=d.type;d.field&&(a[l]=d.field);if("size"===l)switch(n.size||(n.size={}),r.getTypeOfSizeVisualVariable(d)){case p.SIZE_MINMAX_VALUE:n.size.minMaxValue={minDataValue:d.minDataValue,maxDataValue:d.maxDataValue,minSize:e(d.minSize),maxSize:e(d.maxSize)};break;case p.SIZE_SCALE_STOPS:n.size.scaleStops={stops:m(d.stops)};break;case p.SIZE_FIELD_STOPS:if(d.levels){var l={},k;for(k in d.levels)l[k]=z(d.levels[k]);n.size.fieldStops={type:"level-dependent",levels:l}}else n.size.fieldStops=u({type:"static"},
z(d.stops));break;case p.SIZE_UNIT_VALUE:n.size.unitValue={unit:d.valueUnit,valueRepresentation:d.valueRepresentation}}else if("color"===l)for(d=h.convertVisualVariables([d],{modelSize:null,symbolSize:null,unitInMeters:1,transformation:null}),n.color=d.color,d=0;32>d;d+=4)r.color.premultiplyAlpha(n.color.colors,d,!0);else"opacity"===l?n.opacity=v(d):"rotation"===l&&(n.rotation={type:d.rotationType})}return{vvFields:a,vvRanges:n}}})},"esri/views/3d/layers/support/FastSymbolUpdates":function(){define("require exports ../../../../core/compilerUtils ../../../../core/mathUtils ../../../../core/libs/gl-matrix-2/mat3 ../../../../core/libs/gl-matrix-2/mat3f64 ../../../../core/libs/gl-matrix-2/mat4 ../../../../core/libs/gl-matrix-2/mat4f64 ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../../../renderers/support/utils ../../support/debugFlags".split(" "),
function(w,a,u,f,r,q,h,t,m,e,v,p){function z(b){return null!==b&&void 0!==b}function b(b){return"number"===typeof b}function g(b){return"string"===typeof b}function n(b,a){b&&b.push(a)}function c(a,c,g,e,l){var k=a.minSize,f=a.maxSize;if(a.expression)return n(l,"Could not convert size info: expression not supported"),!1;if(a.useSymbolValue)return a=e.symbolSize[g],c.minSize[g]=a,c.maxSize[g]=a,c.offset[g]=c.minSize[g],c.factor[g]=0,c.type[g]=1,!0;if(z(a.field)){if(z(a.stops)){if(2===a.stops.length&&
b(a.stops[0].size)&&b(a.stops[1].size))return d(a.stops[0].size,a.stops[1].size,a.stops[0].value,a.stops[1].value,c,g),c.type[g]=1,!0;n(l,"Could not convert size info: stops only supported with 2 elements");return!1}if(b(k)&&b(f)&&z(a.minDataValue)&&z(a.maxDataValue))return d(k,f,a.minDataValue,a.maxDataValue,c,g),c.type[g]=1,!0;if(null!=v.meterIn[a.valueUnit])return c.minSize[g]=-Infinity,c.maxSize[g]=Infinity,c.offset[g]=0,c.factor[g]=1/v.meterIn[a.valueUnit],c.type[g]=1,!0;if("unknown"===a.valueUnit)return n(l,
"Could not convert size info: proportional size not supported"),!1;n(l,"Could not convert size info: scale-dependent size not supported");return!1}if(!z(a.field)){if(a.stops&&a.stops[0]&&b(a.stops[0].size))return c.minSize[g]=a.stops[0].size,c.maxSize[g]=a.stops[0].size,c.offset[g]=c.minSize[g],c.factor[g]=0,c.type[g]=1,!0;if(b(k))return c.minSize[g]=k,c.maxSize[g]=k,c.offset[g]=k,c.factor[g]=0,c.type[g]=1,!0}n(l,"Could not convert size info: unsupported variant of sizeInfo");return!1}function d(b,
a,c,d,g,e){d=0<Math.abs(d-c)?(a-b)/(d-c):0;g.minSize[e]=0<d?b:a;g.maxSize[e]=0<d?a:b;g.offset[e]=b-c*d;g.factor[e]=d}function l(b,a,d,e){if(b.normalizationField||b.valueRepresentation)return n(e,"Could not convert size info: unsupported property"),null;var l=b.field;if(null!=l&&!g(l))return n(e,"Could not convert size info: field is not a string"),null;if(!a.size)a.size={field:b.field,minSize:[0,0,0],maxSize:[0,0,0],offset:[0,0,0],factor:[0,0,0],type:[0,0,0]};else if(b.field)if(!a.size.field)a.size.field=
b.field;else if(b.field!==a.size.field)return n(e,"Could not convert size info: multiple fields in use"),null;switch(b.axis){case "width":return(l=c(b,a.size,0,d,e))?a:null;case "height":return(l=c(b,a.size,2,d,e))?a:null;case "depth":return(l=c(b,a.size,1,d,e))?a:null;case "width-and-depth":return(l=c(b,a.size,0,d,e))&&c(b,a.size,1,d,e),l?a:null;case null:case void 0:case "all":return(l=(l=(l=c(b,a.size,0,d,e))&&c(b,a.size,1,d,e))&&c(b,a.size,2,d,e))?a:null;default:return n(e,'Could not convert size info: unknown axis "'+
b.axis+'""'),null}}function k(b,a,c){for(var d=0;3>d;++d){var g=a.unitInMeters;1===b.type[d]&&(g*=a.modelSize[d],b.type[d]=2);b.minSize[d]/=g;b.maxSize[d]/=g;b.offset[d]/=g;b.factor[d]/=g}if(0!==b.type[0])a=0;else if(0!==b.type[1])a=1;else if(0!==b.type[2])a=2;else return n(c,"No size axis contains a valid size or scale"),!1;for(d=0;3>d;++d)0===b.type[d]&&(b.minSize[d]=b.minSize[a],b.maxSize[d]=b.maxSize[a],b.offset[d]=b.offset[a],b.factor[d]=b.factor[a],b.type[d]=b.type[a]);return!0}function x(b,
a,c){b[4*a+0]=c.r/255;b[4*a+1]=c.g/255;b[4*a+2]=c.b/255;b[4*a+3]=c.a}function y(b,a,c){if(b.normalizationField)return n(c,"Could not convert color info: unsupported property"),null;if(g(b.field))if(b.stops){if(8<b.stops.length)return n(c,"Could not convert color info: too many color stops"),null;a.color={field:b.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};c=b.stops;for(b=0;8>b;++b){var d=c[Math.min(b,c.length-1)];a.color.values[b]=d.value;
x(a.color.colors,b,d.color)}}else return n(c,"Could not convert color info: missing stops or colors"),null;else if(b.stops&&0<=b.stops.length)for(c=b.stops&&0<=b.stops.length&&b.stops[0].color,a.color={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},b=0;8>b;b++)a.color.values[b]=Infinity,x(a.color.colors,b,c);else return n(c,"Could not convert color info: no field and no colors/stops"),null;return a}function J(b,a,c){if(b.normalizationField)return n(c,
"Could not convert opacity info: unsupported property"),null;if(g(b.field))if(b.stops){if(8<b.stops.length)return n(c,"Could not convert opacity info: too many opacity stops"),null;a.opacity={field:b.field,values:[0,0,0,0,0,0,0,0],opacityValues:[0,0,0,0,0,0,0,0]};c=b.stops;for(b=0;8>b;++b){var d=c[Math.min(b,c.length-1)];a.opacity.values[b]=d.value;a.opacity.opacityValues[b]=d.opacity}}else return n(c,"Could not convert opacity info: missing stops or opacities"),null;else if(b.stops&&0<=b.stops.length)for(c=
b.stops&&0<=b.stops.length&&b.stops[0].opacity,a.opacity={field:null,values:[0,0,0,0,0,0,0,0],opacityValues:[0,0,0,0,0,0,0,0]},b=0;8>b;b++)a.opacity.values[b]=Infinity,a.opacity.opacityValues[b]=c;else return n(c,"Could not convert opacity info: no field and no opacities/stops"),null;return a}function F(b,a,c){b=2===c&&"arithmetic"===b.rotationType;a.offset[c]=b?90:0;a.factor[c]=b?-1:1;a.type[c]=1}function H(b,a,c){if(!g(b.field))return n(c,"Could not convert rotation info: field is not a string"),
null;if(!a.rotation)a.rotation={field:b.field,offset:[0,0,0],factor:[1,1,1],type:[0,0,0]};else if(b.field)if(!a.rotation.field)a.rotation.field=b.field;else if(b.field!==a.rotation.field)return n(c,"Could not convert rotation info: multiple fields in use"),null;switch(b.axis){case "tilt":return F(b,a.rotation,0),a;case "roll":return F(b,a.rotation,1),a;case null:case void 0:case "heading":return F(b,a.rotation,2),a;default:return n(c,'Could not convert rotation info: unknown axis "'+b.axis+'""'),
null}}function C(b,a,c){if(!b)return null;var d=!a.supportedTypes||!!a.supportedTypes.size,g=!a.supportedTypes||!!a.supportedTypes.color,e=!a.supportedTypes||!!a.supportedTypes.rotation,f=!!a.supportedTypes&&!!a.supportedTypes.opacity,m=b.reduce(function(b,k){if(!b)return b;if(k.valueExpression)return n(c,"Could not convert visual variables: arcade expressions not supported"),null;switch(k.type){case "size":return d?l(k,b,a,c):b;case "color":return g?y(k,b,c):b;case "opacity":return f?J(k,b,c):null;
case "rotation":return e?H(k,b,c):b;default:return u.neverReached(k),null}},{size:null,color:null,opacity:null,rotation:null});return 0<b.length&&m&&!m.size&&!m.color&&!m.opacity&&!m.rotation||m&&m.size&&!k(m.size,a,c)?null:m}function E(b,a,c){if(!!b!==!!a||b&&b.field!==a.field)return!1;if(b&&"rotation"===c)for(c=0;3>c;c++)if(b.type[c]!==a.type[c]||b.offset[c]!==a.offset[c]||b.factor[c]!==a.factor[c])return!1;return!0}function G(b,a){var c={vvSizeEnabled:!1,vvSizeMinSize:null,vvSizeMaxSize:null,vvSizeOffset:null,
vvSizeFactor:null,vvSizeValue:null,vvColorEnabled:!1,vvColorValues:null,vvColorColors:null,vvOpacityEnabled:!1,vvOpacityValues:null,vvOpacityOpacities:null,vvSymbolAnchor:null,vvSymbolRotationMatrix:null},d=b&&null!=b.size;b&&b.size?(c.vvSizeEnabled=!0,c.vvSizeMinSize=b.size.minSize,c.vvSizeMaxSize=b.size.maxSize,c.vvSizeOffset=b.size.offset,c.vvSizeFactor=b.size.factor):b&&d&&(c.vvSizeValue=a.transformation.scale);if(b&&d){c.vvSymbolAnchor=a.transformation.anchor;c.vvSymbolRotationMatrix=q.mat3f64.create();
h.mat4.identity(D);var g=a.transformation.rotation[2],d=a.transformation.rotation[0],e=a.transformation.rotation[1];a=D;void 0===a&&(a=t.mat4f64.create());g=g||0;d=d||0;e=e||0;0!==g&&h.mat4.rotateZ(a,a,-g/180*Math.PI);0!==d&&h.mat4.rotateX(a,a,d/180*Math.PI);0!==e&&h.mat4.rotateY(a,a,e/180*Math.PI);r.mat3.fromMat4(c.vvSymbolRotationMatrix,D)}b&&b.color&&(c.vvColorEnabled=!0,c.vvColorValues=b.color.values,c.vvColorColors=b.color.colors);b&&b.opacity&&(c.vvOpacityEnabled=!0,c.vvOpacityValues=b.opacity.values,
c.vvOpacityOpacities=b.opacity.opacityValues);return c}Object.defineProperty(a,"__esModule",{value:!0});a.convertVisualVariables=C;a.initFastSymbolUpdatesState=function(b,a){return!b||p.DISABLE_FAST_UPDATES?{enabled:!1}:(b=C(b.visualVariables,a))?{enabled:!0,visualVariables:b,materialParameters:G(b,a),requiresShaderTransformation:b&&null!=b.size}:{enabled:!1}};a.updateFastSymbolUpdatesState=function(b,a,c){if(!a||!b.enabled)return!1;var d=b.visualVariables;a=C(a.visualVariables,c);if(!(a&&E(d.size,
a.size,"size")&&E(d.color,a.color,"color")&&E(d.rotation,a.rotation,"rotation")&&E(d.opacity,a.opacity,"opacity")))return!1;b.visualVariables=a;b.materialParameters=G(a,c);b.requiresShaderTransformation=a&&null!=a.size;return!0};a.getMaterialParams=G;var I;(function(b){var a=t.mat4f64.create(),c=e.vec3f64.create();b.evaluateModelTransform=function(b,d,g){if(!b.vvSizeEnabled)return g;h.mat4.copy(a,g);g=b.vvSymbolRotationMatrix;h.mat4.set(D,g[0],g[1],g[2],0,g[3],g[4],g[5],0,g[6],g[7],g[8],0,0,0,0,1);
h.mat4.multiply(a,a,D);for(g=0;3>g;++g)c[g]=f.clamp(b.vvSizeOffset[g]+d[0]*b.vvSizeFactor[g],b.vvSizeMinSize[g],b.vvSizeMaxSize[g]);h.mat4.scale(a,a,c);h.mat4.translate(a,a,b.vvSymbolAnchor);return a};b.evaluateModelTransformScale=function(b,a,c){if(!a.vvSizeEnabled)return m.vec3.set(b,1,1,1);for(var d=0;3>d;++d)b[d]=f.clamp(a.vvSizeOffset[d]+c[0]*a.vvSizeFactor[d],a.vvSizeMinSize[d],a.vvSizeMaxSize[d]);return b}})(I||(I={}));var D=t.mat4f64.create();a.evaluateModelTransform=I.evaluateModelTransform;
a.evaluateModelTransformScale=I.evaluateModelTransformScale})},"esri/core/libs/gl-matrix-2/mat3f64":function(){define(["require","exports","./factories/mat3f64"],function(w,a,u){Object.defineProperty(a,"__esModule",{value:!0});a.mat3f64=u})},"esri/core/libs/gl-matrix-2/factories/mat3f64":function(){define(["require","exports"],function(w,a){Object.defineProperty(a,"__esModule",{value:!0});a.create=function(){return[1,0,0,0,1,0,0,0,1]};a.clone=function(a){return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],
a[7],a[8]]};a.fromValues=function(a,f,r,q,h,t,m,e,v){return[a,f,r,q,h,t,m,e,v]};a.createView=function(a,f){return new Float64Array(a,f,9)}})},"esri/core/libs/gl-matrix-2/mat4f64":function(){define(["require","exports","./factories/mat4f64"],function(w,a,u){Object.defineProperty(a,"__esModule",{value:!0});a.mat4f64=u})},"esri/core/libs/gl-matrix-2/factories/mat4f64":function(){define(["require","exports"],function(w,a){function u(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}Object.defineProperty(a,"__esModule",
{value:!0});a.create=u;a.clone=function(a){return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]]};a.fromValues=function(a,r,q,h,t,m,e,v,p,z,b,g,n,c,d,l){return[a,r,q,h,t,m,e,v,p,z,b,g,n,c,d,l]};a.createView=function(a,r){return new Float64Array(a,r,16)};a.IDENTITY=u()})},"esri/views/3d/support/debugFlags":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),
function(w,a,u,f,r,q){return new (function(a){function h(){var f=null!==a&&a.apply(this,arguments)||this;f.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1;f.SCENEVIEW_LOCKING_LOG=!1;f.HIGHLIGHTS_GRID_OPTIMIZATION_DISABLED=!1;f.HIGHLIGHTS_VISUALIZE_BLOCKS=!1;f.HIGHLIGHTS_PROFILE_TO_CONSOLE=!1;f.DECONFLICTOR_SHOW_OUTLINES=!1;f.DECONFLICTOR_SHOW_OUTLINES_INVISIBLE=!1;f.DECONFLICTOR_SHOW_GRID=!1;f.LABELS_SHOW_BORDER=!1;f.OVERLAY_DRAW_TEST_TEXTURE=!1;f.OVERLAY_SHOW_CENTER=!1;f.TESTS_DISABLE_UPDATE_THRESHOLDS=
!1;f.DISABLE_DECONFLICTOR_VISIBILITY_OFFSET=!1;f.DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES=!1;f.DRAW_MESH_GEOMETRY_NORMALS=!1;f.FEATURE_TILE_FETCH_SHOW_TILES=!1;f.FEATURE_TILE_TREE_SHOW_TILES=!1;f.TERRAIN_TILE_TREE_SHOW_TILES=!1;f.I3S_TREE_SHOW_TILES=!1;f.ENABLE_PROFILE_DEPTH_RANGE=!1;f.DISABLE_FAST_UPDATES=!1;f.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1;f.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1;f.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=!1;return f}u(h,a);f([q.property()],h.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",
void 0);f([q.property()],h.prototype,"SCENEVIEW_LOCKING_LOG",void 0);f([q.property()],h.prototype,"HIGHLIGHTS_GRID_OPTIMIZATION_DISABLED",void 0);f([q.property()],h.prototype,"HIGHLIGHTS_VISUALIZE_BLOCKS",void 0);f([q.property()],h.prototype,"HIGHLIGHTS_PROFILE_TO_CONSOLE",void 0);f([q.property()],h.prototype,"DECONFLICTOR_SHOW_OUTLINES",void 0);f([q.property()],h.prototype,"DECONFLICTOR_SHOW_OUTLINES_INVISIBLE",void 0);f([q.property()],h.prototype,"DECONFLICTOR_SHOW_GRID",void 0);f([q.property()],
h.prototype,"LABELS_SHOW_BORDER",void 0);f([q.property()],h.prototype,"OVERLAY_DRAW_TEST_TEXTURE",void 0);f([q.property()],h.prototype,"OVERLAY_SHOW_CENTER",void 0);f([q.property()],h.prototype,"TESTS_DISABLE_UPDATE_THRESHOLDS",void 0);f([q.property()],h.prototype,"DISABLE_DECONFLICTOR_VISIBILITY_OFFSET",void 0);f([q.property()],h.prototype,"DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES",void 0);f([q.property()],h.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0);f([q.property()],h.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",
void 0);f([q.property()],h.prototype,"FEATURE_TILE_TREE_SHOW_TILES",void 0);f([q.property()],h.prototype,"TERRAIN_TILE_TREE_SHOW_TILES",void 0);f([q.property()],h.prototype,"I3S_TREE_SHOW_TILES",void 0);f([q.property()],h.prototype,"ENABLE_PROFILE_DEPTH_RANGE",void 0);f([q.property()],h.prototype,"DISABLE_FAST_UPDATES",void 0);f([q.property()],h.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0);f([q.property()],h.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0);f([q.property()],
h.prototype,"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES",void 0);return h=f([q.subclass("esri.views.3d.support.DebugFlags")],h)}(q.declared(r)))})},"esri/views/2d/layers/features/support/TileStore":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/Evented ../../../../../core/has ../../../../../core/libs/rbush/rbush ./Tile ../../../tiling/TileCoverage ../../../tiling/TileKey".split(" "),function(w,a,u,f,r,q,h,t,
m,e){Object.defineProperty(a,"__esModule",{value:!0});var v={added:[],removed:[]},p=new Set,z=new e(0,0,0,0);w=function(b){function a(a){var c=b.call(this)||this;c._tiles=new Map;c._index=h(9,q("csp-restrictions")?function(b){return{minX:b.bounds[0],minY:b.bounds[1],maxX:b.bounds[2],maxY:b.bounds[3]}}:[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);c.tiles=[];c.tileScheme=a;return c}u(a,b);a.prototype.destroy=function(){this._tiles.clear()};a.prototype.has=function(b){return this._tiles.has(b)};
a.prototype.get=function(b){return this._tiles.get(b)};a.prototype.findByKey=function(b){return this._tiles.get(b.id)};a.prototype.intersections=function(b,a){var c="string"===typeof b?this.get(b):b;if(!c)return[];var g=a*c.resolution;a=c.bounds[0]-g;b=c.bounds[1]-g;for(var e=c.bounds[2]+g,c=c.bounds[3]+g,g=[],n=0,f=this._index.search({minX:a,minY:b,maxX:e,maxY:c});n<f.length;n++){var h=f[n],m=h.bounds.slice();m[0]=Math.max(m[0],a);m[1]=Math.max(m[1],b);m[2]=Math.min(m[2],e);m[3]=Math.min(m[3],c);
0<m[2]-m[0]&&0<m[3]-m[1]&&g.push({bounds:m,tile:h})}return g};a.prototype.boundsIntersections=function(b){return this._index.search({minX:b[0],minY:b[1],maxX:b[2],maxY:b[3]})};a.prototype.setViewState=function(b){if(b=this.tileScheme.getTileCoverage(b,0)){var a=b.spans,d=b.lodInfo,g=d.level;if(0<a.length)for(var e=0;e<a.length;e++)for(var n=a[e],f=n.row,h=n.colTo,r=n.colFrom;r<=h;r++){var q=z.set(g,f,d.normalizeCol(r),d.getWorldForColumn(r)).id;p.add(q);this.has(q)||(n=new t.default(this.tileScheme,
q),this._tiles.set(q,n),this._index.insert(n),this.tiles.push(n),v.added.push(n))}for(a=this.tiles.length-1;0<=a;a--)n=this.tiles[a],p.has(n.id)||(this._tiles.delete(n.id),this.tiles.splice(a,1),this._index.remove(n),v.removed.push(n));(v.added.length||v.removed.length)&&this.emit("update",v);m.pool.release(b);p.clear();v.added.length=0;v.removed.length=0}};return a}(r);a.default=w})},"esri/core/libs/rbush/rbush":function(){define(["../quickselect/quickselect"],function(w){function a(b,g){if(!(this instanceof
a))return new a(b,g);this._maxEntries=Math.max(4,b||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));g&&("function"===typeof g?this.toBBox=g:this._initFormat(g));this.clear()}function u(b,a){f(b,0,b.children.length,a,b)}function f(b,a,e,c,d){d||(d=p(null));d.minX=Infinity;d.minY=Infinity;d.maxX=-Infinity;d.maxY=-Infinity;for(var g;a<e;a++)g=b.children[a],r(d,b.leaf?c(g):g);return d}function r(b,a){b.minX=Math.min(b.minX,a.minX);b.minY=Math.min(b.minY,a.minY);b.maxX=Math.max(b.maxX,a.maxX);
b.maxY=Math.max(b.maxY,a.maxY);return b}function q(b,a){return b.minX-a.minX}function h(b,a){return b.minY-a.minY}function t(b){return(b.maxX-b.minX)*(b.maxY-b.minY)}function m(b){return b.maxX-b.minX+(b.maxY-b.minY)}function e(b,a){return b.minX<=a.minX&&b.minY<=a.minY&&a.maxX<=b.maxX&&a.maxY<=b.maxY}function v(b,a){return a.minX<=b.maxX&&a.minY<=b.maxY&&a.maxX>=b.minX&&a.maxY>=b.minY}function p(b){return{children:b,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function z(b,
a,e,c,d){for(var g=[a,e],k;g.length;)e=g.pop(),a=g.pop(),e-a<=c||(k=a+Math.ceil((e-a)/c/2)*c,w(b,k,a,e,d),g.push(a,k,k,e))}a.prototype={all:function(){return this._all(this.data,[])},search:function(b){var a=this.data,n=[],c=this.toBBox;if(!v(b,a))return n;for(var d=[],l,k,f,h;a;){l=0;for(k=a.children.length;l<k;l++)f=a.children[l],h=a.leaf?c(f):f,v(b,h)&&(a.leaf?n.push(f):e(b,h)?this._all(f,n):d.push(f));a=d.pop()}return n},collides:function(b){var a=this.data,n=this.toBBox;if(!v(b,a))return!1;for(var c=
[],d,l,k,f;a;){d=0;for(l=a.children.length;d<l;d++)if(k=a.children[d],f=a.leaf?n(k):k,v(b,f)){if(a.leaf||e(b,f))return!0;c.push(k)}a=c.pop()}return!1},load:function(b){if(!b||!b.length)return this;if(b.length<this._minEntries){for(var a=0,e=b.length;a<e;a++)this.insert(b[a]);return this}b=this._build(b.slice(),0,b.length-1,0);this.data.children.length?this.data.height===b.height?this._splitRoot(this.data,b):(this.data.height<b.height&&(a=this.data,this.data=b,b=a),this._insert(b,this.data.height-
b.height-1,!0)):this.data=b;return this},insert:function(b){b&&this._insert(b,this.data.height-1);return this},clear:function(){this.data=p([]);return this},remove:function(b,a){if(!b)return this;for(var g=this.data,c=this.toBBox(b),d=[],l=[],k,f,h,m;g||d.length;){g||(g=d.pop(),f=d[d.length-1],k=l.pop(),m=!0);if(g.leaf){a:{h=b;var v=g.children,p=a;if(p){for(var r=0;r<v.length;r++)if(p(h,v[r])){h=r;break a}h=-1}else h=v.indexOf(h)}if(-1!==h){g.children.splice(h,1);d.push(g);this._condense(d);break}}m||
g.leaf||!e(g,c)?f?(k++,g=f.children[k],m=!1):g=null:(d.push(g),l.push(k),k=0,f=g,g=g.children[0])}return this},toBBox:function(b){return b},compareMinX:q,compareMinY:h,toJSON:function(){return this.data},fromJSON:function(b){this.data=b;return this},_all:function(b,a){for(var g=[];b;)b.leaf?a.push.apply(a,b.children):g.push.apply(g,b.children),b=g.pop();return a},_build:function(b,a,e,c){var d=e-a+1,g=this._maxEntries,k;if(d<=g)return k=p(b.slice(a,e+1)),u(k,this.toBBox),k;c||(c=Math.ceil(Math.log(d)/
Math.log(g)),g=Math.ceil(d/Math.pow(g,c-1)));k=p([]);k.leaf=!1;k.height=c;var d=Math.ceil(d/g),g=d*Math.ceil(Math.sqrt(g)),f,n,h;for(z(b,a,e,g,this.compareMinX);a<=e;a+=g)for(n=Math.min(a+g-1,e),z(b,a,n,d,this.compareMinY),f=a;f<=n;f+=d)h=Math.min(f+d-1,n),k.children.push(this._build(b,f,h,c-1));u(k,this.toBBox);return k},_chooseSubtree:function(b,a,e,c){for(var d,g,k,f,n,h,m,v;;){c.push(a);if(a.leaf||c.length-1===e)break;m=v=Infinity;d=0;for(g=a.children.length;d<g;d++)k=a.children[d],n=t(k),h=(Math.max(k.maxX,
b.maxX)-Math.min(k.minX,b.minX))*(Math.max(k.maxY,b.maxY)-Math.min(k.minY,b.minY))-n,h<v?(v=h,m=n<m?n:m,f=k):h===v&&n<m&&(m=n,f=k);a=f||a.children[0]}return a},_insert:function(b,a,e){var c=this.toBBox;e=e?b:c(b);var c=[],d=this._chooseSubtree(e,this.data,a,c);d.children.push(b);for(r(d,e);0<=a;)if(c[a].children.length>this._maxEntries)this._split(c,a),a--;else break;this._adjustParentBBoxes(e,c,a)},_split:function(b,a){var e=b[a],c=e.children.length,d=this._minEntries;this._chooseSplitAxis(e,d,c);
c=this._chooseSplitIndex(e,d,c);c=p(e.children.splice(c,e.children.length-c));c.height=e.height;c.leaf=e.leaf;u(e,this.toBBox);u(c,this.toBBox);a?b[a-1].children.push(c):this._splitRoot(e,c)},_splitRoot:function(b,a){this.data=p([b,a]);this.data.height=b.height+1;this.data.leaf=!1;u(this.data,this.toBBox)},_chooseSplitIndex:function(b,a,e){var c,d,g,k,n,h,m;n=h=Infinity;for(c=a;c<=e-a;c++)d=f(b,0,c,this.toBBox),g=f(b,c,e,this.toBBox),k=Math.max(0,Math.min(d.maxX,g.maxX)-Math.max(d.minX,g.minX))*Math.max(0,
Math.min(d.maxY,g.maxY)-Math.max(d.minY,g.minY)),d=t(d)+t(g),k<n?(n=k,m=c,h=d<h?d:h):k===n&&d<h&&(h=d,m=c);return m},_chooseSplitAxis:function(b,a,e){var c=b.leaf?this.compareMinX:q,d=b.leaf?this.compareMinY:h,g=this._allDistMargin(b,a,e,c);a=this._allDistMargin(b,a,e,d);g<a&&b.children.sort(c)},_allDistMargin:function(b,a,e,c){b.children.sort(c);c=this.toBBox;var d=f(b,0,a,c),g=f(b,e-a,e,c),k=m(d)+m(g),n,h;for(n=a;n<e-a;n++)h=b.children[n],r(d,b.leaf?c(h):h),k+=m(d);for(n=e-a-1;n>=a;n--)h=b.children[n],
r(g,b.leaf?c(h):h),k+=m(g);return k},_adjustParentBBoxes:function(b,a,e){for(;0<=e;e--)r(a[e],b)},_condense:function(b){for(var a=b.length-1,e;0<=a;a--)0===b[a].children.length?0<a?(e=b[a-1].children,e.splice(e.indexOf(b[a]),1)):this.clear():u(b[a],this.toBBox)},_initFormat:function(b){var a=["return a"," - b",";"];this.compareMinX=new Function("a","b",a.join(b[0]));this.compareMinY=new Function("a","b",a.join(b[1]));this.toBBox=new Function("a","return {minX: a"+b[0]+", minY: a"+b[1]+", maxX: a"+
b[2]+", maxY: a"+b[3]+"};")}};return a})},"esri/core/libs/quickselect/quickselect":function(){define([],function(){function w(f,r,q,h,t){for(;h>q;){if(600<h-q){var m=h-q+1,e=r-q+1,v=Math.log(m),p=.5*Math.exp(2*v/3),v=.5*Math.sqrt(v*p*(m-p)/m)*(0>e-m/2?-1:1);w(f,r,Math.max(q,Math.floor(r-e*p/m+v)),Math.min(h,Math.floor(r+(m-e)*p/m+v)),t)}m=f[r];e=q;p=h;a(f,q,r);for(0<t(f[h],m)&&a(f,q,h);e<p;){a(f,e,p);e++;for(p--;0>t(f[e],m);)e++;for(;0<t(f[p],m);)p--}0===t(f[q],m)?a(f,q,p):(p++,a(f,p,h));p<=r&&(q=
p+1);r<=p&&(h=p-1)}}function a(a,r,q){var f=a[r];a[r]=a[q];a[q]=f}function u(a,r){return a<r?-1:a>r?1:0}return function(a,r,q,h,t){w(a,r,q||0,h||a.length-1,t||u)}})},"esri/views/2d/layers/features/support/Tile":function(){define("require exports ../../../../../core/ArrayPool ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../tasks/support/QuantizationParameters ../../../tiling/TileKey".split(" "),function(w,a,u,f,r,q,h){function t(a,e){var f=a.bounds,h=e.bounds;
return a.key.id!==e.key.id&&a.key.world===e.key.world&&f[0]<=h[0]&&f[1]<=h[1]&&f[2]>=h[2]&&f[3]>=h[3]}Object.defineProperty(a,"__esModule",{value:!0});a.isParentOf=t;a.isChildOf=function(a,e){return t(e,a)};w=function(){function a(a,f){this.bounds=r.create();this.key=new h(0,0,0,0);this.objectIds=new Set;this.key.set(f);f=a.getLODInfoAt(this.key);this.tileInfoView=a;this.tileInfoView.getTileBounds(this.bounds,this.key,!0);this.resolution=f.resolution;this.scale=f.scale;this.level=f.level;this.needsClear=
!0}Object.defineProperty(a.prototype,"id",{get:function(){return this.key.id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"extent",{get:function(){return f.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"transform",{get:function(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}},enumerable:!0,configurable:!0});a.prototype.clone=
function(){return new a(this.tileInfoView,this.id)};a.prototype.createChildTiles=function(){for(var e=this.key.getChildKeys(),f=u.acquire(),h=0;h<e.length;h++)f[h]=new a(this.tileInfoView,e[h]);return f};a.prototype.getQuantizationParameters=function(){return q.default.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})};return a}();
a.Tile=w;a.default=w})},"esri/views/2d/layers/graphics/GraphicContainer":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/extendsHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../engine/FeatureContainer".split(" "),function(w,a,u,f,r,q,h){Object.defineProperty(a,"__esModule",{value:!0});w=function(a){function h(){return null!==a&&a.apply(this,arguments)||this}f(h,a);Object.defineProperty(h.prototype,
"hasLabels",{get:function(){return!1},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"labelsVisible",{get:function(){return!1},enumerable:!0,configurable:!0});h.prototype._renderGraphics=function(a,f){for(var e=0,h=this.children;e<h.length;e++){var b=h[e];b.isReady&&b.hasData&&(b.commitChanges(),a.context.setStencilFunction(514,b.stencilRef,255),b._displayList.replay(a,b,f))}};h.prototype.renderChildren=function(e){var f=e.painter;this.children.some(function(a){return a.hasData})&&
(a.prototype.renderChildren.call(this,e),this._renderGraphics(e),f=f.effects.highlight,f.bind(e),this._renderGraphics(e,f.defines),f.draw(e),f.unbind())};return h}(h.FeatureContainer);a.default=w})},"esri/views/2d/engine/FeatureContainer":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/assignHelper ../../../core/promiseUtils ../../../core/promiseUtils ../../../geometry/support/aaBoundingRect ../engine".split(" "),
function(w,a,u,f,r,q,h,t,m,e){Object.defineProperty(a,"__esModule",{value:!0});w=function(a){function p(f,b){f=a.call(this,f,b)||this;f._rendererInfo=new e.WGLRendererInfo;f.attributeView=new e.AttributeStoreView;return f}r(p,a);p.prototype.destroy=function(){this.removeAllChildren();this.children.forEach(function(a){return a.destroy()});this.attributeView.destroy()};p.prototype.whenAttached=function(){var a=this;return this.attached?h.resolve():h.create(function(b){return a.once("attached",function(){return b()})})};
p.prototype.setRendererInfo=function(a,b,e){this._rendererInfo.setInfo(a,b,e);this.requestRender()};p.prototype.getMaterialItems=function(a,b){return f(this,void 0,void 0,function(){var e,f,c,d;return u(this,function(g){switch(g.label){case 0:return a&&0!==a.length?[4,this.whenAttached()]:[2,null];case 1:return g.sent(),e=this.stage.painter.textureManager,f=a.map(function(a){return e.rasterizeItem(a.symbol,a.glyphIds,b)}),[4,t.all(f)];case 2:return c=g.sent(),d=c.map(function(b,c){return{id:a[c].id,
mosaicItem:b}}),[2,d]}})})};p.prototype.onTileData=function(a,b){if(!(b.addOrUpdate&&"tileDisplayData"in b.addOrUpdate)){var g=b.addOrUpdate&&e.TileData.decode(b.addOrUpdate);b=q({},b,{addOrUpdate:g})}a.setData(b,this.hasLabels,this.labelsVisible);this.contains(a)||this.addChild(a);this.requestRender()};p.prototype.onTileError=function(a){a.clear();this.contains(a)||this.addChild(a)};p.prototype.renderChildren=function(e){this._rendererInfo.update(e.state);this.attributeView.bindTextures(this.stage.context);
a.prototype.renderChildren.call(this,e)};p.prototype.createTile=function(a){var b=this._tileInfoView.getTileBounds(m.create(),a);return new e.WGLTile(a,b)};p.prototype.destroyTile=function(a){this.removeChild(a);a.destroy()};p.prototype.attach=function(){this._initializeExtensions();return a.prototype.attach.call(this)};p.prototype.createRenderParams=function(e){return q({},a.prototype.createRenderParams.call(this,e),{rendererInfo:this._rendererInfo,attributeView:this.attributeView})};p.prototype._initializeExtensions=
function(){var a=this.stage.context.capabilities;a.textureFloat;a.vao};return p}(e.TileContainer);a.FeatureContainer=w})},"esri/views/2d/layers/graphics/GraphicProcessingQueue":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/promiseUtils ../../../../core/scheduling ../../../../core/accessorSupport/decorators".split(" "),function(w,a,u,f,r,q,h,t){Object.defineProperty(a,"__esModule",
{value:!0});w=function(a){function e(e){e=a.call(this,e)||this;e._queue=new Map;e._queueArray=[];e._onGoingGraphic=null;e._onGoingPromise=null;e._scheduledNextHandle=null;e._next=e._next.bind(e);e._finalize=e._finalize.bind(e);return e}u(e,a);Object.defineProperty(e.prototype,"length",{get:function(){return this._queueArray.length},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"updating",{get:function(){return 0<this._queueArray.length||null!==this._onGoingPromise},enumerable:!0,
configurable:!0});e.prototype.cancel=function(a){this._onGoingGraphic&&this._onGoingGraphic.graphic===a&&(this._ongoingAbortController.abort(),this._onGoingGraphic=this._onGoingPromise=null);if(this._queue.has(a)){var e=this._queue.get(a);this._queue.delete(a);a=this._queueArray.indexOf(e);this._queueArray.slice(a,1)}this._scheduleNext();this.notifyChange("updating")};e.prototype.clear=function(){this._queue.clear();this._queueArray.length=0;this._onGoingPromise&&(this._ongoingAbortController.abort(),
this._onGoingGraphic=this._onGoingPromise=null);this._cancelNext();this.notifyChange("updating")};e.prototype.has=function(a){return this._queue.has(a)};e.prototype.isOngoing=function(a){return this._onGoingGraphic&&this._onGoingGraphic.graphic===a};e.prototype.push=function(a,e){this._queue.has(a)||(e={graphic:a,addOrUpdate:e},this._queueArray.push(e),this._queue.set(a,e),this._scheduleNext(),this.notifyChange("updating"))};e.prototype.refresh=function(){this.reset()};e.prototype.reset=function(){var a=
this._onGoingGraphic;a&&this.push(a.graphic,a.addOrUpdate)};e.prototype._finalize=function(){this._onGoingPromise=this._ongoingAbortController=this._onGoingGraphic=null;this.notifyChange("updating");this._scheduleNext()};e.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),this._scheduledNextHandle=null)};e.prototype._scheduleNext=function(){this._scheduledNextHandle||0===this._queue.size||null!=this._onGoingGraphic||(this._scheduledNextHandle=h.schedule(this._next))};
e.prototype._next=function(){if(null==this._scheduledNextHandle||0===this._queue.size||this._onGoingGraphic)this._scheduledNextHandle=null;else{this._scheduledNextHandle=null;var a=this._peek(),e=a.graphic,f=a.addOrUpdate,b=q.createAbortController();this._queue.delete(e);this._onGoingGraphic=a;this._onGoingPromise=this.process(e,f,{signal:b.signal});this._ongoingAbortController=b;this._onGoingPromise.then(this._finalize,this._finalize);this.notifyChange("updating")}};e.prototype._peek=function(){return 0===
this._queueArray.length?null:this._queueArray.pop()};f([t.property({readOnly:!0})],e.prototype,"length",null);f([t.property({readOnly:!0})],e.prototype,"updating",null);f([t.property({constructOnly:!0})],e.prototype,"process",void 0);return e=f([t.subclass("esri.views.2d.layers.graphics.GraphicProcessingQueue")],e)}(t.declared(r));a.default=w})},"esri/views/2d/layers/graphics/GraphicStore":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../core/has ../../../../core/screenUtils ../../../../core/libs/rbush/rbush ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/contains ../../../../geometry/support/extentUtils ../../../../geometry/support/jsonUtils ../../../../geometry/support/normalizeUtils ./GraphicStoreItem ./graphicsUtils".split(" "),
function(w,a,u,f,r,q,h,t,m,e,v,p,z){function b(a,b,c,e,f){g.minX=b;g.minY=c;g.maxX=e;g.maxY=f;return a.search(g)}Object.defineProperty(a,"__esModule",{value:!0});var g={minX:0,minY:0,maxX:0,maxY:0},n=h.create(),c=[];w=function(){function a(a,b,c,d,e,g){this._graphics=d;this._onAdd=e;this._onRemove=g;this._index=q(9,f("csp-restrictions")?function(a){return{minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]}}:[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);this._itemByGraphic=new Map;this._currentLevel=
-Infinity;this._tileInfoView=a;this._uidFieldName=c;if(a=a.getClosestInfoForScale(b))this._currentLevel=a.level,this._resolution=this._tileInfoView.getTileResolution(a.level)}a.prototype.hitTest=function(a,c,d,g,f){a=v.normalizeMapX(a,this._tileInfoView.spatialReference);var k=.5*g*d;n[0]=a-k;n[1]=c-k;n[2]=a+k;n[3]=c+k;d=.5*g*(d+50);d=b(this._index,a-d,c-d,a+d,c+d);if(!d||0===d.length)return[];for(var k={x:a,y:c},l=[],p,q=0;q<d.length;q++){var x=d[q];if(x.graphic.visible)switch(e.getJsonType(x.geometry)){case "esriGeometryPoint":p=
x.symbol;if(!p)continue;var y=x.geometry,u=void 0;switch(p.type){case "text":u=z.getTextSymbolBounds(y.x,y.y,p,x.size,this._resolution,f);break;case "cim":u=z.getCIMMarkerBounds(y.x,y.y,p,this._resolution,f);break;default:u=z.getMarkerSymbolBounds(y.x,y.y,p,this._resolution,f)}t.polygonContainsPoint(u,k)&&l.push(x);break;case "esriGeometryPolyline":p=x.symbol;if(!p)continue;p=1.5*g*window.devicePixelRatio*r.pt2px(p.width);z.isPointOnPolyline(x.geometry,a,c,p)&&l.push(x);break;case "esriGeometryEnvelope":p=
x.geometry;p=h.fromValues(p.xmin,p.ymin,p.xmax,p.ymax);h.intersects(p,n)&&l.push(x);break;case "esriGeometryPolygon":if(t.polygonContainsPoint(x.geometry,k)){l.push(x);break}p=m.getPolygonExtent(x.geometry);if(Math.abs(p.ymax-p.ymin)<5*g||Math.abs(p.xmax-p.xmin)<5*g)p=h.fromValues(p.xmin,p.ymin,p.xmax,p.ymax),h.intersects(p,n)&&l.push(x);break;case "esriGeometryMultipoint":if(p=x.symbol)for(var y=x.geometry.points,u=void 0,w=0;w<y.length;w++)if(u="text"===p.type?z.getTextSymbolBounds(y[w][0],y[w][1],
p,x.size,this._resolution,f):z.getMarkerSymbolBounds(y[w][0],y[w][1],p,this._resolution,f),t.polygonContainsPoint(u,k)){l.push(x);break}}}l.sort(function(a,b){var c=z.graphicGeometryToNumber(a.graphic),d=z.graphicGeometryToNumber(b.graphic);return c===d?b.zorder-a.zorder:c-d});return l.map(function(a){return a.graphic})};a.prototype.getGraphicsData=function(a,c){var d=b(this._index,a.bounds[0],a.bounds[1],a.bounds[2],a.bounds[3]);if(0===d.length||0===c.length)return[];d.sort(function(a,b){return a.zorder-
b.zorder});d[0].insertAfter=-1;for(var e=1;e<d.length;e++)d[e].insertAfter=d[e-1].graphic.uid;d.sort(function(a,b){return a.graphic.uid-b.graphic.uid});c.sort(function(a,b){return a.uid-b.uid});var g=e=0,f,k=[];a={originPosition:"upperLeft",scale:[a.resolution,a.resolution],translate:[a.bounds[0],a.bounds[3]]};for(var l=0;l<c.length;l++){for(var h=c[l],g=-2;e<d.length;)if(f=d[e],e++,h.uid===f.graphic.uid){g=f.insertAfter;break}if(f.geometry&&-2!==g){var n=f.getGeometryQuantized(a),m=u({},f.graphic.attributes);
m[this._uidFieldName]=h.uid;k.push({centroid:p.default.getCentroidQuantized(f,a),geometry:n,attributes:m,symbol:f.symbol,insertAfter:g})}}return k};a.prototype.getGraphicData=function(a,c){var d=this._itemByGraphic.get(c);if(!d)return null;var e=b(this._index,a.bounds[0],a.bounds[1],a.bounds[2],a.bounds[3]);e.sort(function(a,b){return a.zorder-b.zorder});var g=e.indexOf(d),e=0===g||-1===g?-1:e[g-1].graphic.uid;a={originPosition:"upperLeft",scale:[a.resolution,a.resolution],translate:[a.bounds[0],
a.bounds[3]]};var g=d.getGeometryQuantized(a),f=u({},d.graphic.attributes);f[this._uidFieldName]=c.uid;return{centroid:p.default.getCentroidQuantized(d,a),geometry:g,attributes:f,symbol:d.symbol,insertAfter:e}};a.prototype.queryTileData=function(a){var c=h.pad(a.bounds,50*a.resolution,h.create()),c=b(this._index,c[0],c[1],c[2],c[3]),d=[];this._createTileGraphics(d,c,{originPosition:"upperLeft",scale:[a.resolution,a.resolution],translate:[a.bounds[0],a.bounds[3]]});return d};a.prototype.has=function(a){return this._itemByGraphic.has(a)};
a.prototype.getBounds=function(a){return this._itemByGraphic.has(a)?this._itemByGraphic.get(a).bounds:null};a.prototype.add=function(a,b,c){if(a)return this._onAdd(a),b=p.default.acquire(a,b,c,this._resolution,this._tileInfoView.spatialReference),this._itemByGraphic.set(a,b),c&&this._index.insert(b),b.bounds};a.prototype.remove=function(a){if(this._itemByGraphic.has(a)){this._onRemove(a);var b=this._itemByGraphic.get(a);this._index.remove(b);this._itemByGraphic.delete(a)}};a.prototype.updateZ=function(){for(var a=
this._graphics.items,b,c=0;c<a.length;c++)if(b=a[c],b=this._itemByGraphic.get(b))b.zorder=c};a.prototype.update=function(a,b,c){var d=this._itemByGraphic.get(a),e=h.clone(d.bounds);d.size[0]=d.size[1]=0;this._index.remove(d);d.set(a,b,c,this._resolution,this._tileInfoView.spatialReference);c&&this._index.insert(d);return{oldBounds:e,newBounds:d.bounds}};a.prototype.updateLevel=function(a){var b=this;this._currentLevel!==a&&(this._currentLevel=a,this._resolution=this._tileInfoView.getTileResolution(a),
this._index.clear(),c.length=0,this._itemByGraphic.forEach(function(a){a.updateBounds(a.symbol,b._resolution,b._tileInfoView.spatialReference);a.geometry&&c.push(a)}),this._index.load(c))};a.prototype.clear=function(){this._itemByGraphic.clear();this._index.clear()};a.prototype._createTileGraphics=function(a,b,c){var d=this._uidFieldName;b.sort(function(a,b){return a.zorder-b.zorder});for(var e,g,f,k,h=0;h<b.length;h++){f=b[h];e=f.graphic;g=f.getGeometryQuantized(c);k=0===h?-1:b[h-1].graphic.uid;
var n=u({},f.graphic.attributes);n[d]=e.uid;a.push({centroid:p.default.getCentroidQuantized(f,c),geometry:g,attributes:n,symbol:f.symbol,insertAfter:k})}};return a}();a.default=w})},"esri/views/2d/layers/graphics/GraphicStoreItem":function(){define("require exports ../../../../core/maybe ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/centroid ../../../../geometry/support/jsonUtils ../../../../geometry/support/quantizationUtils ../../../../layers/graphics/featureConversionUtils ../../../../layers/graphics/OptimizedGeometry ./graphicsUtils".split(" "),
function(w,a,u,f,r,q,h,t,m,e){Object.defineProperty(a,"__esModule",{value:!0});var v=new m.default,p=new m.default;w=function(){function a(){this.bounds=f.create();this.graphic=null;this.size=[0,0,0,0]}a.acquire=function(b,e,f,c,d){void 0===b&&(b=null);var g;0===a._pool.length?g=new a:(g=a._pool.pop(),this._set.delete(g));g.acquire(b,e,f,c,d);return g};a.release=function(a){a&&!this._set.has(a)&&(a.release(),this._pool.push(a),this._set.add(a))};a.getCentroidQuantized=function(a,g){if(q.isPolygon(a.geometry)){var b=
a.symbol;if(u.isNone(b))return null;if(e.isMarkerSymbol(b.type))return a=r.polygonCentroid(a.geometry),h.quantizePoint(g,{},{x:a[0],y:a[1]},!1,!1)}return null};a.prototype.acquire=function(a,e,f,c,d){void 0===a&&(a=null);a&&this.set(a,e,f,c,d)};a.prototype.release=function(){this.geometry=this.symbol=this.graphic=null};a.prototype.set=function(a,g,f,c,d){this.graphic=a;this.geometry=f;this.symbol=g.symbol;e.getBounds(this.bounds,this.size,g.symbol,f,g.mosaicItem,c,d)};a.prototype.updateBounds=function(a,
g,f){e.getBounds(this.bounds,this.size,a,this.geometry,null,g,f)};a.prototype.getGeometryQuantized=function(a){if(q.isPolygon(this.geometry)){var b=this.geometry.rings;if(1===b.length&&2===b[0].length)return h.quantizeGeometry(a,{paths:[[b[0][0],b[0][1]]]})}else if(q.isPolyline(this.geometry))return v.coords.length=0,v.lengths.length=0,p.coords.length=0,p.lengths.length=0,t.convertFromPolyline(v,this.geometry),t.generalizeOptimizedGeometry(p,v,this.geometry.hasZ,this.geometry.hasM,"esriGeometryPolyline",
a.scale[0]),t.quantizeOptimizedGeometry(v,p,this.geometry.hasZ,this.geometry.hasM,"esriGeometryPolyline",a),t.convertToPolyline(v,this.geometry.hasZ,this.geometry.hasM);return h.quantizeGeometry(a,this.geometry)};a._pool=[];a._set=new Set;return a}();a.default=w})},"esri/views/2d/layers/graphics/graphicsUtils":function(){define("require exports ../../../../core/maybe ../../../../core/screenUtils ../../../../core/libs/gl-matrix-2/mat2d ../../../../core/libs/gl-matrix-2/mat2df32 ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f32 ../../../../geometry/SpatialReference ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/boundsUtils ../../../../geometry/support/intersects ../../../../geometry/support/jsonUtils ../../../../geometry/support/normalizeUtils ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/support/spatialReferenceUtils ../../engine".split(" "),
function(w,a,u,f,r,q,h,t,m,e,v,p,z,b,g,n,c){function d(a,b,c,d,e){var g,k,l=f.pt2px(c.xoffset),n=f.pt2px(c.yoffset),m=D*c.angle;e*=D;switch(c.type){case "simple-marker":g=k=f.pt2px(c.size);break;case "picture-marker":g=f.pt2px(c.width),k=f.pt2px(c.height)}c=r.mat2d.identity(L);r.mat2d.translate(c,c,h.vec2.set(B,a,b));r.mat2d.rotate(c,c,e-m);r.mat2d.scale(c,c,h.vec2.set(B,d,-d));r.mat2d.translate(c,c,h.vec2.set(B,l,-n));a=[0,0];h.vec2.transformMat2d(a,h.vec2.set(B,-.5*g,-.5*k),c);b=[0,0];h.vec2.transformMat2d(b,
h.vec2.set(B,-.5*g,.5*k),c);d=[0,0];h.vec2.transformMat2d(d,h.vec2.set(B,.5*g,-.5*k),c);l=[0,0];h.vec2.transformMat2d(l,h.vec2.set(B,.5*g,.5*k),c);return{rings:[[a,d,l,b,a]]}}function l(a,b,d,e,g){var k=c.CIMSymbolHelper.getEnvelope(d.data);if(!k)return null;d=f.pt2px(k.width);var l=f.pt2px(k.height),n=f.pt2px(k.x),k=f.pt2px(k.y),m=0*D,p=D*g;g=r.mat2d.identity(L);r.mat2d.translate(g,g,h.vec2.set(B,a,b));r.mat2d.rotate(g,g,p-m);r.mat2d.scale(g,g,h.vec2.set(B,e,e));a=[0,0];h.vec2.transformMat2d(a,h.vec2.set(B,
n,k+l),g);b=[0,0];h.vec2.transformMat2d(b,h.vec2.set(B,n,k),g);e=[0,0];h.vec2.transformMat2d(e,h.vec2.set(B,n+d,k+l),g);l=[0,0];h.vec2.transformMat2d(l,h.vec2.set(B,n+d,k),g);return{rings:[[a,e,l,b,a]]}}function k(a,b,d,e,g,k){var l=c.alignmentUtils.getYAnchorDirection(d.verticalAlignment||"baseline"),n="baseline"===(d.verticalAlignment||"baseline"),m=f.pt2px(d.xoffset),p=f.pt2px(d.yoffset),q=f.pt2px(d.font.size)/24,v=4*q,l=n?25*q:e[1]+(1+l)*e[3]*.5;d=D*d.angle;n=D*k;k=r.mat2d.identity(L);r.mat2d.translate(k,
k,h.vec2.set(B,a,b));r.mat2d.rotate(k,k,n-d);r.mat2d.scale(k,k,h.vec2.set(B,g,-g));r.mat2d.translate(k,k,h.vec2.set(B,m,-p));r.mat2d.translate(k,k,h.vec2.set(B,-v,-v-l));a=[0,0];h.vec2.transformMat2d(a,h.vec2.set(B,e[0],e[1]),k);b=[0,0];h.vec2.transformMat2d(b,h.vec2.set(B,e[0],e[1]+e[3]),k);g=[0,0];h.vec2.transformMat2d(g,h.vec2.set(B,e[0]+e[2],e[1]),k);m=[0,0];h.vec2.transformMat2d(m,h.vec2.set(B,e[0]+e[2],e[1]+e[3]),k);return{rings:[[a,g,m,b,a]]}}function x(a,b,d){if(!d||0===d.glyphMosaicItems.length)return a;
var e=c.bidiText(b.text),g=e[0],e=e[1],k=c.alignmentUtils.getJustification(b.horizontalAlignment||"center"),h=c.alignmentUtils.getXAnchorDirection(b.horizontalAlignment||"center");d=(new c.TextShapingNew([d.glyphMosaicItems],c.definitions.TEXT_MAX_WIDTH,c.definitions.TEXT_LINE_HEIGHT,c.definitions.TEXT_SPACING,[0,.5*-K],.5*(1-h),0,k)).getShaping(g,e);g=c.fontUtils.getFontDecorationTop(b.font.decoration);isNaN(g)||c.TextShapingNew.addDecoration(d,g);d=c.TextShapingNew.getBox(d);b=f.pt2px(b.font.size)/
W;a[0]=b*d.x;a[1]=b*d.y;a[2]=b*d.width;a[3]=b*d.height;return a}function y(a,b){return Math.ceil((a-b)/(2*b))}function J(a,b){var c;c=z.isPolygon(a)?a.rings:a.paths;for(var d=0;d<c.length;d++)for(var e=0,g=c[d];e<g.length;e++)g[e][0]+=b;return a}function F(a,b){if(!b)return a;var c=H(a,b).map(function(a){return a.extent});return 2>c.length?c[0]||a:2<c.length?(a.xmin=b.valid[0],a.xmax=b.valid[1],a):{rings:c.map(function(a){return[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,
a.ymin]]})}}function H(a,b){var c=[],d=a.ymin,e=a.ymax,g=a.xmax-a.xmin,f=a.xmin,k=a.xmax,h,l=b.valid,n=l[0],m=l[1];h=C(a.xmin,b);var p=h.x,l=h.frameId;h=C(a.xmax,b);b=h.x;a=h.frameId;h=p===b&&0<g;if(g>2*m){g={xmin:f<k?p:b,ymin:d,xmax:m,ymax:e};f={xmin:n,ymin:d,xmax:f<k?b:p,ymax:e};k={xmin:0,ymin:d,xmax:m,ymax:e};d={xmin:n,ymin:d,xmax:0,ymax:e};e=[];n=[];E(g,k)&&e.push(l);E(g,d)&&n.push(l);E(f,k)&&e.push(a);E(f,d)&&n.push(a);for(m=l+1;m<a;m++)e.push(m),n.push(m);c.push({extent:g,frameIds:[l]},{extent:f,
frameIds:[a]},{extent:k,frameIds:e},{extent:d,frameIds:n})}else p>b||h?c.push({extent:{xmin:p,ymin:d,xmax:m,ymax:e},frameIds:[l]},{extent:{xmin:n,ymin:d,xmax:b,ymax:e},frameIds:[a]}):c.push({extent:{xmin:p,ymin:d,xmax:b,ymax:e},frameIds:[l]});return c}function C(a,b){var c=b.valid;b=c[0];var d=c[1],c=2*d,e=0;a>d?(b=Math.ceil(Math.abs(a-d)/c),a-=b*c,e=b):a<b&&(b=Math.ceil(Math.abs(a-b)/c),a+=b*c,e=-b);return{x:a,frameId:e}}function E(a,b){var c=b.xmin,d=b.ymin,e=b.xmax;b=b.ymax;return G(a,c,d)&&G(a,
c,b)&&G(a,e,b)&&G(a,e,d)}function G(a,b,c){return b>=a.xmin&&b<=a.xmax&&c>=a.ymin&&c<=a.ymax?!0:!1}function I(a,b,c){if(Array.isArray(a)){var d=a[0];if(d>b){var e=y(d,b);a[0]=d+-2*e*b}else d<c&&(e=y(d,c),a[0]=d+-2*e*c)}else d=a.x,d>b?(e=y(d,b),a.x+=-2*e*b):d<c&&(e=y(d,c),a.x+=-2*e*c);return a}Object.defineProperty(a,"__esModule",{value:!0});var D=Math.PI/180,A=c.definitions.TEXT_MAX_WIDTH,K=c.definitions.TEXT_LINE_HEIGHT,P=c.definitions.TEXT_SPACING,L=q.mat2df32.create(),B=t.vec2f32.create(),M=e.create();
a.getBounds=function(a,e,g,f,h,m,p){if(!f||!g)return a[0]=a[1]=a[2]=a[3]=0,e[0]=e[1]=e[2]=e[3]=0,a;if(z.isPoint(f)){var q=f.x;f=f.y;"text"===g.type&&0===e[2]&&0===e[3]&&x(e,g,h);var r;switch(g.type){case "simple-marker":case "picture-marker":r=d(q,f,g,m,0);break;case "text":r=k(q,f,g,e,m,0);break;case "cim":r=l(q,f,g,m,0)}for(m=e=0;m<r.rings[0].length-1;m++)g=r.rings[0][m],g=(q-g[0])*(q-g[0])+(f-g[1])*(f-g[1]),e=Math.max(e,g);e=Math.sqrt(e);m=b.normalizeMapX(q-e,p);q=b.normalizeMapX(q+e,p);m>q&&(p=
n.getInfo(p))&&(m=p.valid,p=m[1],m=m[0],q=p);a[0]=m;a[1]=f-e;a[2]=q;a[3]=f+e}else{v.getBoundsXY(a,f);f=e[0];if(0===f){a:switch(f=0,g.type){case "simple-fill":case "picture-fill":f=g.outline;if(!f){f=0;break a}f=f.width;break;case "simple-line":f=g.width;break;case "simple-marker":f=g.size;break;case "picture-marker":f=Math.max(g.width,g.height);break;case "text":f=[0,0,0,0];x(f,g,h);f=Math.max(f[0],f[1]);break;case "cim":f=c.CIMSymbolHelper.getEnvelope(g.data),f=Math.sqrt(f.width*f.width+f.height*
f.height)}e[0]=f}f=m*f/2;a[0]-=f;a[1]-=f;a[2]+=f;a[3]+=f}return a};a.isMarkerSymbol=function(a){return"simple-marker"===a||"picture-marker"===a||"text"===a};a.graphicGeometryToNumber=function(a){switch(u.expect(a.geometry).type){case "polyline":return 1;case "polygon":case "extent":return 2}return 0};var Q=t.vec2f32.create(),T=t.vec2f32.create(),U=t.vec2f32.create(),N=t.vec2f32.create(),R=t.vec2f32.create(),V=t.vec2f32.create(),S=t.vec2f32.create();a.isPointOnPolyline=function(a,b,c,d){h.vec2.set(U,
b,c);a=a.paths;for(var e,g,f,k,l,n,m,p,q=Infinity,r=0;r<a.length;r++){var v=a[r];if(!(2>v.length))for(var t=1;t<v.length;t++)e=v[t-1][0],f=v[t-1][1],g=v[t][0],k=v[t][1],l=Math.min(e,g)-d,n=Math.min(f,k)-d,m=Math.max(e,g)+d,p=Math.max(f,k)+d,b<l||b>m||c<n||c>p||(h.vec2.set(Q,e,f),h.vec2.set(T,g,k),h.vec2.subtract(N,T,Q),h.vec2.subtract(R,Q,U),h.vec2.scale(V,N,h.vec2.dot(N,R)/h.vec2.dot(N,N)),h.vec2.subtract(S,R,V),e=h.vec2.dot(S,S),q>e&&(q=e))}return Math.sqrt(q)<=d};a.getMarkerSymbolBounds=d;a.getCIMMarkerBounds=
l;a.getTextSymbolBounds=k;a.normalizeCentralMeridian=function(a){var b,c,d,e,f,k=null;if(!a)return null;b=a.spatialReference;c=g.getInfo(b);f=b.isWebMercator?102100:4326;d=O[f].maxX;e=O[f].minX;b=O[f].plus180Line;f=O[f].minus180Line;var h,l=a.toJSON();if(!c)return l;"mesh"===a.type?h=l:z.isPoint(l)?h=I(l,d,e):z.isMultipoint(l)?(l.points=l.points.map(function(a){return I(a,d,e)}),h=l):z.isExtent(l)?h=F(l,c):z.isPolygon(l)||z.isPolyline(l)?(v.getBoundsXY(M,l),a={xmin:M[0],ymin:M[1],xmax:M[2],ymax:M[3]},
c=2*y(a.xmin,e)*d,l=0===c?l:J(l,c),a.xmin+=c,a.xmax+=c,p.extentIntersectsPolyline(a,b)&&a.xmax!==d?k=l:p.extentIntersectsPolyline(a,f)&&a.xmin!==e?k=l:h=l):h=a.clone();return null!==k?(new X).cut(k,d):h};var W=24;a.getTextSymbolSize=x;a.getTextSymbolEstimatedSize=function(a,b,d){var e=c.bidiText(b.text),g=e[0],e=e[1],k=c.alignmentUtils.getJustification(b.horizontalAlignment||"center"),h=c.alignmentUtils.getXAnchorDirection(b.horizontalAlignment||"center");d=(new c.TextShapingNew([],A,K,P,[0,.5*-K],
.5*(1-h),0,k)).getEstimatedShaping(g,e,d);d=c.TextShapingNew.getBox(d);b=f.pt2px(b.font.size)/W;a[0]=b*d.x;a[1]=b*d.y;a[2]=b*d.width;a[3]=b*d.height;return a};var O={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:{paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:m.WebMercator},minus180Line:{paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:m.WebMercator}},
4326:{maxX:180,minX:-180,plus180Line:{paths:[[[180,-180],[180,180]]],spatialReference:m.WGS84},minus180Line:{paths:[[[-180,-180],[-180,180]]],spatialReference:m.WGS84}}},X=function(){function a(){}a.prototype.cut=function(a,b){var c;if(a.rings)this.closed=!0,c=a.rings,this.minPts=4;else if(a.paths)this.closed=!1,c=a.paths,this.minPts=2;else return null;var d=c.length;b*=-2;for(var e=0;e<d;e++){var g=c[e];if(g&&g.length>=this.minPts){for(var f=[],k=0;k<g.length;k++){var h=g[k];f.push([h[0]+b,h[1]])}c.push(f)}}this.closed?
a.rings=c:a.paths=c;return a};return a}()})},"esri/views/layers/GraphicsView":function(){define(["require","exports","../../core/tsSupport/declareExtendsHelper","../../core/tsSupport/decorateHelper","../../core/accessorSupport/decorators"],function(w,a,u,f,r){Object.defineProperty(a,"__esModule",{value:!0});a.GraphicsView=function(a){return function(a){function h(){var f=null!==a&&a.apply(this,arguments)||this;f.graphics=null;f.renderer=null;f.view=null;return f}u(h,a);f([r.property()],h.prototype,
"graphics",void 0);f([r.property()],h.prototype,"renderer",void 0);f([r.property()],h.prototype,"updating",void 0);f([r.property()],h.prototype,"view",void 0);return h=f([r.subclass("esri.views.layers.GraphicsView")],h)}(r.declared(a))}})},"esri/views/2d/navigation/MapViewNavigation":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../Viewpoint ../../../core/Accessor ../../../core/now ../../../core/accessorSupport/decorators ../../../geometry/Point ../viewpointUtils ./ZoomBox ./actions/Pan ./actions/Pinch ./actions/Rotate".split(" "),
function(w,a,u,f,r,q,h,t,m,e,v,p,z,b,g,n){Object.defineProperty(a,"__esModule",{value:!0});var c=new h({targetGeometry:new v}),d=[0,0];w=function(a){function k(b){b=a.call(this,b)||this;b._endTimer=null;b.animationManager=null;return b}u(k,a);k.prototype.initialize=function(){this.pan=new b({navigation:this});this.rotate=new n({navigation:this});this.pinch=new g({navigation:this});this.zoomBox=new z({view:this.view,navigation:this})};k.prototype.destroy=function(){this.zoomBox.destroy();this.animationManager=
this.zoomBox=null};k.prototype.begin=function(){this._set("interacting",!0)};k.prototype.end=function(){this._lastEventTimestamp=m();this._startTimer(250)};k.prototype.zoom=function(a,b){void 0===b&&(b=this._getDefaultAnchor());return q(this,void 0,void 0,function(){return r(this,function(c){this.stop();this.begin();if(this.view.constraints.snapToZoom&&this.view.constraints.effectiveLODs)return 1>a?[2,this.zoomIn(b)]:[2,this.zoomOut(b)];this.setViewpoint(b,a,0,[0,0]);return[2]})})};k.prototype.zoomIn=
function(a){return q(this,void 0,void 0,function(){var b,c;return r(this,function(d){b=this.view;c=b.constraints.snapToNextScale(b.scale);return[2,this._zoomToScale(c,a)]})})};k.prototype.zoomOut=function(a){return q(this,void 0,void 0,function(){var b,c;return r(this,function(d){b=this.view;c=b.constraints.snapToPreviousScale(b.scale);return[2,this._zoomToScale(c,a)]})})};k.prototype.setViewpoint=function(a,b,c,d){this.begin();this.view.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,
a,b,c,d);this.end()};k.prototype.setViewpointImmediate=function(a,b,c,d){void 0===b&&(b=0);void 0===c&&(c=[0,0]);void 0===d&&(d=this._getDefaultAnchor());this.view.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,d,a,b,c)};k.prototype.continousRotateClockwise=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){p.rotateBy(a,a,-1)})};k.prototype.continousRotateCounterclockwise=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,
function(a){p.rotateBy(a,a,1)})};k.prototype.resetRotation=function(){this.view.rotation=0};k.prototype.continousPanLeft=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){p.translateBy(a,a,[-10,0])})};k.prototype.continousPanRight=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){p.translateBy(a,a,[10,0])})};k.prototype.continousPanUp=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,
function(a){p.translateBy(a,a,[0,10])})};k.prototype.continousPanDown=function(){var a=this.get("view.viewpoint");this.animationManager.animateContinous(a,function(a){p.translateBy(a,a,[0,-10])})};k.prototype.stop=function(){this.pan.stopMomentumNavigation();this.animationManager.stop();this.end();null!==this._endTimer&&(clearTimeout(this._endTimer),this._endTimer=null,this._set("interacting",!1))};k.prototype._startTimer=function(a){var b=this;return null!==this._endTimer?this._endTimer:this._endTimer=
setTimeout(function(){b._endTimer=null;var a=m()-b._lastEventTimestamp;250>a?b._endTimer=b._startTimer(a):b._set("interacting",!1)},a)};k.prototype._getDefaultAnchor=function(){var a=this.view,b=a.size,a=a.padding,c=a.top,e=a.bottom;d[0]=.5*(b[0]-a.right+a.left);d[1]=.5*(b[1]-e+c);return d};k.prototype._zoomToScale=function(a,b){void 0===b&&(b=this._getDefaultAnchor());return q(this,void 0,void 0,function(){var d,e,g,f,k,h,l,n;return r(this,function(m){d=this.view;e=d.constraints;g=d.scale;f=d.viewpoint;
k=d.size;h=d.padding;l=e.canZoomInTo(a);n=e.canZoomOutTo(a);return a<g&&!l||a>g&&!n?[2]:[2,d.goTo(p.padAndScaleAndRotateBy(c,f,a/g,0,b,k,h),{animate:!0})]})})};k.prototype._scaleRotateTranslateViewpoint=function(a,b,c,d,e){var g=this.view,f=g.size,k=g.padding,h=g.constraints,l=g.viewpoint,n=g.scale*c,g=h.canZoomInTo(n),h=h.canZoomOutTo(n);if(1>c&&!g||1<c&&!h)c=1;p.translateBy(l,l,e);return p.padAndScaleAndRotateBy(a,l,c,d,b,f,k)};f([e.property()],k.prototype,"animationManager",void 0);f([e.property({type:Boolean,
readOnly:!0})],k.prototype,"interacting",void 0);f([e.property()],k.prototype,"pan",void 0);f([e.property()],k.prototype,"pinch",void 0);f([e.property()],k.prototype,"rotate",void 0);f([e.property()],k.prototype,"view",void 0);f([e.property()],k.prototype,"zoomBox",void 0);return k=f([e.subclass("esri.views.2d.navigation.MapViewNavigation")],k)}(e.declared(t));a.default=w})},"esri/views/2d/navigation/ZoomBox":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/screenUtils ../../../core/accessorSupport/decorators".split(" "),
function(w,a,u,f,r,q,h){return function(a){function m(e){e=a.call(this,e)||this;e._container=null;e._overlay=null;e._backgroundShape=null;e._boxShape=null;e._box={x:0,y:0,width:0,height:0};e._redraw=e._redraw.bind(e);return e}u(m,a);m.prototype.destroy=function(){this.view=null};Object.defineProperty(m.prototype,"view",{set:function(a){var e=this;this._handles&&this._handles.forEach(function(a){a.remove()});this._handles=null;this._destroyOverlay();this._set("view",a);a&&(a.on("drag",["Shift"],function(a){return e._handleDrag(a,
1)}),a.on("drag",["Shift","Ctrl"],function(a){return e._handleDrag(a,-1)}))},enumerable:!0,configurable:!0});m.prototype._start=function(){this._createContainer();this._createOverlay();this.navigation.begin()};m.prototype._update=function(a,f,h,m){this._box.x=a;this._box.y=f;this._box.width=h;this._box.height=m;this._rafId||(this._rafId=requestAnimationFrame(this._redraw))};m.prototype._end=function(a,f,h,m,b){var e=this.view;a=e.toMap(q.createScreenPoint(a+.5*h,f+.5*m));h=Math.max(h/e.width,m/e.height);
-1===b&&(h=1/h);this._destroyOverlay();this.navigation.end();e.goTo({center:a,scale:e.scale*h})};m.prototype._updateBox=function(a,f,h,m){var b=this._boxShape;b.setAttributeNS(null,"x",""+a);b.setAttributeNS(null,"y",""+f);b.setAttributeNS(null,"width",""+h);b.setAttributeNS(null,"height",""+m);b.setAttributeNS(null,"class","esri-zoom-box__outline")};m.prototype._updateBackground=function(a,f,h,m){this._backgroundShape.setAttributeNS(null,"d",this._toSVGPath(a,f,h,m,this.view.width,this.view.height))};
m.prototype._createContainer=function(){var a=document.createElement("div");a.className="esri-zoom-box__container";this.view.root.appendChild(a);this._container=a};m.prototype._createOverlay=function(){var a=this.view.width,f=this.view.height,h=document.createElementNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M 0 0 L "+a+" 0 L "+a+" "+f+" L 0 "+f+" Z");h.setAttributeNS(null,"class","esri-zoom-box__overlay-background");a=document.createElementNS("http://www.w3.org/2000/svg",
"rect");f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");f.setAttributeNS(null,"class","esri-zoom-box__overlay");f.appendChild(h);f.appendChild(a);this._container.appendChild(f);this._backgroundShape=h;this._boxShape=a;this._overlay=f};m.prototype._destroyOverlay=function(){this._container&&this._container.parentNode&&this._container.parentNode.removeChild(this._container);this._container=
this._backgroundShape=this._boxShape=this._overlay=null};m.prototype._toSVGPath=function(a,f,h,m,b,g){h=a+h;m=f+m;return"M 0 0 L "+b+" 0 L "+b+" "+g+" L 0 "+g+" ZM "+a+" "+f+" L "+a+" "+m+" L "+h+" "+m+" L "+h+" "+f+" Z"};m.prototype._handleDrag=function(a,f){var e=a.x,h=a.y,b=a.origin.x,g=a.origin.y,n;e>b?(n=b,b=e-b):(n=e,b-=e);h>g?(e=g,h-=g):(e=h,h=g-h);switch(a.action){case "start":this._start();break;case "update":this._update(n,e,b,h);break;case "end":this._end(n,e,b,h,f)}a.stopPropagation()};
m.prototype._redraw=function(){if(this._rafId&&(this._rafId=null,this._overlay)){var a=this._box,f=a.x,h=a.y,m=a.width,a=a.height;this._updateBox(f,h,m,a);this._updateBackground(f,h,m,a);this._rafId=requestAnimationFrame(this._redraw)}};f([h.property()],m.prototype,"navigation",void 0);f([h.property()],m.prototype,"view",null);return m=f([h.subclass("esri.views.2d.navigation.ZoomBox")],m)}(h.declared(r))})},"esri/views/2d/navigation/actions/Pan":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../geometry ../../../../Viewpoint ../../../../core/Accessor ../../../../core/screenUtils ../../../../core/accessorSupport/decorators ../../../../core/libs/gl-matrix-2/vec3 ../../../../core/libs/gl-matrix-2/vec3f64 ../../viewpointUtils ../../../navigation/PanPlanarMomentumEstimator".split(" "),
function(w,a,u,f,r,q,h,t,m,e,v,p,z){return function(a){function b(b){var c=a.call(this,b)||this;c.animationTime=0;c.momentumEstimator=new z.PanPlanarMomentumEstimator(500,6,.92);c.momentum=null;c.tmpMomentum=v.vec3f64.create();c.momentumFinished=!1;c.viewpoint=new q({targetGeometry:new r.Point,scale:0,rotation:0});c.watch("momentumFinished",function(a){a&&c.navigation.stop()});return c}u(b,a);b.prototype.begin=function(a,b){this.navigation.begin();this.momentumEstimator.reset();this.addToEstimator(b);
this.previousDrag=b};b.prototype.update=function(a,b){this.addToEstimator(b);var c=b.center.x,e=b.center.y,g=this.previousDrag,c=g?g.center.x-c:-c,e=g?e-g.center.y:e;a.viewpoint=p.translateBy(this.viewpoint,a.viewpoint,[c||0,e||0]);this.previousDrag=b};b.prototype.end=function(a,b){this.addToEstimator(b);this.momentum=a.navigation.momentumEnabled?this.momentumEstimator.evaluateMomentum():null;this.animationTime=0;if(this.momentum)this.onAnimationUpdate(a);this.previousDrag=null;this.navigation.end()};
b.prototype.addToEstimator=function(a){var b=a.center.x,d=a.center.y,e=t.createScreenPointArray(-b,d),b=v.vec3f64.fromValues(-b,d,0);this.momentumEstimator.add(e,b,.001*a.timestamp)};b.prototype.onAnimationUpdate=function(a){var b=this;this.navigation.animationManager.animateContinous(a.viewpoint,function(c,g){b.momentumFinished=!b.momentum||b.momentum.isFinished(b.animationTime);g*=.001;if(!b.momentumFinished){var d=b.momentum.valueDelta(b.animationTime,g);e.vec3.scale(b.tmpMomentum,b.momentum.direction,
d);a.viewpoint=p.translateBy(c,c,b.tmpMomentum)}b.animationTime+=g})};b.prototype.stopMomentumNavigation=function(){this.momentum&&(this.momentumEstimator.reset(),this.momentum=null,this.navigation.stop())};f([m.property()],b.prototype,"momentumFinished",void 0);f([m.property()],b.prototype,"viewpoint",void 0);f([m.property()],b.prototype,"navigation",void 0);return b=f([m.subclass("esri.views.2d.navigation.actions.Pan")],b)}(m.declared(h))})},"esri/views/navigation/PanPlanarMomentumEstimator":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/libs/gl-matrix-2/vec3 ../../core/libs/gl-matrix-2/vec3f64 ./FilteredFiniteDifference ./Momentum".split(" "),
function(w,a,u,f,r,q,h){Object.defineProperty(a,"__esModule",{value:!0});var t=function(a){function e(e,f,h,b,g){e=a.call(this,e,f,h)||this;e.sceneVelocity=b;e.direction=g;return e}u(e,a);e.prototype.value=function(e){return a.prototype.valueFromInitialVelocity.call(this,this.sceneVelocity,e)};return e}(h.Momentum);a.PanPlanarMomentum=t;w=function(){function a(a,f,h){void 0===a&&(a=300);void 0===f&&(f=12);void 0===h&&(h=.84);this.minimumInitialVelocity=a;this.stopVelocity=f;this.friction=h;this.enabled=
!0;this.time=new q.FilteredFiniteDifference(.6);this.screen=[new q.FilteredFiniteDifference(.4),new q.FilteredFiniteDifference(.4)];this.scene=[new q.FilteredFiniteDifference(.6),new q.FilteredFiniteDifference(.6),new q.FilteredFiniteDifference(.6)];this.tmpDirection=r.vec3f64.create()}a.prototype.add=function(a,f,h){!this.enabled||this.time.hasLastValue&&.015>this.time.computeDelta(h)||(this.screen[0].update(a[0]),this.screen[1].update(a[1]),this.scene[0].update(f[0]),this.scene[1].update(f[1]),
this.scene[2].update(f[2]),this.time.update(h))};a.prototype.reset=function(){this.screen[0].reset();this.screen[1].reset();this.scene[0].reset();this.scene[1].reset();this.scene[2].reset();this.time.reset()};a.prototype.evaluateMomentum=function(){if(!this.enabled||!this.screen[0].hasFilteredDelta)return null;var a=this.screen[0].filteredDelta,f=this.screen[1].filteredDelta,a=Math.sqrt(a*a+f*f)/this.time.filteredDelta;return Math.abs(a)<this.minimumInitialVelocity?null:this.createMomentum(a,this.stopVelocity,
this.friction)};a.prototype.createMomentum=function(a,h,m){f.vec3.set(this.tmpDirection,this.scene[0].filteredDelta,this.scene[1].filteredDelta,this.scene[2].filteredDelta);var e=f.vec3.length(this.tmpDirection);0<e&&f.vec3.scale(this.tmpDirection,this.tmpDirection,1/e);return new t(a,h,m,e/this.time.filteredDelta,this.tmpDirection)};return a}();a.PanPlanarMomentumEstimator=w})},"esri/views/navigation/FilteredFiniteDifference":function(){define(["require","exports"],function(w,a){Object.defineProperty(a,
"__esModule",{value:!0});w=function(){function a(a){this.gain=a}a.prototype.update=function(a){if(this.hasLastValue){var f=this.computeDelta(a);this.updateDelta(f)}this.lastValue=a};a.prototype.reset=function(){this.filteredDelta=this.lastValue=void 0};Object.defineProperty(a.prototype,"hasLastValue",{get:function(){return void 0!==this.lastValue},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"hasFilteredDelta",{get:function(){return void 0!==this.filteredDelta},enumerable:!0,
configurable:!0});a.prototype.computeDelta=function(a){return a-this.lastValue};a.prototype.updateDelta=function(a){this.filteredDelta=this.hasFilteredDelta?(1-this.gain)*this.filteredDelta+this.gain*a:a};return a}();a.FilteredFiniteDifference=w})},"esri/views/navigation/Momentum":function(){define(["require","exports","../../core/tsSupport/extendsHelper"],function(w,a,u){Object.defineProperty(a,"__esModule",{value:!0});w=function(){function a(a,f,h){this._initialVelocity=a;this._stopVelocity=f;this._friction=
h;this._duration=Math.abs(Math.log(Math.abs(this._initialVelocity)/this._stopVelocity)/Math.log(1-this._friction))}Object.defineProperty(a.prototype,"duration",{get:function(){return this._duration},enumerable:!0,configurable:!0});a.prototype.isFinished=function(a){return a>this.duration};Object.defineProperty(a.prototype,"friction",{get:function(){return this._friction},enumerable:!0,configurable:!0});a.prototype.value=function(a){return this.valueFromInitialVelocity(this._initialVelocity,a)};a.prototype.valueDelta=
function(a,f){var h=this.value(a);return this.value(a+f)-h};a.prototype.valueFromInitialVelocity=function(a,f){f=Math.min(f,this.duration);var h=1-this.friction;return a*(Math.pow(h,f)-1)/Math.log(h)};return a}();a.Momentum=w})},"esri/views/2d/navigation/actions/Pinch":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../geometry ../../../../Viewpoint ../../../../core/Accessor ../../../../core/accessorSupport/decorators ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f64 ../../viewpointUtils ../../../navigation/RotationMomentumEstimator ../../../navigation/ZoomMomentumEstimator".split(" "),
function(w,a,u,f,r,q,h,t,m,e,v,p,z){return function(a){function b(b){var c=a.call(this,b)||this;c._animationTime=0;c._momentumFinished=!1;c._rotationMomentumEstimator=new p.RotationMomentumEstimator(.6,.15,.95);c._rotationDirection=1;c._zoomDirection=1;c._zoomMomentumEstimator=new z.ZoomMomentumEstimator;c._zoomOnly=null;c.zoomMomentum=null;c.rotateMomentum=null;c.viewpoint=new q({targetGeometry:new r.Point,scale:0,rotation:0});c.watch("_momentumFinished",function(a){a&&c.navigation.stop()});return c}
u(b,a);b.prototype.begin=function(a,b){this.navigation.begin();this._rotationMomentumEstimator.reset();this._zoomMomentumEstimator.reset();this._zoomOnly=null;this._previousAngle=this._startAngle=b.angle;this._previousRadius=this._startRadius=b.radius;this._previousCenter=b.center;this._updateTimestamp=null;a.constraints.rotationEnabled&&this.addToRotateEstimator(0,b.timestamp);this.addToZoomEstimator(b,1)};b.prototype.update=function(a,b){null===this._updateTimestamp&&(this._updateTimestamp=b.timestamp);
var c=b.angle,e=b.radius,g=b.center,f=Math.abs(180*(c-this._startAngle)/Math.PI),h=Math.abs(e-this._startRadius),n=this._startRadius/e;if(this._previousRadius){var m=e/this._previousRadius,p=180*(c-this._previousAngle)/Math.PI;this._rotationDirection=0<=p?1:-1;this._zoomDirection=1<=m?1:-1;a.constraints.rotationEnabled?(null===this._zoomOnly&&200<b.timestamp-this._updateTimestamp&&(this._zoomOnly=0<h-f),null===this._zoomOnly||this._zoomOnly?p=0:this.addToRotateEstimator(c-this._startAngle,b.timestamp)):
p=0;this.addToZoomEstimator(b,n);this.navigation.setViewpoint([g.x,g.y],1/m,p,[this._previousCenter.x-g.x,g.y-this._previousCenter.y])}this._previousAngle=c;this._previousRadius=e;this._previousCenter=g};b.prototype.end=function(a){this.rotateMomentum=this._rotationMomentumEstimator.evaluateMomentum();this.zoomMomentum=this._zoomMomentumEstimator.evaluateMomentum();this._animationTime=0;if(this.rotateMomentum||this.zoomMomentum)this.onAnimationUpdate(a);this.navigation.end()};b.prototype.addToRotateEstimator=
function(a,b){this._rotationMomentumEstimator.add(a,.001*b)};b.prototype.addToZoomEstimator=function(a,b){this._zoomMomentumEstimator.add(b,.001*a.timestamp)};b.prototype.canZoomIn=function(a){var b=a.scale;a=a.constraints.effectiveMaxScale;return 0===a||b>a};b.prototype.canZoomOut=function(a){var b=a.scale;a=a.constraints.effectiveMinScale;return 0===a||b<a};b.prototype.onAnimationUpdate=function(a){var b=this;this.navigation.animationManager.animateContinous(a.viewpoint,function(c,g){var d=!b.canZoomIn(a)&&
1<b._zoomDirection||!b.canZoomOut(a)&&1>b._zoomDirection,f=!b.rotateMomentum||b.rotateMomentum.isFinished(b._animationTime),d=d||!b.zoomMomentum||b.zoomMomentum.isFinished(b._animationTime);g*=.001;b._momentumFinished=f&&d;if(!b._momentumFinished){var f=b.rotateMomentum?Math.abs(b.rotateMomentum.valueDelta(b._animationTime,g))*b._rotationDirection*180/Math.PI:0,d=b.zoomMomentum?Math.abs(b.zoomMomentum.valueDelta(b._animationTime,g)):1,h=e.vec2f64.create(),l=e.vec2f64.create();if(b._previousCenter){m.vec2.set(h,
b._previousCenter.x,b._previousCenter.y);v.getPaddingScreenTranslation(l,a.size,a.padding);m.vec2.add(h,h,l);var l=a.constraints,n=a.scale,p=n*d;1>d&&!l.canZoomInTo(p)?(d=n/l.effectiveMaxScale,b.zoomMomentum=null,b.rotateMomentum=null):1<d&&!l.canZoomOutTo(p)&&(d=n/l.effectiveMinScale,b.zoomMomentum=null,b.rotateMomentum=null);v.scaleAndRotateBy(c,a.viewpoint,d,f,h,a.size)}}b._animationTime+=g})};b.prototype.stopMomentumNavigation=function(){if(this.rotateMomentum||this.zoomMomentum)this.rotateMomentum&&
(this._rotationMomentumEstimator.reset(),this.rotateMomentum=null),this.zoomMomentum&&(this._zoomMomentumEstimator.reset(),this.zoomMomentum=null),this.navigation.stop()};f([t.property()],b.prototype,"_momentumFinished",void 0);f([t.property()],b.prototype,"viewpoint",void 0);f([t.property()],b.prototype,"navigation",void 0);return b=f([t.subclass("esri.views.2d.navigation.actions.Pinch")],b)}(t.declared(h))})},"esri/views/navigation/RotationMomentumEstimator":function(){define(["require","exports",
"../../core/tsSupport/extendsHelper","./MomentumEstimator"],function(w,a,u,f){Object.defineProperty(a,"__esModule",{value:!0});w=function(a){function f(f,q,m,e){void 0===f&&(f=3);void 0===q&&(q=.01);void 0===m&&(m=.95);void 0===e&&(e=12);return a.call(this,f,q,m,e)||this}u(f,a);f.prototype.add=function(f,q){if(this.value.hasLastValue){var h=this.value.lastValue;for(f-=h;f>Math.PI;)f-=2*Math.PI;for(;f<-Math.PI;)f+=2*Math.PI;f=h+f}a.prototype.add.call(this,f,q)};return f}(f.MomentumEstimator);a.RotationMomentumEstimator=
w})},"esri/views/navigation/MomentumEstimator":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/mathUtils ./FilteredFiniteDifference ./Momentum".split(" "),function(w,a,u,f,r,q){Object.defineProperty(a,"__esModule",{value:!0});w=function(){function a(a,f,e,h){void 0===a&&(a=2.5);void 0===f&&(f=.01);void 0===e&&(e=.95);void 0===h&&(h=12);this.minimumInitialVelocity=a;this.stopVelocity=f;this.friction=e;this.maxVelocity=h;this.enabled=!0;this.value=new r.FilteredFiniteDifference(.8);
this.time=new r.FilteredFiniteDifference(.3)}a.prototype.add=function(a,f){if(this.enabled){if(this.time.hasLastValue){if(.01>this.time.computeDelta(f))return;if(this.value.hasFilteredDelta){var e=this.value.computeDelta(a);0>this.value.filteredDelta*e&&this.value.reset()}}this.time.update(f);this.value.update(a)}};a.prototype.reset=function(){this.value.reset();this.time.reset()};a.prototype.evaluateMomentum=function(){if(!this.enabled||!this.value.hasFilteredDelta)return null;var a=this.value.filteredDelta/
this.time.filteredDelta,a=f.clamp(a,-this.maxVelocity,this.maxVelocity);return Math.abs(a)<this.minimumInitialVelocity?null:this.createMomentum(a,this.stopVelocity,this.friction)};a.prototype.createMomentum=function(a,f,e){return new q.Momentum(a,f,e)};return a}();a.MomentumEstimator=w})},"esri/views/navigation/ZoomMomentumEstimator":function(){define(["require","exports","../../core/tsSupport/extendsHelper","./Momentum","./MomentumEstimator"],function(w,a,u,f,r){Object.defineProperty(a,"__esModule",
{value:!0});var q=function(a){function f(f,e,h){return a.call(this,f,e,h)||this}u(f,a);f.prototype.value=function(f){f=a.prototype.value.call(this,f);return Math.exp(f)};f.prototype.valueDelta=function(f,e){var h=a.prototype.value.call(this,f);f=a.prototype.value.call(this,f+e);return Math.exp(f-h)};return f}(f.Momentum);a.ZoomMomentum=q;w=function(a){function f(f,e,h,p){void 0===f&&(f=2.5);void 0===e&&(e=.01);void 0===h&&(h=.95);void 0===p&&(p=12);return a.call(this,f,e,h,p)||this}u(f,a);f.prototype.add=
function(f,e){a.prototype.add.call(this,Math.log(f),e)};f.prototype.createMomentum=function(a,e,f){return new q(a,e,f)};return f}(r.MomentumEstimator);a.ZoomMomentumEstimator=w})},"esri/views/2d/navigation/actions/Rotate":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../geometry ../../../../Viewpoint ../../../../core/Accessor ../../../../core/accessorSupport/decorators ../../../../core/libs/gl-matrix-2/vec2 ../../../../core/libs/gl-matrix-2/vec2f64 ../../viewpointUtils".split(" "),
function(w,a,u,f,r,q,h,t,m,e,v){var p=e.vec2f64.create(),z=e.vec2f64.create();return function(a){function b(b){b=a.call(this,b)||this;b._previousCenter=e.vec2f64.create();b.viewpoint=new q({targetGeometry:new r.Point,scale:0,rotation:0});return b}u(b,a);b.prototype.begin=function(a,b){this.navigation.begin();m.vec2.set(this._previousCenter,b.center.x,b.center.y)};b.prototype.update=function(a,b){var c=a.state,e=c.size,c=c.padding;m.vec2.set(p,b.center.x,b.center.y);v.getAnchor(z,e,c);a.viewpoint=
v.rotateBy(this.viewpoint,a.content.viewpoint,v.angleBetween(z,this._previousCenter,p));m.vec2.copy(this._previousCenter,p)};b.prototype.end=function(){this.navigation.end()};f([t.property()],b.prototype,"viewpoint",void 0);f([t.property()],b.prototype,"navigation",void 0);return b=f([t.subclass("esri.views.2d.actions.Rotate")],b)}(t.declared(h))})},"esri/views/2d/magnifier/MagnifierView2D":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/awaiterHelper ../../../core/tsSupport/generatorHelper ../../../request ../../../core/promiseUtils ../../webgl ../engine".split(" "),
function(w,a,u,f,r,q,h,t,m){Object.defineProperty(a,"__esModule",{value:!0});var e=m.enums.WGLDrawPhase,v=function(a){function p(){var b=a.call(this)||this;b.visible=!1;return b}u(p,a);p.prototype.destroy=function(){this._readbackTexture&&(this._readbackTexture.dispose(),this._readbackTexture=null,this._maskTexture.dispose(),this._maskTexture=null,this._overlayTexture.dispose(),this._overlayTexture=null,this._vertexArrayObject.dispose(),this._vertexArrayObject=null,this._program.dispose(),this._resourcesPromise=
this._program=null)};Object.defineProperty(p.prototype,"magnifier",{get:function(){return this._magnifier},set:function(a){var b=this;this._magnifier=a;this._handle&&this._handle.remove();this._handle=a.watch("version",function(){b.visible=a.visible});this.visible=a.visible},enumerable:!0,configurable:!0});p.prototype.doRender=function(a){var b=this.stage.context;if(!this._resourcesPromise)this._resourcesPromise=this._loadResources(w.toUrl("../../../images/magnifier/mask.png"),w.toUrl("../../../images/magnifier/overlay.png"));
else if(a.drawPhase===e.MAP&&this._canRender()){this._updateResources(b);var f=this._magnifier,c=1/f.factor,d=Math.ceil(c*this.overlay.width),h=Math.ceil(c*this.overlay.height),k=a.state.size,m=a.pixelRatio,c=m*k[0];a=m*k[1];var p=f.position||{x:.5*k[0],y:.5*k[1]},k=m*p.x,m=a-m*p.y,p=.5*d,q=.5*h;p>k?k=p:k>=c-p&&(k=c-p-1);q>m?m=q:m>=a-q&&(m=a-q-1);var p=k-p,q=m-q,r=this._readbackTexture;b.bindTexture(r,0);b.gl.copyTexImage2D(r.descriptor.target,0,r.descriptor.pixelFormat,p,q,d,h,0);d=(d=this.stage.background&&
this.stage.background.color)?[d.a*d.r/255,d.a*d.g/255,d.a*d.b/255,d.a]:[1,1,1,1];h=-1+(k+f.offsetX)/c*2;f=-1+(m-f.offsetY)/a*2;c=this.overlay.width/c*2;a=this.overlay.height/a*2;k=this._program;b.bindVAO(this._vertexArrayObject);b.bindTexture(this._overlayTexture,6);b.bindTexture(this._maskTexture,7);b.bindProgram(k);k.setUniform4fv("u_background",d);k.setUniform1i("u_readbackTexture",0);k.setUniform1i("u_overlyTexture",6);k.setUniform1i("u_maskTexture",7);k.setUniform2f("u_drawPos",h,f);k.setUniform1f("u_width",
c);k.setUniform1f("u_height",a);b.setStencilTestEnabled(!1);b.drawArrays(5,0,4);b.bindVAO()}};p.prototype._canRender=function(){return this.mask&&this.overlay&&null!=this._magnifier};p.prototype._loadResources=function(a,e){return f(this,void 0,void 0,function(){var b,c,d;return r(this,function(f){switch(f.label){case 0:return[4,h.all([q(a,{responseType:"image"}),q(e,{responseType:"image"})])];case 1:return b=f.sent(),c=b[0].data,d=b[1].data,this.mask=c,this.overlay=d,this.requestRender(),[2]}})})};
p.prototype._updateResources=function(a){if(!this._readbackTexture){var b=1/this._magnifier.factor,e=Math.ceil(b*this.overlay.width),b=Math.ceil(b*this.overlay.height);this._program=m.createMagnifierProgram(a);var c=new Uint16Array([0,1,0,0,1,1,1,0]);this._vertexArrayObject=new t.VertexArrayObject(a,m.magnifier.attributes,{geometry:[{name:"a_pos",count:2,type:5123,offset:0,stride:4,normalized:!1,divisor:0}]},{geometry:t.BufferObject.createVertex(a,35044,c)});this._overlayTexture=new t.Texture(a,{target:3553,
pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9728,flipped:!0},this.overlay);this._maskTexture=new t.Texture(a,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9728,flipped:!0},this.mask);this._readbackTexture=new t.Texture(a,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!1,width:e,height:b})}};return p}(m.DisplayObject);a.default=v})},"*noref":1}});
define("require exports ./LabelManager ./layers/graphics/GraphicsView2D ./navigation/MapViewNavigation ./magnifier/MagnifierView2D".split(" "),function(w,a,u,f,r,q){Object.defineProperty(a,"__esModule",{value:!0});a.LabelManager=u.default;a.GraphicsView2D=f.default;a.MapViewNavigation=r.default;a.MagnifierView2D=q.default});