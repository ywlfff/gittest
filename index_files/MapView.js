// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.14/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/BreakpointsOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/ArrayPool ../core/Handles ../core/watchUtils ../core/accessorSupport/decorators".split(" "),function(q,d,n,h,m,c,e,f,p){function b(b,g){return g?a[b].valueToClassName[g].split(" "):[]}Object.defineProperty(d,"__esModule",{value:!0});var a={widthBreakpoint:{getValue:function(a){var b=a.viewSize[0];a=a.breakpoints;
var g=this.values;return b<=a.xsmall?g.xsmall:b<=a.small?g.small:b<=a.medium?g.medium:b<=a.large?g.large:g.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},
heightBreakpoint:{getValue:function(a){var b=a.viewSize[1];a=a.breakpoints;var g=this.values;return b<=a.xsmall?g.xsmall:b<=a.small?g.small:b<=a.medium?g.medium:b<=a.large?g.large:g.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},
orientation:{getValue:function(a){a=a.viewSize;var b=this.values;return a[1]>=a[0]?b.portrait:b.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},g={xsmall:544,small:768,medium:992,large:1200};d.BreakpointsOwner=function(k){return function(k){function l(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];a=k.apply(this,a)||this;a._breakpointsHandles=new e;a.orientation=null;
a.widthBreakpoint=null;a.heightBreakpoint=null;a.breakpoints=g;return a}n(l,k);l.prototype.initialize=function(){this._breakpointsHandles.add(f.init(this,["breakpoints","size"],this._updateClassNames))};l.prototype.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=null)};Object.defineProperty(l.prototype,"breakpoints",{set:function(a){var b=this._get("breakpoints");if(a!==b){b=(b=a)&&b.xsmall<b.small&&b.small<b.medium&&b.medium<
b.large;if(!b){var c=JSON.stringify(g,null,2);console.warn("provided breakpoints are not valid, using defaults:"+c)}a=b?a:g;this._set("breakpoints",m({},a))}},enumerable:!0,configurable:!0});l.prototype._updateClassNames=function(){if(this.container){var g=c.acquire(),k=c.acquire(),l=!1,e;for(e in a){var f=this[e],t=a[e].getValue({viewSize:this.size,breakpoints:this.breakpoints});f!==t&&(l=!0,this[e]=t,b(e,f).forEach(function(a){return k.push(a)}),b(e,t).forEach(function(a){return g.push(a)}))}l&&
(this._applyClassNameChanges(g,k),c.release(g),c.release(k))}};l.prototype._applyClassNameChanges=function(a,b){var g=this.container;g&&(b.forEach(function(a){return g.classList.remove(a)}),a.forEach(function(a){return g.classList.add(a)}))};l.prototype._removeActiveClassNames=function(){var g=this.container;if(g)for(var c in a)b(c,this[c]).forEach(function(a){return g.classList.remove(a)})};h([p.property()],l.prototype,"breakpoints",null);h([p.property()],l.prototype,"orientation",void 0);h([p.property()],
l.prototype,"widthBreakpoint",void 0);h([p.property()],l.prototype,"heightBreakpoint",void 0);return l=h([p.subclass("esri.views.BreakpointsOwner")],l)}(p.declared(k))}})},"esri/views/Magnifier":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(q,d,n,h,m,c){return function(e){function f(c){c=e.call(this,c)||this;c.factor=1.5;c.offsetX=0;c.offsetY=0;c.position=null;c.visible=
!1;return c}n(f,e);Object.defineProperty(f.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0});h([c.property({type:Number})],f.prototype,"factor",void 0);h([c.property({type:Number})],f.prototype,"offsetX",void 0);h([c.property({type:Number})],f.prototype,"offsetY",void 0);h([c.property()],f.prototype,"position",void 0);h([c.property({readOnly:!0,dependsOn:["factor","offsetX","offsetY","position","visible"]})],f.prototype,"version",null);h([c.property({type:Boolean})],
f.prototype,"visible",void 0);return f=h([c.subclass("esri.views.Magnifier")],f)}(c.declared(m))})},"esri/views/MapViewBase":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../geometry ../Viewpoint ../core/Error ../core/Logger ../core/now ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/accessorSupport/decorators ../geometry/support/webMercatorUtils ../layers/support/TileInfo ./PopupView ./View ./ViewAnimation ./2d/AnimationManager ./2d/FrameTask ./2d/layerViewModuleImportUtils ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/tiling ./2d/viewpointUtils ./2d/support/Timeline".split(" "),
function(q,d,n,h,m,c,e,f,p,b,a,g,k,l,t,J,u,r,w,B,G,x,v,z,A,y,I){var C=p.getLogger("esri.views.MapView");return function(p){function r(a){var g=p.call(this,a)||this;g._stationaryTimer=null;g.frameTask=new G.default(g);g.featuresTilingScheme=null;g.fullOpacity=1;g.interacting=!1;g.initialExtent=null;g.labelManager=null;g.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};g.resizeAlign="center";g.timeline=new I.Timeline;g.type="2d";g.constraints=
new v;g.padding={top:0,right:0,bottom:0,left:0};var c=g.handles,k=function(){return g.notifyChange("updating")};c.add([g.watch("viewpoint",function(){g._lastStationaryEventTimestamp=b();g._flipStationary(160)},!0),g.on("resize",function(a){return g._resizeHandler(a)}),g.watch("animationManager.animation",function(a){g.animation=a}),g.allLayerViews.on("change",function(){k();c.remove("map-view-base-layerViewsUpdating");c.add(g.allLayerViews.map(function(a){return a.watch("updating",k)}),"map-view-base-layerViewsUpdating")})],
"map-view-base");return g}h(r,p);r.prototype.destroy=function(){this.destroyed||(this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null)};Object.defineProperty(r.prototype,"animation",{set:function(a){var b=this,g=this._get("animation");a!==g&&(g&&g.stop(),!a||a.isFulfilled()?this._set("animation",null):(this._set("animation",a),this.frameTask.animationInProgress=!0,g=function(){a===b._get("animation")&&(b._set("animation",null),b.frameTask.requestFrame());b.frameTask.animationInProgress=
!1},a.when(g,g)))},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"center",{get:function(){if(!this.ready)return this._get("center");var a=this.content.center;return new c.Point({x:a[0],y:a[1],spatialReference:this.content.spatialReference})},set:function(a){if(null!=a)if(this._normalizeInput(a))if(this.ready){var b=this.viewpoint;y.centerAt(b,b,a);this.viewpoint=b}else this._set("center",a),this.notifyChange("initialExtentRequired");else C.error("#center","incompatible spatialReference "+
JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"constraints",{set:function(a){var b=this,g=this._get("constraints");g&&(this.handles.remove("map-view-base-constraints"),g.destroy());this._set("constraints",a);a&&(a.view=this,this.ready&&(this.state.viewpoint=a.fit(this.content.viewpoint)),this.handles.add(a.on("update",function(){b.ready&&b.state&&(b.state.viewpoint=a.fit(b.content.viewpoint))}),
"map-view-base-constraints"))},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"extent",{get:function(){return this.ready?this.content.extent.clone():this._get("extent")},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?b.width&&b.height?this.ready?(a=this.viewpoint,y.setExtent(a,a,b,this.size,{constraints:this.constraints}),this.viewpoint=a):(this._set("extent",b),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired")):
C.error("#extent","invalid extent size"):C.error("#center","incompatible spatialReference "+JSON.stringify(a.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference))}},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"initialExtentRequired",{get:function(){var a=this.extent,b=this.center,g=this.scale,c=this.viewpoint,k=this.zoom;return this.get("map.initialViewProperties.viewpoint")||a||b&&(0!==g||-1!==k)||c?!1:!0},enumerable:!0,configurable:!0});
Object.defineProperty(r.prototype,"padding",{get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(a){this.ready?(this.state.padding=a,this._set("padding",this.state.padding)):this._set("padding",a)},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"resolution",{get:function(){return this.state?this.state.resolution:0},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"rotation",{get:function(){return this.ready?this.content.rotation:
this._get("rotation")},set:function(a){if(!isNaN(a))if(this.ready){var b=this.viewpoint;y.rotateTo(b,b,a);this.viewpoint=b}else this._set("rotation",a)},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"scale",{get:function(){return this.ready?this.content.scale:this._get("scale")},set:function(a){if(a&&!isNaN(a))if(this.ready){var b=this.viewpoint;y.scaleTo(b,b,a);this.viewpoint=b}else{this._set("scale",a);this._set("zoom",-1);if(a=this._get("extent"))this._set("extent",null),this._set("center",
a.center);this.notifyChange("initialExtentRequired")}},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"stationary",{get:function(){return!this.animation&&!this.interacting&&!this._get("resizing")&&!this._stationaryTimer},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"updating",{get:function(){return!this.destroyed&&(!0===this.get("layerViewManager.updating")||!0===this.get("labelManager.updating")||!0===this.get("graphicsView.updating")||this.allLayerViews.some(function(a){return!a.destroyed&&
!("layerViews"in a)&&a.attached&&!0===a.updating}))},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"viewpoint",{get:function(){if(!this.ready)return this._get("viewpoint");var a=this.content;return a&&a.viewpoint.clone()},set:function(a){if(null!=a){var b=this._normalizeInput(a);b?this.ready?(a=new e({targetGeometry:new c.Point,scale:0,rotation:0}),y.copy(a,b),this.constraints.constrain(a,this.content.viewpoint),this.state.viewpoint=a,this.frameTask.requestFrame(),this._set("viewpoint",
a)):(this._set("viewpoint",b),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")):!a.scale||isNaN(a.scale)?C.error("#viewpoint","invalid scale value of "+a.scale):a.targetGeometry?C.error("#viewpoint","incompatible spatialReference "+JSON.stringify(a.targetGeometry.spatialReference)+" with view's spatialReference "+JSON.stringify(this.spatialReference)):C.error("#viewpoint","geometry not defined")}},enumerable:!0,
configurable:!0});Object.defineProperty(r.prototype,"zoom",{get:function(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(a){if(null!=a){if(!this.ready){this.notifyChange("initialExtentRequired");this._set("zoom",a);this._set("scale",0);var b=this._get("extent");b&&(this._set("extent",null),this._set("center",b.center))}this.constraints.effectiveLODs&&(b=this.viewpoint,y.scaleTo(b,b,this.constraints.zoomToScale(a)),this.viewpoint=b,this._set("zoom",this.constraints.scaleToZoom(this.scale)))}},
enumerable:!0,configurable:!0});r.prototype.goTo=function(a,b){var g=this;if(a)return k.whenTrueOnce(this,"ready",b&&b.signal).then(function(){g.animation&&(g.animation=null);var c=n({animate:!0},b),k=y.createAsync(a,g);g._gotoTask={};return c.animate?g._gotoAnimated(k,c):g._gotoImmediate(k,c)});C.error("#goTo()","target cannot be null or undefined")};r.prototype.hitTest=function(b){return a.reject("Should be implemented by subclasses")};r.prototype.popupHitTest=function(a){var b=this;return this.hitTest(a).then(function(g){return n({},
g,{mapPoint:b.toMap(a)})})};r.prototype.toMap=function(a){if(!this.ready)return null;a=this.state.toMap([0,0],[a.x,a.y]);return new c.Point({x:a[0],y:a[1],spatialReference:this.spatialReference})};r.prototype.isTileInfoRequired=function(){return!0};r.prototype.toScreen=function(a){if(!this.ready)return null;a=this._normalizeInput(a);a=[a.x,a.y];a=this.state.toScreen(a,a);return g.createScreenPoint(a[0],a[1])};r.prototype.pixelSizeAt=function(a,b){if(!this.ready)return NaN;a&&null!=a.x&&(b=a.y,a=a.x);
return this.content.pixelSizeAt([a,b])};r.prototype.requestLayerViewUpdate=function(a){this.ready&&this.frameTask.requestLayerViewUpdate(a)};r.prototype.requestUpdate=function(a){this.ready&&this.frameTask.requestUpdate(a)};r.prototype.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||null};r.prototype.isSpatialReferenceSupported=function(a,b){return b||this._get("ready")?!0:null!==this._getDefaultViewpoint()};
r.prototype.importLayerView=function(a){return x.layerView2DImporter.importLayerView(a)};r.prototype.hasLayerViewModule=function(a){return x.layerView2DImporter.hasLayerViewModule(a)};r.prototype._createOrReplaceAnimation=function(a){if(!this.animation||this.animation.done)this.animation=new w;this.animation.update(a);return this.animation};r.prototype._cancellableGoTo=function(b,g,c){var k=this,l=c.then(function(){b===k._gotoTask&&(k.animation=null)}).catch(function(a){b===k._gotoTask&&(k.animation=
null,g.done||(g.stop(),k.frameTask.animationInProgress=!1));throw a;}),e=a.create(function(a){return a(l)},function(){b!==k._gotoTask||g.done||(g.stop(),k.frameTask.animationInProgress=!1)});g.when().catch(function(){b===k._gotoTask&&e.cancel&&e.cancel()});return e};r.prototype._gotoImmediate=function(b,g){var c=this,k=this._gotoTask,l=this._createOrReplaceAnimation(b);b=b.then(function(b){a.throwIfAborted(g);if(k!==c._gotoTask)throw new f("view:goto-interrupted","Goto was interrupted");c.viewpoint=
l.target=b;l.finish()});return this._cancellableGoTo(k,l,b)};r.prototype._gotoAnimated=function(a,b){var g=this,c=this._gotoTask,k=this._createOrReplaceAnimation(a);a=a.then(function(a){if(c!==g._gotoTask)throw new f("view:goto-interrupted","Goto was interrupted");k.update(a);g.animationManager.animate(k,g.viewpoint,b);return k.when().then(function(){},function(){})});return this._cancellableGoTo(c,k,a)};r.prototype._resizeHandler=function(a){var b=this.state;if(b){var g=this.content.viewpoint,c=
this.content.size.concat();b.size=[a.width,a.height];y.resize(g,g,c,this.content.size,this.resizeAlign);g=this.constraints.constrain(g,null);this.state.viewpoint=g}};r.prototype._startup=function(){var a=this._getDefaultViewpoint();this.constraints.view=this;this.constraints.fit(a);this._set("animationManager",new B({view:this}));this._set("state",new z({padding:this._get("padding"),size:this.size,viewpoint:a}));this._set("content",this.state.content);this._set("featuresTilingScheme",new A.TileInfoView(J.create({spatialReference:this.spatialReference,
size:512})));this._set("ready",!0);this.frameTask&&this.frameTask.start()};r.prototype._teardown=function(){this.frameTask&&this.frameTask.stop();this._set("ready",!1);this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null,this.notifyChange("stationary"));var a=this._get("content"),b=a.center,g=a.spatialReference,b=new c.Point({x:b[0],y:b[1],spatialReference:g});this._set("viewpoint",null);this._set("extent",null);this._set("center",b);this._set("zoom",-1);this._set("rotation",
a.rotation);this._set("scale",a.scale);this._set("spatialReference",g);this.constraints.view=null;this.animationManager.destroy();this._set("animationManager",null);this._set("state",null);this._set("content",null);this.animation=null};r.prototype._flipStationary=function(a){var g=this;return null!==this._stationaryTimer?this._stationaryTimer:this._stationaryTimer=setTimeout(function(){g._stationaryTimer=null;var a=b()-g._lastStationaryEventTimestamp;160>a?g._stationaryTimer=g._flipStationary(a):
g.notifyChange("stationary")},a)};r.prototype._normalizeInput=function(a,b){void 0===b&&(b=this.spatialReference);var g=a&&a.targetGeometry||a;return b?g?b.equals(g.spatialReference)?a:t.canProject(g,b)?a&&"esri.Viewpoint"===a.declaredClass?(a.targetGeometry=t.project(g,b),a):t.project(g,b):null:null:a};r.prototype._getDefaultViewpoint=function(){var a=this.constraints,b=this._get("zoom"),g=this._get("scale"),c=this._normalizeInput(this._get("center")),k=this._normalizeInput(this._get("extent")),
l=this._get("rotation"),f=this._normalizeInput(this._get("viewpoint"));a.effectiveLODs?-1!==b&&(g=a.zoomToScale(b)):b=-1;var t=null,r=null,b=0,a=f&&f.rotation,p=f&&f.targetGeometry;p&&("extent"===p.type?t=p:"point"===p.type&&(r=p,b=f.scale));f=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"));p=this._normalizeInput(this.initialExtent);k=k||t||f||p;c=c||r||k&&k.center;g=g||b||k&&y.extentToScale(k,this.size);return c&&g?new e({targetGeometry:c,scale:g,rotation:l||
a||0}):null};m([l.property()],r.prototype,"animation",null);m([l.property({readOnly:!0})],r.prototype,"animationManager",void 0);m([l.property({value:null,type:c.Point,dependsOn:["content.viewpoint","ready"]})],r.prototype,"center",null);m([l.property({type:v})],r.prototype,"constraints",null);m([l.property({readOnly:!0})],r.prototype,"content",void 0);m([l.property({value:null,type:c.Extent,dependsOn:["content.viewpoint","ready"]})],r.prototype,"extent",null);m([l.property({readOnly:!0})],r.prototype,
"featuresTilingScheme",void 0);m([l.property()],r.prototype,"fullOpacity",void 0);m([l.property({readOnly:!0})],r.prototype,"interacting",void 0);m([l.property({type:c.Extent})],r.prototype,"initialExtent",void 0);m([l.property({dependsOn:["map.initialViewProperties?.viewpoint"]})],r.prototype,"initialExtentRequired",null);m([l.property()],r.prototype,"labelManager",void 0);m([l.property({value:{top:0,right:0,bottom:0,left:0},cast:function(a){return n({top:0,right:0,bottom:0,left:0},a)}})],r.prototype,
"padding",null);m([l.property({type:Object})],r.prototype,"renderingOptions",void 0);m([l.property()],r.prototype,"resizeAlign",void 0);m([l.property({readOnly:!0,dependsOn:["content.viewpoint"]})],r.prototype,"resolution",null);m([l.property({value:0,type:Number,dependsOn:["content.viewpoint","ready"]})],r.prototype,"rotation",null);m([l.property({value:0,type:Number,dependsOn:["content.viewpoint","ready"]})],r.prototype,"scale",null);m([l.property({type:c.SpatialReference,dependsOn:["map.initialViewProperties?.spatialReference",
"defaultsFromMap.isSpatialReferenceDone"]})],r.prototype,"spatialReference",void 0);m([l.property({readOnly:!0})],r.prototype,"state",void 0);m([l.property()],r.prototype,"stationary",null);m([l.property({type:I.Timeline,readOnly:!0})],r.prototype,"timeline",void 0);m([l.property({readOnly:!0})],r.prototype,"type",void 0);m([l.property({readOnly:!0,dependsOn:["layerViewManager.updating","labelManager.updating","graphicsView?.updating"]})],r.prototype,"updating",null);m([l.property({value:null,type:e,
dependsOn:["content.viewpoint","ready"]})],r.prototype,"viewpoint",null);m([l.property({value:-1,dependsOn:["scale"]})],r.prototype,"zoom",null);return r=m([l.subclass("esri.views.MapViewBase")],r)}(l.declared(u.PopupView(r)))})},"esri/layers/support/TileInfo":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(q,d,n,h,m,c,e,f,p,b,a,g,k,l,t){var J=new e.default({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",pbf:"pbf"});return function(e){function f(a){a=e.call(this,a)||this;a.dpi=96;a.format=null;a.origin=null;a.minScale=0;a.maxScale=0;a.size=null;a.spatialReference=null;return a}h(f,e);d=f;f.create=function(a){void 0===a&&(a={size:256,spatialReference:c.SpatialReference.WebMercator});
var b=a.resolutionFactor||1,g=a.scales,l=a.size||256;a=a.spatialReference||c.SpatialReference.WebMercator;if(!k.isValid(a)){b=[];if(g)for(var e=0;e<g.length;e++){var f=g[e];b.push({level:e,scale:f,resolution:f})}else for(var t=5E-4,e=23;0<=e;e--)b.unshift({level:e,scale:t,resolution:t}),t*=2;return new d({dpi:96,lods:b,origin:new c.Point(0,0,a),size:[l,l],spatialReference:a})}var r=(e=k.getInfo(a))?new c.Point(e.origin[0],e.origin[1],a):new c.Point(0,0,a),h=1/(39.37*p.getMetersPerUnitForSR(a)*96),
J=[];if(g)for(e=0;e<g.length;e++)f=g[e],t=f*h,J.push({level:e,scale:f,resolution:t});else for(f=k.isGeographic(a)?512/l*5.916575275917094E8:256/l*5.91657527591555E8,g=Math.ceil(24/b),J.push({level:0,scale:f,resolution:f*h}),e=1;e<g;e++)f/=Math.pow(2,b),t=f*h,J.push({level:e,scale:f,resolution:t});return new d({dpi:96,lods:J,origin:r,size:[l,l],spatialReference:a})};Object.defineProperty(f.prototype,"isWrappable",{get:function(){var a=this.spatialReference,b=this.origin;if(a&&b){var g=k.getInfo(a);
return a.isWrappable&&Math.abs(g.origin[0]-b.x)<=g.dx}return!1},enumerable:!0,configurable:!0});f.prototype.readOrigin=function(a,b){return c.Point.fromJSON(n({spatialReference:b.spatialReference},a))};Object.defineProperty(f.prototype,"lods",{set:function(a){var b=this,g=0,c=0,k=[];this._levelToLOD={};a&&(g=-Infinity,c=Infinity,a.forEach(function(a){k.push(a.scale);g=a.scale>g?a.scale:g;c=a.scale<c?a.scale:c;b._levelToLOD[a.level]=a}));this._set("scales",k);this._set("minScale",g);this._set("maxScale",
c);this._set("lods",a);this._initializeUpsampleLevels()},enumerable:!0,configurable:!0});f.prototype.readSize=function(a,b){return[b.cols,b.rows]};f.prototype.writeSize=function(a,b){b.cols=a[0];b.rows=a[0]};f.prototype.zoomToScale=function(a){var b=this.scales;if(0>=a)return b[0];if(a>=b.length)return b[b.length-1];var g=Math.round(a);return b[g]+(g-a)*(b[Math.round(a-.5)]-b[g])};f.prototype.scaleToZoom=function(a){for(var b=this.scales,g=b.length-1,c=0;c<g;c++){var k=b[c],l=b[c+1];if(k<=a)break;
if(l===a)return c+1;if(k>a&&l<a)return c+1-(a-l)/(k-l)}return c};f.prototype.snapScale=function(a,b){void 0===b&&(b=.95);a=this.scaleToZoom(a);return a%Math.floor(a)>=b?this.zoomToScale(Math.ceil(a)):this.zoomToScale(Math.floor(a))};f.prototype.tileAt=function(a,b,c,e){var f=this.lodAt(a);if(!f)return null;var t;if("number"===typeof b)t=b,b=c;else{if(k.equals(b.spatialReference,this.spatialReference))t=b.x,b=b.y;else{e=l.project(b,this.spatialReference);if(!e)return null;t=e.x;b=e.y}e=c}c=f.resolution*
this.size[0];f=f.resolution*this.size[1];e||(e={id:null,level:0,row:0,col:0,extent:g.create()});e.level=a;e.row=Math.floor((this.origin.y-b)/f+.001);e.col=Math.floor((t-this.origin.x)/c+.001);this.updateTileInfo(e);return e};f.prototype.updateTileInfo=function(a){var b=this.lodAt(a.level);if(b){var c=b.resolution*this.size[0],b=b.resolution*this.size[1];a.id=a.level+"/"+a.row+"/"+a.col;a.extent||(a.extent=g.create());a.extent[0]=this.origin.x+a.col*c;a.extent[1]=this.origin.y-(a.row+1)*b;a.extent[2]=
a.extent[0]+c;a.extent[3]=a.extent[1]+b}};f.prototype.upsampleTile=function(a){var b=this._upsampleLevels[a.level];if(!b||-1===b.parentLevel)return!1;a.level=b.parentLevel;a.row=Math.floor(a.row/b.factor+.001);a.col=Math.floor(a.col/b.factor+.001);this.updateTileInfo(a);return!0};f.prototype.getTileBounds=function(a,b){var g=this.lodAt(b.level).resolution,c=g*this.size[0],g=g*this.size[1];a[0]=this.origin.x+b.col*c;a[1]=this.origin.y-(b.row+1)*g;a[2]=a[0]+c;a[3]=a[1]+g;return a};f.prototype.lodAt=
function(a){return this._levelToLOD&&this._levelToLOD[a]||null};f.prototype.clone=function(){return d.fromJSON(this.write({}))};f.prototype._initializeUpsampleLevels=function(){var a=this.lods;this._upsampleLevels=[];for(var b=null,g=0;g<a.length;g++){var c=a[g];this._upsampleLevels[c.level]={parentLevel:b?b.level:-1,factor:b?b.resolution/c.resolution:0};b=c}};var d;m([b.property({type:Number,json:{write:!0}})],f.prototype,"compressionQuality",void 0);m([b.property({type:Number,json:{write:!0}})],
f.prototype,"dpi",void 0);m([b.property({type:String,json:{read:J.read,write:J.write,origins:{"web-scene":{read:!1,write:!1}}}})],f.prototype,"format",void 0);m([b.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],f.prototype,"isWrappable",null);m([b.property({type:c.Point,json:{write:!0}})],f.prototype,"origin",void 0);m([b.reader("origin")],f.prototype,"readOrigin",null);m([b.property({type:[t],value:null,json:{write:!0}})],f.prototype,"lods",null);m([b.property({readOnly:!0})],f.prototype,
"minScale",void 0);m([b.property({readOnly:!0})],f.prototype,"maxScale",void 0);m([b.property({readOnly:!0})],f.prototype,"scales",void 0);m([b.property({cast:function(a){return Array.isArray(a)?a:"number"===typeof a?[a,a]:[256,256]}})],f.prototype,"size",void 0);m([b.reader("size",["rows","cols"])],f.prototype,"readSize",null);m([b.writer("size",{cols:{type:a.Integer},rows:{type:a.Integer}})],f.prototype,"writeSize",null);m([b.property({type:c.SpatialReference,json:{write:!0}})],f.prototype,"spatialReference",
void 0);return f=d=m([b.subclass("esri.layers.support.TileInfo")],f)}(b.declared(f.JSONSupport))})},"esri/layers/support/LOD":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),function(q,d,n,h,m,c,e){return function(f){function p(a){a=f.call(this,a)||this;a.level=0;a.levelValue=null;a.resolution=0;a.scale=0;return a}n(p,f);b=
p;p.prototype.clone=function(){return new b({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};var b;h([c.property({type:e.Integer,json:{write:!0}})],p.prototype,"level",void 0);h([c.property({type:String,json:{write:!0}})],p.prototype,"levelValue",void 0);h([c.property({type:Number,json:{write:!0}})],p.prototype,"resolution",void 0);h([c.property({type:Number,json:{write:!0}})],p.prototype,"scale",void 0);return p=b=h([c.subclass("esri.layers.support.LOD")],
p)}(c.declared(m.JSONSupport))})},"esri/views/PopupView":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/generatorHelper ../core/arrayUtils ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators".split(" "),function(q,d,n,h,m,c,e,f,p,b,a){Object.defineProperty(d,"__esModule",{value:!0});d.PopupView=function(g){return function(g){function k(){return null!==
g&&g.apply(this,arguments)||this}h(k,g);k.prototype.fetchPopupFeatures=function(a,b){return this._fetchPopupFeaturesAsync(a,b)};k.prototype._fetchPopupFeaturesAsync=function(a,g){return c(this,void 0,void 0,function(){var c,k,l,t,p,h;return e(this,function(e){switch(e.label){case 0:return[4,this.when()];case 1:return e.sent(),[4,this._prepareFetchPopupFeatures(a,g)];case 2:return c=e.sent(),k=c.location,l=this._queryLayerPopupFeatures(c,g),t=b.resolve(c.clientOnlyGraphics),p=[t].concat(l),h=b.eachAlwaysValues(p).then(f.flatten),
[2,{promise:h,location:k,promises:p}]}})})};k.prototype._queryLayerPopupFeatures=function(a,b){var g=a.queryArea;return a.layerViewsAndGraphics.map(function(a){var c=a.layerView;a={clientGraphics:a.graphics,signal:p.isSome(b)?b.signal:null,defaultPopupTemplateEnabled:p.isSome(b)?!!b.defaultPopupTemplateEnabled:!1};return c.fetchPopupFeatures(g,a)})};k.prototype._isValidPopupGraphic=function(a,b){return a&&!!a.getEffectivePopupTemplate(p.isSome(b)&&b.defaultPopupTemplateEnabled)};k.prototype._prepareFetchPopupFeatures=
function(a,b){return c(this,void 0,void 0,function(){var g,c,k,l,f,t,p,h;return e(this,function(e){switch(e.label){case 0:return[4,this._popupHitTestGraphics(a,b)];case 1:return g=e.sent(),c=g.clientGraphics,k=g.queryArea,l=g.location,f=this._getFetchPopupLayerViews(),t=this._graphicsPerFetchPopupLayerView(c,f),p=t.layerViewsAndGraphics,h=t.clientOnlyGraphics,[2,{clientOnlyGraphics:h,layerViewsAndGraphics:p,queryArea:k,location:l}]}})})};k.prototype._popupHitTestGraphics=function(a,b){return c(this,
void 0,void 0,function(){var g,c,k,l,f,t,p=this;return e(this,function(e){switch(e.label){case 0:return[4,this.popupHitTest(a)];case 1:return g=e.sent(),c=g.results,k=g.mapPoint,l=c.filter(function(a){return p._isValidPopupGraphic(a.graphic,b)}),f=l.length?l[0].mapPoint:null,t=l.map(function(a){return a.graphic}),[2,{clientGraphics:t,queryArea:k,location:k||f}]}})})};k.prototype._getFetchPopupLayerViews=function(){var a=this,b=[];this.allLayerViews.forEach(function(g){a._isValidPopupLayerView(g)&&
b.push(g)});p.isSome(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&b.push(this.graphicsView);return b.reverse()};k.prototype._isValidPopupLayerView=function(a){return p.isSome(a)&&(!("layer"in a)||!a.suspended)&&"fetchPopupFeatures"in a};k.prototype._graphicsPerFetchPopupLayerView=function(a,b){var g=[],c=new Map;b=b.map(function(a){var b=[];"layer"in a?c.set(a.layer,b):c.set(a.graphics,b);return{layerView:a,graphics:b}});for(var k=0;k<a.length;k++){var l=a[k],e=c.get(l.layer)||
null;e?e.push(l):g.push(l)}return{layerViewsAndGraphics:b,clientOnlyGraphics:g}};return k=m([a.subclass("esri.views.PopupView")],k)}(a.declared(g))}})},"esri/views/2d/AnimationManager":function(){define("../../Viewpoint ../../core/Accessor ../../core/scheduling ../../core/now ../../geometry/Point ../ViewAnimation ./unitBezier ./viewpointUtils".split(" "),function(q,d,n,h,m,c,e,f){var p=function(b,a,g,c){var k=b.targetGeometry,f=a.targetGeometry;c?"string"===typeof c&&(c=e.parse(c)||e.ease):c=e.ease;
this.easing=c;this.duration=g;this.sCenterX=k.x;this.sCenterY=k.y;this.sScale=b.scale;this.sRotation=b.rotation;this.tCenterX=f.x;this.tCenterY=f.y;this.tScale=a.scale;this.tRotation=a.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=this.tScale-this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)};p.prototype.applyRatio=function(b,a){var g=this.easing(a),c,
l;1<=a?(a=this.tCenterX,c=this.tCenterY,l=this.tRotation,g=this.tScale):(a=this.sCenterX+g*this.dCenterX,c=this.sCenterY+g*this.dCenterY,l=this.sRotation+g*this.dRotation,g=this.sScale+g*this.dScale);b.targetGeometry.x=a;b.targetGeometry.y=c;b.scale=g;b.rotation=l};return d.createSubclass({constructor:function(){this.viewpoint=new q({targetGeometry:new m,scale:0,rotation:0});this._updateTask=n.addFrameTask({postRender:this._postRender.bind(this)});this._updateTask.pause()},properties:{animation:null,
duration:{value:200},transition:{value:null},easing:{value:e.ease},view:null,viewpoint:null},animate:function(b,a,g){this.stop();f.copy(this.viewpoint,a);this.transition=new p(this.viewpoint,b.target,g&&g.duration||this.duration,g&&g.easing||this.easing);a=function(){this.animation===b&&this._updateTask&&("finished"===b.state&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.updateFunction=this.animation=null)}.bind(this);b.when(a,
a);this._startTime=h();this._updateTask.resume();return this.animation=b},animateContinous:function(b,a){this.stop();this.updateFunction=a;this.viewpoint=b;var g=new c({target:b.clone()});b=function(){this.animation===g&&this._updateTask&&(this.updateFunction=this.animation=null)}.bind(this);g.when(b,b);this._startTime=h();this._updateTask.resume();return this.animation=g},stop:function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)},_postRender:function(b){var a=
this.animation;a&&a.state!==c.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,b.deltaTime):(b=(h()-this._startTime)/this.transition.duration,a=1<=b,this.transition.applyRatio(this.viewpoint,b),a&&this.animation.finish()),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())):this._updateTask.pause()}})})},"esri/views/2d/unitBezier":function(){define([],function(){var q=function(d,h,m,c){function e(a,g){var c,k,l,e;g=null==g?1E-6:g;l=a;for(k=0;8>k;k++){e=((b*l+p)*l+f)*
l-a;if(Math.abs(e)<g)return l;c=(3*b*l+2*p)*l+f;if(1E-6>Math.abs(c))break;l-=e/c}c=0;k=1;l=a;if(l<c)return c;if(l>k)return k;for(;c<k;){e=((b*l+p)*l+f)*l;if(Math.abs(e-a)<g)break;a>e?c=l:k=l;l=.5*(k-c)+c}return l}var f=3*d,p=3*(m-d)-f,b=1-f-p,a=3*h,g=3*(c-h)-a,k=1-a-g;return function(b,c){b=e(b,c);return((k*b+g)*b+a)*b}},d=/^cubic-bezier\((.*)\)/;q.parse=function(n){var h=q[n]||null;!h&&(n=d.exec(n))&&(n=n[1].split(",").map(function(h){return parseFloat(h.trim())}),4!==n.length||n.some(function(h){return isNaN(h)})||
(h=q.apply(q,n)));return h};q.ease=q(.25,.1,.25,1);q.linear=q(0,0,1,1);q.easeIn=q["ease-in"]=q(.42,0,1,1);q.easeOut=q["ease-out"]=q(0,0,.58,1);q.easeInOut=q["ease-in-out"]=q(.42,0,.58,1);return q})},"esri/views/2d/viewpointUtils":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../Viewpoint ../../core/Collection ../../core/maybe ../../core/promiseUtils ../../core/unitUtils ../../core/wgs84Constants ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../geometry/support/webMercatorUtils".split(" "),
function(q,d,n,h,m,c,e,f,p,b,a,g,k,l,t,J,u,r,w,B,G,x){function v(b,g,c,k){return k&&c&&!k.equals(c)&&G.canProject(k,c)&&k.isWebMercator?(k.isWebMercator?(c=g[1],89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999),c=Math.sin(a.common.toRadian(c)),b=l.vec2.set(b,a.common.toRadian(g[0])*O,.5*O*Math.log((1+c)/(1-c)))):(c=a.common.toDegree(g[0]/O),b=l.vec2.set(b,c-360*Math.floor((c+180)/360),a.common.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*g[1]/O))))),b):l.vec2.copy(b,g)}function z(a){return a.wkid?a:
a.spatialReference||w.WGS84}function A(a,b){return b.type?l.vec2.set(a,b.x,b.y):l.vec2.copy(a,b)}function y(a,b){return Math.max(a.width/b[0],a.height/b[1])*M(a.spatialReference)}function I(a,b,g,k){return h(this,void 0,void 0,function(){var l,t,H,p,h,d,w,m,B,x,z,v,V,A,q,y,T,W,U,C,D,L,E,F,Q,N,K,P;return n(this,function(X){switch(X.label){case 0:if(!a||Array.isArray(a)&&!a.length)return[2,null];c.isCollection(a)&&(a=a.toArray());if(!Array.isArray(a)||!a.length||"object"!==typeof a[0])return[3,7];t=
a.every(function(a){return"attributes"in a});H=a.some(function(a){return!a.geometry});p=a;if(!(t&&H&&b&&b.allLayerViews))return[3,2];h=new Map;d=0;for(w=a;d<w.length;d++)m=w[d],B=m.layer,x=h.get(B)||[],z=m.attributes[B.objectIdField],null!=z&&x.push(z),h.set(B,x);v=[];h.forEach(function(a,g){var c=b.allLayerViews.find(function(a){return a.layer.id===g.id});if("queryFeatures"in c){var k=g.createQuery();k.objectIds=a;k.returnGeometry=!0;v.push(c.queryFeatures(k))}});return[4,f.all(v)];case 1:V=X.sent();
A=[];q=0;for(y=V;q<y.length;q++)if((T=y[q])&&T.features&&T.features.length)for(W=0,U=T.features;W<U.length;W++)m=U[W],e.isSome(m.geometry)&&A.push(m.geometry);p=A;X.label=2;case 2:C=0,D=p,X.label=3;case 3:if(!(C<D.length))return[3,6];L=D[C];return[4,I(L,b,g,k)];case 4:k=X.sent(),X.label=5;case 5:return C++,[3,3];case 6:return[2,k];case 7:if(!Array.isArray(a)||2!==a.length||"number"!==typeof a[0]||"number"!==typeof a[1])return[3,8];l=new r(a);return[3,12];case 8:if(!(a instanceof u))return[3,9];l=
a;return[3,12];case 9:if(!("geometry"in a))return[3,12];if(!a.geometry)return[3,10];l=a.geometry;return[3,12];case 10:if(!a.layer)return[3,12];E=a.layer;F=b.allLayerViews.find(function(a){return a.layer.id===E.id});if(!("queryFeatures"in F))return[3,12];Q=E.createQuery();Q.objectIds=[a.attributes[E.objectIdField]];Q.returnGeometry=!0;return[4,F.queryFeatures(Q)];case 11:N=X.sent(),l=e.get(N,"features",0,"geometry"),X.label=12;case 12:if(e.isNone(l))return[2,null];K="point"===l.type?new J({xmin:l.x,
ymin:l.y,xmax:l.x,ymax:l.y,spatialReference:l.spatialReference}):l.extent;if(!K)return[2,null];P=G.canProject(K,g);if(!K.spatialReference.equals(g)&&P)K=G.project(K,g);else if(!P)return[2,null];k=k?k.union(K):K.clone();return[2,k]}})})}function C(a){if(a&&(!Array.isArray(a)||"number"!==typeof a[0])&&("object"===typeof a||Array.isArray(a)&&"object"===typeof a[0])){if("layer"in a&&a.layer&&a.layer.minScale&&a.layer.maxScale){var b=a.layer;return{min:b.minScale,max:b.maxScale}}if(Array.isArray(a)&&a.length&&
a.every(function(a){return"layer"in a})){for(var g=0,c=0,k=0;k<a.length;k++)(b=a[k].layer)&&b.minScale&&b.maxScale&&(g=b.minScale<g?b.minScale:g,c=b.maxScale>c?b.maxScale:c);return g&&c?{min:g,max:c}:null}}}function E(a,b){return h(this,void 0,void 0,function(){var g,c,k,l,e,f,p,h,d,w,u,B,q,V,T,D;return n(this,function(H){switch(H.label){case 0:if(!a||!b)return[2,new m({targetGeometry:new r,scale:0,rotation:0})];g=b.spatialReference;c=b.size;k=b.viewpoint;l=b.constraints;e=null;a instanceof m?e=a:
a.viewpoint?e=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&(e=a.target);f=null;if(!e||!e.targetGeometry)return[3,1];f=e.targetGeometry;return[3,10];case 1:if(!(a instanceof J))return[3,2];f=a;return[3,10];case 2:return a||a&&("center"in a||"extent"in a||"target"in a)?[4,I(a.center,b,g)]:[3,10];case 3:return(d=H.sent())?[3,5]:[4,I(a.extent,b,g)];case 4:d=H.sent(),H.label=5;case 5:return(h=d)?[3,7]:[4,I(a.target,b,g)];case 6:h=H.sent(),H.label=7;case 7:return(p=h)?[3,9]:[4,I(a,b,
g)];case 8:p=H.sent(),H.label=9;case 9:f=p,H.label=10;case 10:!f&&k&&k.targetGeometry?f=k.targetGeometry:!f&&b.extent&&(f=b.extent);w=z(f);g||(g=z(b.spatialReference||b.extent||f));if(!x.canProject(f,g)&&w&&!w.equals(g))return[2,null];u=A(t.vec2f64.create(),f.center?f.center:f);B=new r(v(u,u,w,g),g);q=null;q=e&&e.targetGeometry&&"point"===e.targetGeometry.type?e.scale:a.hasOwnProperty("scale")&&a.scale?a.scale:a.hasOwnProperty("zoom")&&-1!==a.zoom&&l&&l.effectiveLODs?l.zoomToScale(a.zoom):Array.isArray(f)||
"point"===f.type||"extent"===f.type&&0===f.width&&0===f.height?b.extent&&G.canProject(b.extent,g)?y(G.project(b.extent,g),c):b.extent?y(b.extent,c):k.scale:G.canProject(f.extent,g)?y(G.project(f.extent,g),c):y(f.extent,c);if(V=C(a))V.min&&V.min>q?q=V.min:V.max&&V.max<q&&(q=V.max);T=0;e?T=e.rotation:a.hasOwnProperty("rotation")?T=a.rotation:k&&(T=k.rotation);D=new m({targetGeometry:B,scale:q,rotation:T});l&&(D=l.fit(D),l.rotationEnabled||(D.rotation=T));return[2,D]}})})}function D(a,b){var g=a.targetGeometry,
c=b.targetGeometry;g.x=c.x;g.y=c.y;g.spatialReference=c.spatialReference;a.scale=b.scale;a.rotation=b.rotation;return a}function F(a,b,g){return g?l.vec2.set(a,.5*(b[0]-g.right+g.left),.5*(b[1]-g.bottom+g.top)):l.vec2.scale(a,b,.5)}function P(a,b,c,k){d.getTransform(a,b,c,k);return g.mat2d.invert(a,a)}function Q(a,b,g){var c=N(b);b=Math.abs(Math.cos(c));c=Math.abs(Math.sin(c));return l.vec2.set(a,Math.round(g[1]*c+g[0]*b),Math.round(g[1]*b+g[0]*c))}function L(a){var b=a.scale;a=a.targetGeometry.spatialReference;
a=B.isValid(a)?1/(39.37*p.getMetersPerUnitForSR(a)*96):1;return b*a}function N(b){return a.common.toRadian(b.rotation)||0}function M(a){return B.isValid(a)?39.37*p.getMetersPerUnitForSR(a)*96:1}function S(a){return a.isWrappable?(a=B.getInfo(a),a.valid[1]-a.valid[0]):0}Object.defineProperty(d,"__esModule",{value:!0});var O=b.wgs84Radius,K=180/Math.PI;d.extentToScale=y;d.create=E;d.copy=D;d.getAnchor=F;d.getExtent=function(){var a=t.vec2f64.create();return function(b,g,c){var k=g.targetGeometry;A(a,
k);g=.5*L(g);b.xmin=a[0]-g*c[0];b.ymin=a[1]-g*c[1];b.xmax=a[0]+g*c[0];b.ymax=a[1]+g*c[1];b.spatialReference=k.spatialReference;return b}}();d.setExtent=function(a,b,g,c,k){d.centerAt(a,b,g.center);a.scale=y(g,c);k&&k.constraints&&k.constraints.constrain(a);return a};d.getOuterExtent=function(){var a=t.vec2f64.create(),b=t.vec2f64.create();return function(g,c,k){A(a,c.targetGeometry);Q(b,c,k);k=.5*L(c);g.set({xmin:a[0]-k*b[0],ymin:a[1]-k*b[1],xmax:a[0]+k*b[0],ymax:a[1]+k*b[1],spatialReference:c.targetGeometry.spatialReference});
return g}}();d.getOuterSize=Q;d.getPaddingScreenTranslation=function(){var a=t.vec2f64.create();return function(b,g,c){return l.vec2.sub(b,l.vec2.scale(b,g,.5),F(a,g,c))}}();d.getPaddingMapTranslation=function(){var a=k.mat2df64.create(),b=t.vec2f64.create();return function(c,k,e,f){var H=L(k);k=N(k);l.vec2.set(b,H,H);g.mat2d.fromScaling(a,b);g.mat2d.rotate(a,a,k);g.mat2d.translate(a,a,d.getPaddingScreenTranslation(b,e,f));g.mat2d.translate(a,a,[0,f.top-f.bottom]);return l.vec2.set(c,a[4],a[5])}}();
d.getResolution=L;d.getResolutionToScaleFactor=M;d.getMatrix=function(){var a=t.vec2f64.create(),b=t.vec2f64.create(),c=t.vec2f64.create();return function(k,e,f,H,t,p){l.vec2.negate(a,e);l.vec2.scale(b,f,.5*p);l.vec2.set(c,1/H*p,-1/H*p);g.mat2d.identity(k);g.mat2d.translate(k,k,b);t&&g.mat2d.rotate(k,k,t);g.mat2d.scale(k,k,c);g.mat2d.translate(k,k,a);return k}}();d.getTransform=function(){var a=t.vec2f64.create();return function(b,g,c,k){var l=L(g),e=N(g);A(a,g.targetGeometry);return d.getMatrix(b,
a,c,l,e,k)}}();d.getTransformNoRotation=function(){var a=t.vec2f64.create();return function(b,g,c,k){var l=L(g);A(a,g.targetGeometry);return d.getMatrix(b,a,c,l,0,k)}}();d.getWorldWidth=S;d.getWorldScreenWidth=function(a,b){return Math.round(S(a)/b)};d.createAsync=function(a,b){return E(a,b)};d.angleBetween=function(){var a=t.vec2f64.create(),b=t.vec2f64.create(),g=[0,0,0];return function(c,k,e){l.vec2.subtract(a,c,k);l.vec2.normalize(a,a);l.vec2.subtract(b,c,e);l.vec2.normalize(b,b);l.vec2.cross(g,
a,b);c=Math.acos(l.vec2.dot(a,b)/(l.vec2.length(a)*l.vec2.length(b)))*K;0>g[2]&&(c=-c);isNaN(c)&&(c=0);return c}}();d.addPadding=function(){var a=t.vec2f64.create();return function(b,g,c,k){var l=b.targetGeometry;D(b,g);d.getPaddingMapTranslation(a,g,c,k);l.x+=a[0];l.y+=a[1];return b}}();d.removePadding=function(){var a=t.vec2f64.create();return function(b,g,c,k){var l=b.targetGeometry;D(b,g);d.getPaddingMapTranslation(a,g,c,k);l.x-=a[0];l.y-=a[1];return b}}();d.centerAt=function(){var a=t.vec2f64.create();
return function(b,g,c){D(b,g);g=b.targetGeometry;var k=z(c),l=z(g);A(a,c);v(a,a,k,l);g.x=a[0];g.y=a[1];return b}}();d.pixelSizeAt=function(a,b){return L(b)};d.resize=function(){var a=t.vec2f64.create();return function(b,g,c,k,e){e||(e="center");l.vec2.sub(a,c,k);l.vec2.scale(a,a,.5);c=a[0];k=a[1];switch(e){case "center":l.vec2.set(a,0,0);break;case "left":l.vec2.set(a,-c,0);break;case "top":l.vec2.set(a,0,k);break;case "right":l.vec2.set(a,c,0);break;case "bottom":l.vec2.set(a,0,-k);break;case "top-left":l.vec2.set(a,
-c,k);break;case "bottom-left":l.vec2.set(a,-c,-k);break;case "top-right":l.vec2.set(a,c,k);break;case "bottom-right":l.vec2.set(a,c,-k)}d.translateBy(b,g,a);return b}}();d.rotateBy=function(a,b,g){D(a,b);a.rotation+=g;return a};d.rotateTo=function(a,b,g){D(a,b);a.rotation=g;return a};d.scaleBy=function(){var a=t.vec2f64.create();return function(b,g,c,k,e){D(b,g);isNaN(c)||0===c||(d.toMap(a,k,g,e),b.scale=g.scale*c,d.toScreen(a,a,b,e),d.translateBy(b,b,l.vec2.set(a,a[0]-k[0],k[1]-a[1])));return b}}();
d.scaleTo=function(a,b,g){D(a,b);a.scale=g;return a};d.scaleAndRotateBy=function(){var a=t.vec2f64.create();return function(b,g,c,k,e,f){D(b,g);isNaN(c)||0===c||(d.toMap(a,e,g,f),b.scale=g.scale*c,b.rotation+=k,d.toScreen(a,a,b,f),d.translateBy(b,b,l.vec2.set(a,a[0]-e[0],e[1]-a[1])));return b}}();d.padAndScaleAndRotateBy=function(){var a=t.vec2f64.create(),b=t.vec2f64.create();return function(g,c,k,e,f,t,p){d.getPaddingScreenTranslation(b,t,p);l.vec2.add(a,f,b);return e?d.scaleAndRotateBy(g,c,k,e,
a,t):d.scaleBy(g,c,k,a,t)}}();d.toMap=function(){var a=k.mat2df64.create();return function(b,g,c,k){return l.vec2.transformMat2d(b,g,P(a,c,k,1))}}();d.toScreen=function(){var a=k.mat2df64.create();return function(b,g,c,k){return l.vec2.transformMat2d(b,g,d.getTransform(a,c,k,1))}}();d.translateBy=function(){var a=t.vec2f64.create(),b=k.mat2df64.create();return function(c,k,e){D(c,k);var f=L(k),H=c.targetGeometry;g.mat2d.fromRotation(b,N(k));g.mat2d.scale(b,b,t.vec2f64.fromValues(f,f));l.vec2.transformMat2d(a,
e,b);H.x+=a[0];H.y+=a[1];return c}}()})},"esri/core/libs/gl-matrix-2/common":function(){define(["require","exports","./math/common"],function(q,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.common=n})},"esri/core/libs/gl-matrix-2/mat2d":function(){define(["require","exports","./math/mat2d"],function(q,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.mat2d=n})},"esri/core/libs/gl-matrix-2/math/mat2d":function(){define(["require","exports","./common"],function(q,d,n){function h(c,e,
f){var p=e[0],b=e[1],a=e[2],g=e[3],k=e[4];e=e[5];var l=f[0],t=f[1],h=f[2],d=f[3],r=f[4];f=f[5];c[0]=p*l+a*t;c[1]=b*l+g*t;c[2]=p*h+a*d;c[3]=b*h+g*d;c[4]=p*r+a*f+k;c[5]=b*r+g*f+e;return c}function m(c,e,f){c[0]=e[0]-f[0];c[1]=e[1]-f[1];c[2]=e[2]-f[2];c[3]=e[3]-f[3];c[4]=e[4]-f[4];c[5]=e[5]-f[5];return c}Object.defineProperty(d,"__esModule",{value:!0});d.copy=function(c,e){c[0]=e[0];c[1]=e[1];c[2]=e[2];c[3]=e[3];c[4]=e[4];c[5]=e[5];return c};d.identity=function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=0;
c[5]=0;return c};d.set=function(c,e,f,p,b,a,g){c[0]=e;c[1]=f;c[2]=p;c[3]=b;c[4]=a;c[5]=g;return c};d.invert=function(c,e){var f=e[0],p=e[1],b=e[2],a=e[3],g=e[4];e=e[5];var k=f*a-p*b;if(!k)return null;k=1/k;c[0]=a*k;c[1]=-p*k;c[2]=-b*k;c[3]=f*k;c[4]=(b*e-a*g)*k;c[5]=(p*g-f*e)*k;return c};d.determinant=function(c){return c[0]*c[3]-c[1]*c[2]};d.multiply=h;d.rotate=function(c,e,f){var p=e[0],b=e[1],a=e[2],g=e[3],k=e[4];e=e[5];var l=Math.sin(f);f=Math.cos(f);c[0]=p*f+a*l;c[1]=b*f+g*l;c[2]=p*-l+a*f;c[3]=
b*-l+g*f;c[4]=k;c[5]=e;return c};d.scale=function(c,e,f){var p=e[1],b=e[2],a=e[3],g=e[4],k=e[5],l=f[0];f=f[1];c[0]=e[0]*l;c[1]=p*l;c[2]=b*f;c[3]=a*f;c[4]=g;c[5]=k;return c};d.translate=function(c,e,f){var p=e[0],b=e[1],a=e[2],g=e[3],k=e[4];e=e[5];var l=f[0];f=f[1];c[0]=p;c[1]=b;c[2]=a;c[3]=g;c[4]=p*l+a*f+k;c[5]=b*l+g*f+e;return c};d.fromRotation=function(c,e){var f=Math.sin(e);e=Math.cos(e);c[0]=e;c[1]=f;c[2]=-f;c[3]=e;c[4]=0;c[5]=0;return c};d.fromScaling=function(c,e){c[0]=e[0];c[1]=0;c[2]=0;c[3]=
e[1];c[4]=0;c[5]=0;return c};d.fromTranslation=function(c,e){c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=e[0];c[5]=e[1];return c};d.str=function(c){return"mat2d("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+")"};d.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],2)+Math.pow(c[5],2)+1)};d.add=function(c,e,f){c[0]=e[0]+f[0];c[1]=e[1]+f[1];c[2]=e[2]+f[2];c[3]=e[3]+f[3];c[4]=e[4]+f[4];c[5]=e[5]+f[5];return c};d.subtract=m;d.multiplyScalar=
function(c,e,f){c[0]=e[0]*f;c[1]=e[1]*f;c[2]=e[2]*f;c[3]=e[3]*f;c[4]=e[4]*f;c[5]=e[5]*f;return c};d.multiplyScalarAndAdd=function(c,e,f,p){c[0]=e[0]+f[0]*p;c[1]=e[1]+f[1]*p;c[2]=e[2]+f[2]*p;c[3]=e[3]+f[3]*p;c[4]=e[4]+f[4]*p;c[5]=e[5]+f[5]*p;return c};d.exactEquals=function(c,e){return c[0]===e[0]&&c[1]===e[1]&&c[2]===e[2]&&c[3]===e[3]&&c[4]===e[4]&&c[5]===e[5]};d.equals=function(c,e){var f=c[0],p=c[1],b=c[2],a=c[3],g=c[4];c=c[5];var k=e[0],l=e[1],t=e[2],h=e[3],d=e[4];e=e[5];return Math.abs(f-k)<=
n.EPSILON*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(p-l)<=n.EPSILON*Math.max(1,Math.abs(p),Math.abs(l))&&Math.abs(b-t)<=n.EPSILON*Math.max(1,Math.abs(b),Math.abs(t))&&Math.abs(a-h)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(g-d)<=n.EPSILON*Math.max(1,Math.abs(g),Math.abs(d))&&Math.abs(c-e)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))};d.mul=h;d.sub=m})},"esri/core/libs/gl-matrix-2/mat2df64":function(){define(["require","exports","./factories/mat2df64"],function(q,d,n){Object.defineProperty(d,
"__esModule",{value:!0});d.mat2df64=n})},"esri/core/libs/gl-matrix-2/factories/mat2df64":function(){define(["require","exports"],function(q,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){return[1,0,0,1,0,0]};d.clone=function(d){return[d[0],d[1],d[2],d[3],d[4],d[5]]};d.fromValues=function(d,h,m,c,e,f){return[d,h,m,c,e,f]};d.createView=function(d,h){return new Float64Array(d,h,6)}})},"esri/core/libs/gl-matrix-2/vec2":function(){define(["require","exports","./math/vec2"],function(q,
d,n){Object.defineProperty(d,"__esModule",{value:!0});d.vec2=n})},"esri/core/libs/gl-matrix-2/math/vec2":function(){define(["require","exports","./common"],function(q,d,n){function h(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];return a}function m(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];return a}function c(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];return a}function e(a,b){var g=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(g*g+a*a)}function f(a,b){var g=b[0]-a[0];a=b[1]-a[1];return g*g+a*a}function p(a){var b=a[0];a=a[1];
return Math.sqrt(b*b+a*a)}function b(a){var b=a[0];a=a[1];return b*b+a*a}Object.defineProperty(d,"__esModule",{value:!0});d.copy=function(a,b){a[0]=b[0];a[1]=b[1];return a};d.set=function(a,b,c){a[0]=b;a[1]=c;return a};d.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a};d.subtract=h;d.multiply=m;d.divide=c;d.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);return a};d.floor=function(a,b){a[0]=Math.floor(b[0]);a[1]=Math.floor(b[1]);return a};d.min=function(a,b,c){a[0]=Math.min(b[0],
c[0]);a[1]=Math.min(b[1],c[1]);return a};d.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);return a};d.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);return a};d.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a};d.scaleAndAdd=function(a,b,c,l){a[0]=b[0]+c[0]*l;a[1]=b[1]+c[1]*l;return a};d.distance=e;d.squaredDistance=f;d.length=p;d.squaredLength=b;d.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};d.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};
d.normalize=function(a,b){var g=b[0],c=b[1],g=g*g+c*c;0<g&&(g=1/Math.sqrt(g),a[0]=b[0]*g,a[1]=b[1]*g);return a};d.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};d.cross=function(a,b,c){b=b[0]*c[1]-b[1]*c[0];a[0]=a[1]=0;a[2]=b;return a};d.lerp=function(a,b,c,l){var g=b[0];b=b[1];a[0]=g+l*(c[0]-g);a[1]=b+l*(c[1]-b);return a};d.random=function(a,b){b=b||1;var g=2*n.RANDOM()*Math.PI;a[0]=Math.cos(g)*b;a[1]=Math.sin(g)*b;return a};d.transformMat2=function(a,b,c){var g=b[0];b=b[1];a[0]=c[0]*g+c[2]*b;a[1]=
c[1]*g+c[3]*b;return a};d.transformMat2d=function(a,b,c){var g=b[0];b=b[1];a[0]=c[0]*g+c[2]*b+c[4];a[1]=c[1]*g+c[3]*b+c[5];return a};d.transformMat3=function(a,b,c){var g=b[0];b=b[1];a[0]=c[0]*g+c[3]*b+c[6];a[1]=c[1]*g+c[4]*b+c[7];return a};d.transformMat4=function(a,b,c){var g=b[0];b=b[1];a[0]=c[0]*g+c[4]*b+c[12];a[1]=c[1]*g+c[5]*b+c[13];return a};d.rotate=function(a,b,c,l){var g=b[0]-c[0];b=b[1]-c[1];var k=Math.sin(l);l=Math.cos(l);a[0]=g*l-b*k+c[0];a[1]=g*k+b*l+c[1];return a};d.angle=function(a,
b){var g=a[0];a=a[1];var c=b[0];b=b[1];var e=g*g+a*a;0<e&&(e=1/Math.sqrt(e));var f=c*c+b*b;0<f&&(f=1/Math.sqrt(f));g=(g*c+a*b)*e*f;return 1<g?0:-1>g?Math.PI:Math.acos(g)};d.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};d.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]};d.equals=function(a,b){var g=a[0];a=a[1];var c=b[0];b=b[1];return Math.abs(g-c)<=n.EPSILON*Math.max(1,Math.abs(g),Math.abs(c))&&Math.abs(a-b)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};d.len=p;d.sub=h;d.mul=m;d.div=
c;d.dist=e;d.sqrDist=f;d.sqrLen=b})},"esri/core/libs/gl-matrix-2/vec2f64":function(){define(["require","exports","./factories/vec2f64"],function(q,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.vec2f64=n})},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["require","exports"],function(q,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){return[0,0]};d.clone=function(d){return[d[0],d[1]]};d.fromValues=function(d,h){return[d,h]};d.fromArray=function(d){for(var h=
[0,0],m=Math.min(2,d.length),c=0;c<m;++c)h[c]=d[c];return h};d.createView=function(d,h){return new Float64Array(d,h,2)};d.zeros=function(){return[0,0]};d.ones=function(){return[1,1]};d.unitX=function(){return[1,0]};d.unitY=function(){return[0,1]};d.ZEROS=[0,0];d.ONES=[1,1];d.UNIT_X=[1,0];d.UNIT_Y=[0,1]})},"esri/views/2d/FrameTask":function(){define(["require","exports","../../core/scheduling"],function(q,d,n){Object.defineProperty(d,"__esModule",{value:!0});q=function(){function d(d){var c=this;this.view=
d;this._frameTaskHandle=null;this.updateEnabled=this.stationary=!0;this.animationInProgress=!1;this.prepare=function(){c._updateParameters.state=c.view.state;c._updateParameters.stationary=c.view.stationary;c._updateParameters.pixelRatio=window.devicePixelRatio;c._updateParameters.renderingOptions=c.view.renderingOptions};this.update=function(){if(c.updateEnabled){var e=c.view,f=e.labelManager,p=c.graphicsView,b=e.allLayerViews.toArray().filter(function(a){return!("layerViews"in a)&&a.isFulfilled()}),
a=b.length,g=e.state,k=0;for(;k<b.length;k++)if(e=b[k],e.attached){var l=e.lastUpdateId;if(null==l||!c.stationary&&!e.moving)e.moving=!0,e.moveStart();l!==g.id&&e.viewChange();c.stationary&&e.moving&&(e.moving=!1,e.moveEnd());e.lastUpdateId=g.id}f&&f.lastUpdateId!==g.id&&(f.viewChange(),f.lastUpdateId=g.id);p&&p.lastUpdateId!==g.id&&(p.viewChange(),p.lastUpdateId=g.id);f=c._layerViewsTrash;for(p=0;p<f.length;p++)e=f[p],c._detachLayerView(e);for(p=f.length=0;p<a;p++)e=b[p],e.isFulfilled()&&!e.attached&&
c._attachLayerView(e);b=c._updateParameters;a=c._layerViewsToUpdate;e=a.slice();p=a.length=0;for(g=e;p<g.length;p++)e=g[p],"layerViews"in e?a.push(e):e.processUpdate(b);a=c._updatablesToUpdate;e=a.slice();for(a=a.length=0;a<e.length;a++)e[a].processUpdate(b);c.animationInProgress||0!==c._layerViewsToUpdate.length||0!==c._updatablesToUpdate.length||0!==f.length||c._frameTaskHandle.pause()}}}d.prototype.destroy=function(){this.stop()};d.prototype.start=function(){var d=this;this.stationary=this.view.stationary;
this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions};this._layerViewsTrash=[];this._layerViewsToUpdate=[];this._updatablesToUpdate=[];this._allLayerViewsChangeHandle=this.view.allLayerViews.on("change",function(c){Array.prototype.push.apply(d._layerViewsTrash,c.removed);d.requestFrame()});this._stationaryHandle=this.view.watch("stationary",function(c){d.stationary=c;d.requestFrame()});this._frameTaskHandle=
n.addFrameTask(this)};d.prototype.stop=function(){var d=this;this._frameTaskHandle&&(this.view.allLayerViews.forEach(function(c){"layerViews"in c||d._detachLayerView(c)}),this._stationaryHandle.remove(),this._allLayerViewsChangeHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._allLayerViewsChangeHandle=this._frameTaskHandle=this._layerViewsTrash=this._layerViewsToUpdate=null,this.stationary=!0,this.animationInProgress=!1)};d.prototype.requestLayerViewUpdate=
function(d){this._layerViewsToUpdate.push(d);this.requestFrame()};d.prototype.requestUpdate=function(d){this._updatablesToUpdate.push(d);this.requestFrame()};d.prototype.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.resume()};d.prototype._attachLayerView=function(d){d.attached||(d.attached=!0,d.attach(),this._updateParameters.stationary?d.moving=!1:(d.moving=!0,d.moveStart()))};d.prototype._detachLayerView=function(d){d.attached&&(d.detach(),d.attached=!1,d.moving=!1)};return d}();
d.default=q})},"esri/views/2d/layerViewModuleImportUtils":function(){define(["require","exports","../../core/Error","../../core/maybe","@dojo/framework/shim/Promise"],function(q,d,n,h){function m(){return Promise.all([new Promise(function(c,b){q(["../webgl"],c,b)}),new Promise(function(c,b){q(["./engine"],c,b)})])}Object.defineProperty(d,"__esModule",{value:!0});var c=function(){return m().then(function(){return new Promise(function(c,b){q(["./layers/TileLayerView2D"],c,b)})})},e=function(){return m().then(function(){return new Promise(function(c,
b){q(["./layers/FeatureLayerView2D"],c,b)})})},f={"base-dynamic":function(){return m().then(function(){return new Promise(function(c,b){q(["./layers/BaseDynamicLayerView2D"],c,b)})})},"base-tile":c,"bing-maps":c,csv:e,"geo-rss":function(){return m().then(function(){return new Promise(function(c,b){q(["./layers/GeoRSSLayerView2D"],c,b)})})},feature:e,geojson:e,graphics:function(){return m().then(function(){return new Promise(function(c,b){q(["./layers/GraphicsLayerView2D"],c,b)})})},group:function(){return m().then(function(){return new Promise(function(c,
b){q(["../layers/GroupLayerView"],c,b)})})},imagery:function(){return m().then(function(){return new Promise(function(c,b){q(["./layers/ImageryLayerView2D"],c,b)})})},kml:function(){return m().then(function(){return new Promise(function(c,b){q(["./layers/KMLLayerView2D"],c,b)})})},"map-image":function(){return m().then(function(){return new Promise(function(c,b){q(["./layers/MapImageLayerView2D"],c,b)})})},"map-notes":function(){return m().then(function(){return new Promise(function(c,b){q(["./layers/MapNotesLayerView2D"],
c,b)})})},"open-street-map":c,stream:function(){return m().then(function(){return new Promise(function(c,b){q(["./layers/StreamLayerView2D"],c,b)})})},tile:c,"vector-tile":function(){return m().then(function(){return new Promise(function(c,b){q(["./layers/VectorTileLayerView2D"],c,b)})})},"web-tile":c,wms:function(){return m().then(function(){return new Promise(function(c,b){q(["./layers/WMSLayerView2D"],c,b)})})},wmts:function(){return m().then(function(){return new Promise(function(c,b){q(["./layers/WMTSLayerView2D"],
c,b)})})},"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,scene:null,unknown:null,unsupported:null};d.layerView2DImporter={hasLayerViewModule:function(c){return h.isSome(f[c.type])},importLayerView:function(c){var b=f[c.type];if(!h.isSome(b))throw c=c.declaredClass?c.declaredClass.slice(c.declaredClass.lastIndexOf(".")+1):"Unknown",b=c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),new n(b+":view-not-supported",c+" is not supported in 2D");return b(c)}}})},
"esri/views/2d/MapViewConstraints":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Evented ../../core/accessorSupport/decorators ../../layers/support/LOD ./constraints/RotationConstraint ./constraints/ZoomConstraint".split(" "),function(q,d,n,h,m,c,e,f,p){return function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;a.lods=null;a.minScale=0;a.maxScale=0;a.minZoom=-1;a.maxZoom=-1;a.rotationEnabled=!0;a.snapToZoom=
!0;return a}n(a,b);a.prototype.initialize=function(){this.watch("_zoom, _rotation",this.emit.bind(this,"update"),!0)};a.prototype.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null)};Object.defineProperty(a.prototype,"_rotation",{get:function(){return new f({rotationEnabled:this.rotationEnabled})},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_defaultLODs",{get:function(){var a=this.get("view.defaultsFromMap.tileInfo"),b=this.get("view.spatialReference");
return a&&b&&a.spatialReference.equals(b)?a.lods:null},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"_zoom",{get:function(){return new p({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})},enumerable:!0,configurable:!0});a.prototype.canZoomInTo=function(a){var b=this.effectiveMaxScale;return 0===b||a>=b};a.prototype.canZoomOutTo=function(a){var b=this.effectiveMinScale;return 0===
b||a<=b};a.prototype.constrain=function(a,b){this._zoom.constrain(a,b);this._rotation.constrain(a,b);return a};a.prototype.fit=function(a){return this._zoom.fit(a)};a.prototype.zoomToScale=function(a){return this._zoom.zoomToScale(a)};a.prototype.scaleToZoom=function(a){return this._zoom.scaleToZoom(a)};a.prototype.snapScale=function(a){return this._zoom.snapToClosestScale(a)};a.prototype.snapToNextScale=function(a){return this._zoom.snapToNextScale(a)};a.prototype.snapToPreviousScale=function(a){return this._zoom.snapToPreviousScale(a)};
h([c.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],a.prototype,"effectiveLODs",void 0);h([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],a.prototype,"effectiveMinScale",void 0);h([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],a.prototype,"effectiveMaxScale",void 0);h([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],a.prototype,"effectiveMinZoom",void 0);h([c.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],a.prototype,"effectiveMaxZoom",void 0);
h([c.property({type:[e]})],a.prototype,"lods",void 0);h([c.property()],a.prototype,"minScale",void 0);h([c.property()],a.prototype,"maxScale",void 0);h([c.property()],a.prototype,"minZoom",void 0);h([c.property()],a.prototype,"maxZoom",void 0);h([c.property()],a.prototype,"rotationEnabled",void 0);h([c.property()],a.prototype,"snapToZoom",void 0);h([c.property()],a.prototype,"view",void 0);h([c.property({type:f,dependsOn:["rotationEnabled"]})],a.prototype,"_rotation",null);h([c.property({dependsOn:["view.spatialReference",
"view.defaultsFromMap.tileInfo"]})],a.prototype,"_defaultLODs",null);h([c.property({readOnly:!0,type:p,dependsOn:"lods minZoom maxZoom minScale maxScale snapToZoom _defaultLODs".split(" ")})],a.prototype,"_zoom",null);return a=h([c.subclass("esri.views.2d.MapViewConstraints")],a)}(c.declared(m.EventedAccessor))})},"esri/views/2d/constraints/RotationConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),
function(q,d,n,h,m,c){return function(e){function f(){var b=null!==e&&e.apply(this,arguments)||this;b.enabled=!0;b.rotationEnabled=!0;return b}n(f,e);d=f;f.prototype.constrain=function(b,a){if(!this.enabled||!a)return b;this.rotationEnabled||(b.rotation=a.rotation);return b};f.prototype.clone=function(){return new d({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};var d;h([c.property()],f.prototype,"enabled",void 0);h([c.property()],f.prototype,"rotationEnabled",void 0);return f=d=h([c.subclass("esri.views.2d.constraints.RotationConstraint")],
f)}(c.declared(m))})},"esri/views/2d/constraints/ZoomConstraint":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../layers/support/LOD".split(" "),function(q,d,n,h,m,c,e){return function(f){function d(a){a=f.call(this,a)||this;a._lodByScale={};a._scales=[];a.effectiveLODs=null;a.effectiveMinZoom=-1;a.effectiveMaxZoom=-1;a.effectiveMinScale=0;a.effectiveMaxScale=
0;a.lods=null;a.minZoom=-1;a.maxZoom=-1;a.minScale=0;a.maxScale=0;a.snapToZoom=!0;return a}n(d,f);b=d;d.prototype.initialize=function(){var a=this,b,c,l=this.lods;c=this.minScale;b=this.maxScale;var e=this.minZoom,f=this.maxZoom,d=-1,h=-1,p=!1,m=!1;0!==c&&0!==b&&c<b&&(b=[b,c],c=b[0],b=b[1]);if(l&&l.length){l=l.map(function(a){return a.clone()});l.sort(function(a,b){return b.scale-a.scale});l.forEach(function(a,b){return a.level=b});for(var n,x=0,v=l;x<v.length;x++){var z=v[x];!p&&0<c&&c>=z.scale&&
(d=z.level,p=!0);!m&&0<b&&b>=z.scale&&(h=n?n.level:-1,m=!0);n=z}-1===e&&(e=0===c?0:d);-1===f&&(f=0===b?l.length-1:h);e=Math.max(e,0);e=Math.min(e,l.length-1);f=Math.max(f,0);f=Math.min(f,l.length-1);e>f&&(c=[f,e],e=c[0],f=c[1]);c=l[e].scale;b=l[f].scale;l.splice(0,e);l.splice(f-e+1,l.length);l.forEach(function(b,g){a._lodByScale[b.scale]=b;a._scales[g]=b.scale});this._set("effectiveLODs",l);this._set("effectiveMinZoom",e);this._set("effectiveMaxZoom",f)}this._set("effectiveMinScale",c);this._set("effectiveMaxScale",
b)};d.prototype.constrain=function(a,b){if(b&&a.scale===b.scale)return a;var g=this.effectiveMinScale,c=this.effectiveMaxScale,e=a.targetGeometry,f=b&&b.targetGeometry,d=0!==g&&a.scale>g;if(0!==c&&a.scale<c||d)g=d?g:c,f&&(b=(g-b.scale)/(a.scale-b.scale),e.x=f.x+(e.x-f.x)*b,e.y=f.y+(e.y-f.y)*b),a.scale=g;this.snapToZoom&&this.effectiveLODs&&(a.scale=this._getClosestScale(a.scale));return a};d.prototype.fit=function(a){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(a,null);var b=this.scaleToZoom(a.scale);
a.scale=this.zoomToScale(.99<Math.abs(b-Math.floor(b))?Math.round(b):Math.floor(b));return a};d.prototype.zoomToScale=function(a){if(!this.effectiveLODs)return 0;a-=this.effectiveMinZoom;a=Math.max(0,a);var b=this._scales;if(0>=a)return b[0];if(a>=b.length)return b[b.length-1];var c=Math.round(a);return b[c]+(c-a)*(b[Math.round(a-.5)]-b[c])};d.prototype.scaleToZoom=function(a){if(!this.effectiveLODs)return-1;var b=this._scales,c,l;if(a>=b[0])return this.effectiveMinZoom;if(a<=b[b.length-1])return this.effectiveMaxZoom;
for(var e=0;e<b.length-1;e++){c=b[e];l=b[e+1];if(l===a)return b=e+this.effectiveMinZoom,b+1;if(c>a&&l<a)return b=e+this.effectiveMinZoom,b+1-(a-l)/(c-l)}};d.prototype.snapToClosestScale=function(a){if(!this.effectiveLODs)return a;a=this.scaleToZoom(a);return this.zoomToScale(Math.round(a))};d.prototype.snapToNextScale=function(a,b){void 0===b&&(b=.5);if(!this.effectiveLODs)return a*b;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a+1)};d.prototype.snapToPreviousScale=function(a,b){void 0===
b&&(b=2);if(!this.effectiveLODs)return a*b;a=Math.round(this.scaleToZoom(a));return this.zoomToScale(a-1)};d.prototype.clone=function(){return new b({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})};d.prototype._getClosestScale=function(a){if(this._lodByScale[a])return this._lodByScale[a].scale;a=this._scales.reduce(function(b,c){return Math.abs(c-a)<=Math.abs(b-a)?c:b},this._scales[0]);return this._lodByScale[a].scale};var b;h([c.property({readOnly:!0})],
d.prototype,"effectiveLODs",void 0);h([c.property({readOnly:!0})],d.prototype,"effectiveMinZoom",void 0);h([c.property({readOnly:!0})],d.prototype,"effectiveMaxZoom",void 0);h([c.property({readOnly:!0})],d.prototype,"effectiveMinScale",void 0);h([c.property({readOnly:!0})],d.prototype,"effectiveMaxScale",void 0);h([c.property({type:[e]})],d.prototype,"lods",void 0);h([c.property()],d.prototype,"minZoom",void 0);h([c.property()],d.prototype,"maxZoom",void 0);h([c.property()],d.prototype,"minScale",
void 0);h([c.property()],d.prototype,"maxScale",void 0);h([c.property()],d.prototype,"snapToZoom",void 0);return d=b=h([c.subclass("esri.views.2d.constraints.ZoomConstraint")],d)}(c.declared(m))})},"esri/views/2d/PaddedViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f64 ./viewpointUtils ./ViewState".split(" "),
function(q,d,n,h,m,c,e,f,p,b){var a=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.left=0;b.top=0;b.right=0;b.bottom=0;return b}n(b,a);h([c.property()],b.prototype,"left",void 0);h([c.property()],b.prototype,"top",void 0);h([c.property()],b.prototype,"right",void 0);h([c.property()],b.prototype,"bottom",void 0);return b=h([c.subclass("esri.views.2d.PaddedViewState.Padding")],b)}(c.declared(m));return function(g){function k(){for(var c=[],k=0;k<arguments.length;k++)c[k]=arguments[k];
var d=g.apply(this,c)||this;d.content=new b;d._updateContent=function(){var a=f.vec2f64.create();return function(){var b=d._get("size"),c=d._get("padding");if(b&&c){var g=d.content;e.vec2.set(a,c.left+c.right,c.top+c.bottom);e.vec2.subtract(a,b,a);e.vec2.copy(g.size,a);if(b=g.viewpoint)d.viewpoint=b}}}();d.watch(["size","padding"],d._updateContent,!0);d.padding=new a;d.size=[0,0];return d}n(k,g);Object.defineProperty(k.prototype,"padding",{set:function(b){this._set("padding",b||new a)},enumerable:!0,
configurable:!0});Object.defineProperty(k.prototype,"viewpoint",{set:function(a){if(a){var b=a.clone();this.content.viewpoint=a;p.addPadding(b,a,this._get("size"),this._get("padding"));a=this._viewpoint2D;var c=b.targetGeometry;a.center[0]=c.x;a.center[1]=c.y;a.rotation=b.rotation;a.scale=b.scale;a.spatialReference=c.spatialReference;this._update()}},enumerable:!0,configurable:!0});h([c.property()],k.prototype,"content",void 0);h([c.property({type:a})],k.prototype,"padding",null);h([c.property()],
k.prototype,"viewpoint",null);return k=h([c.subclass("esri.views.2d.PaddedViewState")],k)}(c.declared(b))})},"esri/views/2d/ViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/libs/gl-matrix-2/common ../../core/libs/gl-matrix-2/mat2d ../../core/libs/gl-matrix-2/mat2df32 ../../core/libs/gl-matrix-2/mat2df64 ../../core/libs/gl-matrix-2/mat3 ../../core/libs/gl-matrix-2/mat3f32 ../../core/libs/gl-matrix-2/vec2 ../../core/libs/gl-matrix-2/vec2f32 ../../core/libs/gl-matrix-2/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ./viewpointUtils".split(" "),
function(q,d,n,h,m,c,e,f,p,b,a,g,k,l,t,J,u,r,w){var B=[0,0];return function(e){function d(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b=e.apply(this,b)||this;b._viewpoint2D={center:u.vec2f64.create(),rotation:0,scale:0,spatialReference:null};b.center=[0,0];b.extent=new m.Extent;b.id=0;b.inverseTransform=g.mat2df64.create();b.resolution=0;b.rotation=0;b.scale=0;b.transform=g.mat2df64.create();b.transformNoRotation=g.mat2df64.create();b.displayMat3=l.mat3f32.create();b.displayViewMat3=
l.mat3f32.create();b.viewMat3=l.mat3f32.create();b.viewMat2d=a.mat2df32.create();b.worldScreenWidth=0;b.size=[0,0];return b}n(d,e);G=d;Object.defineProperty(d.prototype,"pixelRatio",{set:function(a){this._set("pixelRatio",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"size",{set:function(a){this._set("size",a);this._update()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"viewpoint",{set:function(a){if(a){var b=this._viewpoint2D,c=a.targetGeometry;
b.center[0]=c.x;b.center[1]=c.y;b.rotation=a.rotation;b.scale=a.scale;b.spatialReference=c.spatialReference}this._update()},enumerable:!0,configurable:!0});d.prototype.copy=function(a){var b=this.size,c=this.viewpoint;c&&b?(this.viewpoint=w.copy(c,a.viewpoint),this._set("size",t.vec2.copy(b,a.size))):(this.viewpoint=a.viewpoint.clone(),this._set("size",[a.size[0],a.size[1]]));this._set("pixelRatio",a.pixelRatio);return this};d.prototype.clone=function(){return new G({size:this.size,viewpoint:this.viewpoint.clone(),
pixelRatio:this.pixelRatio})};d.prototype.toMap=function(a,b,c){if(r.isVec2(b))return t.vec2.transformMat2d(a,b,this.inverseTransform);B[0]=b;B[1]=c;return t.vec2.transformMat2d(a,B,this.inverseTransform)};d.prototype.toScreen=function(a,b,c){if(r.isVec2(b))return t.vec2.transformMat2d(a,b,this.transform);B[0]=b;B[1]=c;return t.vec2.transformMat2d(a,B,this.transform)};d.prototype.toScreenNoRotation=function(a,b,c){if(r.isVec2(b))return t.vec2.transformMat2d(a,b,this.transformNoRotation);B[0]=b;B[1]=
c;return t.vec2.transformMat2d(a,B,this.transformNoRotation)};d.prototype.pixelSizeAt=function(a){return w.pixelSizeAt(a,this.viewpoint)};d.prototype.getScreenTransform=function(a,b){var c=this._viewpoint2D.center,g=this._get("pixelRatio")||1,k=this._get("size");w.getMatrix(a,c,k,b,0,g);return a};d.prototype._update=function(){var a=this._viewpoint2D,g=a.center,e=a.spatialReference,l=a.scale,f=a.rotation,a=this._get("pixelRatio")||1,d=this._get("size");this._set("id",this.id+1);var h=new c({targetGeometry:new m.Point(g[0],
g[1],e),scale:l,rotation:f});this._set("viewpoint",h);if(d&&e&&l)return this.resolution=w.getResolution(h),this.rotation=f,this.scale=l,this.spatialReference=e,t.vec2.copy(this.center,g),k.mat3.set(this.displayMat3,0!==d[0]?2/d[0]:0,0,0,0,0!==d[1]?-2/d[1]:0,0,-1,1,1),l=k.mat3.identity(this.viewMat3),g=J.vec2f32.fromValues(d[0]/2,d[1]/2),e=J.vec2f32.fromValues(-d[0]/2,-d[1]/2),f=p.common.toRadian(f),k.mat3.translate(l,l,g),k.mat3.rotate(l,l,f),k.mat3.translate(l,l,e),k.mat3.multiply(this.displayViewMat3,
this.displayMat3,l),l=b.mat2d.identity(this.viewMat2d),b.mat2d.translate(l,l,g),b.mat2d.rotate(l,l,f),b.mat2d.translate(l,l,e),w.getExtent(this.extent,h,d),w.getTransform(this.transform,h,d,a),b.mat2d.invert(this.inverseTransform,this.transform),w.getTransformNoRotation(this.transformNoRotation,h,d,a),this.worldScreenWidth=w.getWorldScreenWidth(this.spatialReference,this.resolution),this};var G;h([f.property({readOnly:!0})],d.prototype,"id",void 0);h([f.property({value:1,json:{write:!0}})],d.prototype,
"pixelRatio",null);h([f.property({json:{write:!0}})],d.prototype,"size",null);h([f.property({type:c,json:{write:!0}})],d.prototype,"viewpoint",null);return d=G=h([f.subclass("esri.views.2d.ViewState")],d)}(f.declared(e.JSONSupport))})},"esri/core/libs/gl-matrix-2/mat2df32":function(){define(["require","exports","./factories/mat2df32"],function(q,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.mat2df32=n})},"esri/core/libs/gl-matrix-2/factories/mat2df32":function(){define(["require","exports"],
function(q,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){var d=new Float32Array(6);d[0]=1;d[3]=1;return d};d.clone=function(d){var h=new Float32Array(6);h[0]=d[0];h[1]=d[1];h[2]=d[2];h[3]=d[3];h[4]=d[4];h[5]=d[5];return h};d.fromValues=function(d,h,m,c,e,f){var p=new Float32Array(6);p[0]=d;p[1]=h;p[2]=m;p[3]=c;p[4]=e;p[5]=f;return p};d.createView=function(d,h){return new Float32Array(d,h,6)}})},"esri/core/libs/gl-matrix-2/mat3":function(){define(["require","exports","./math/mat3"],
function(q,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.mat3=n})},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["require","exports","./common"],function(q,d,n){function h(c,e,f){var d=e[0],b=e[1],a=e[2],g=e[3],k=e[4],l=e[5],t=e[6],h=e[7];e=e[8];var u=f[0],r=f[1],w=f[2],m=f[3],n=f[4],x=f[5],v=f[6],z=f[7];f=f[8];c[0]=u*d+r*g+w*t;c[1]=u*b+r*k+w*h;c[2]=u*a+r*l+w*e;c[3]=m*d+n*g+x*t;c[4]=m*b+n*k+x*h;c[5]=m*a+n*l+x*e;c[6]=v*d+z*g+f*t;c[7]=v*b+z*k+f*h;c[8]=v*a+z*l+f*e;return c}function m(c,
e,f){c[0]=e[0]-f[0];c[1]=e[1]-f[1];c[2]=e[2]-f[2];c[3]=e[3]-f[3];c[4]=e[4]-f[4];c[5]=e[5]-f[5];c[6]=e[6]-f[6];c[7]=e[7]-f[7];c[8]=e[8]-f[8];return c}Object.defineProperty(d,"__esModule",{value:!0});d.fromMat4=function(c,e){c[0]=e[0];c[1]=e[1];c[2]=e[2];c[3]=e[4];c[4]=e[5];c[5]=e[6];c[6]=e[8];c[7]=e[9];c[8]=e[10];return c};d.copy=function(c,e){c[0]=e[0];c[1]=e[1];c[2]=e[2];c[3]=e[3];c[4]=e[4];c[5]=e[5];c[6]=e[6];c[7]=e[7];c[8]=e[8];return c};d.set=function(c,e,f,d,b,a,g,k,l,t){c[0]=e;c[1]=f;c[2]=d;
c[3]=b;c[4]=a;c[5]=g;c[6]=k;c[7]=l;c[8]=t;return c};d.identity=function(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};d.transpose=function(c,e){if(c===e){var f=e[1],d=e[2],b=e[5];c[1]=e[3];c[2]=e[6];c[3]=f;c[5]=e[7];c[6]=d;c[7]=b}else c[0]=e[0],c[1]=e[3],c[2]=e[6],c[3]=e[1],c[4]=e[4],c[5]=e[7],c[6]=e[2],c[7]=e[5],c[8]=e[8];return c};d.invert=function(c,e){var f=e[0],d=e[1],b=e[2],a=e[3],g=e[4],k=e[5],l=e[6],t=e[7];e=e[8];var h=e*g-k*t,u=-e*a+k*l,r=t*a-g*l,w=f*h+d*u+b*
r;if(!w)return null;w=1/w;c[0]=h*w;c[1]=(-e*d+b*t)*w;c[2]=(k*d-b*g)*w;c[3]=u*w;c[4]=(e*f-b*l)*w;c[5]=(-k*f+b*a)*w;c[6]=r*w;c[7]=(-t*f+d*l)*w;c[8]=(g*f-d*a)*w;return c};d.adjoint=function(c,e){var f=e[0],d=e[1],b=e[2],a=e[3],g=e[4],k=e[5],l=e[6],t=e[7];e=e[8];c[0]=g*e-k*t;c[1]=b*t-d*e;c[2]=d*k-b*g;c[3]=k*l-a*e;c[4]=f*e-b*l;c[5]=b*a-f*k;c[6]=a*t-g*l;c[7]=d*l-f*t;c[8]=f*g-d*a;return c};d.determinant=function(c){var e=c[3],f=c[4],d=c[5],b=c[6],a=c[7],g=c[8];return c[0]*(g*f-d*a)+c[1]*(-g*e+d*b)+c[2]*
(a*e-f*b)};d.multiply=h;d.translate=function(c,e,f){var d=e[0],b=e[1],a=e[2],g=e[3],k=e[4],l=e[5],t=e[6],h=e[7];e=e[8];var u=f[0];f=f[1];c[0]=d;c[1]=b;c[2]=a;c[3]=g;c[4]=k;c[5]=l;c[6]=u*d+f*g+t;c[7]=u*b+f*k+h;c[8]=u*a+f*l+e;return c};d.rotate=function(c,e,f){var d=e[0],b=e[1],a=e[2],g=e[3],k=e[4],l=e[5],t=e[6],h=e[7];e=e[8];var u=Math.sin(f);f=Math.cos(f);c[0]=f*d+u*g;c[1]=f*b+u*k;c[2]=f*a+u*l;c[3]=f*g-u*d;c[4]=f*k-u*b;c[5]=f*l-u*a;c[6]=t;c[7]=h;c[8]=e;return c};d.scale=function(c,e,f){var d=f[0],
b=f[1];f=f[2];c[0]=d*e[0];c[1]=d*e[1];c[2]=d*e[2];c[3]=b*e[3];c[4]=b*e[4];c[5]=b*e[5];c[6]=f*e[6];c[7]=f*e[7];c[8]=f*e[8];return c};d.scaleByVec2=function(c,e,f){var d=f[0];f=f[1];c[0]=d*e[0];c[1]=d*e[1];c[2]=d*e[2];c[3]=f*e[3];c[4]=f*e[4];c[5]=f*e[5];return c};d.fromTranslation=function(c,e){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=e[0];c[7]=e[1];c[8]=1;return c};d.fromRotation=function(c,e){var f=Math.sin(e);e=Math.cos(e);c[0]=e;c[1]=f;c[2]=0;c[3]=-f;c[4]=e;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};
d.fromScaling=function(c,e){c[0]=e[0];c[1]=0;c[2]=0;c[3]=0;c[4]=e[1];c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c};d.fromMat2d=function(c,e){c[0]=e[0];c[1]=e[1];c[2]=0;c[3]=e[2];c[4]=e[3];c[5]=0;c[6]=e[4];c[7]=e[5];c[8]=1;return c};d.fromQuat=function(c,e){var f=e[0],d=e[1],b=e[2];e=e[3];var a=f+f,g=d+d,k=b+b,f=f*a,l=d*a,d=d*g,t=b*a,h=b*g,b=b*k,a=e*a,g=e*g;e*=k;c[0]=1-d-b;c[3]=l-e;c[6]=t+g;c[1]=l+e;c[4]=1-f-b;c[7]=h-a;c[2]=t-g;c[5]=h+a;c[8]=1-f-d;return c};d.normalFromMat4Legacy=function(c,e){var f=e[0],
d=e[1],b=e[2],a=e[4],g=e[5],k=e[6],l=e[8],t=e[9];e=e[10];var h=e*g-k*t,u=-e*a+k*l,r=t*a-g*l,w=f*h+d*u+b*r;if(!w)return null;w=1/w;c[0]=h*w;c[1]=(-e*d+b*t)*w;c[2]=(k*d-b*g)*w;c[3]=u*w;c[4]=(e*f-b*l)*w;c[5]=(-k*f+b*a)*w;c[6]=r*w;c[7]=(-t*f+d*l)*w;c[8]=(g*f-d*a)*w;return c};d.normalFromMat4=function(c,e){var f=e[0],d=e[1],b=e[2],a=e[3],g=e[4],k=e[5],l=e[6],t=e[7],h=e[8],u=e[9],r=e[10],w=e[11],m=e[12],n=e[13],x=e[14];e=e[15];var v=f*k-d*g,z=f*l-b*g,q=f*t-a*g,y=d*l-b*k,I=d*t-a*k,C=b*t-a*l,E=h*n-u*m,D=
h*x-r*m,h=h*e-w*m,F=u*x-r*n,u=u*e-w*n,r=r*e-w*x,w=v*r-z*u+q*F+y*h-I*D+C*E;if(!w)return null;w=1/w;c[0]=(k*r-l*u+t*F)*w;c[1]=(l*h-g*r-t*D)*w;c[2]=(g*u-k*h+t*E)*w;c[3]=(b*u-d*r-a*F)*w;c[4]=(f*r-b*h+a*D)*w;c[5]=(d*h-f*u-a*E)*w;c[6]=(n*C-x*I+e*y)*w;c[7]=(x*q-m*C-e*z)*w;c[8]=(m*I-n*q+e*v)*w;return c};d.projection=function(c,e,f){c[0]=2/e;c[1]=0;c[2]=0;c[3]=0;c[4]=-2/f;c[5]=0;c[6]=-1;c[7]=1;c[8]=1;return c};d.str=function(c){return"mat3("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+
", "+c[7]+", "+c[8]+")"};d.frob=function(c){return Math.sqrt(Math.pow(c[0],2)+Math.pow(c[1],2)+Math.pow(c[2],2)+Math.pow(c[3],2)+Math.pow(c[4],2)+Math.pow(c[5],2)+Math.pow(c[6],2)+Math.pow(c[7],2)+Math.pow(c[8],2))};d.add=function(c,e,f){c[0]=e[0]+f[0];c[1]=e[1]+f[1];c[2]=e[2]+f[2];c[3]=e[3]+f[3];c[4]=e[4]+f[4];c[5]=e[5]+f[5];c[6]=e[6]+f[6];c[7]=e[7]+f[7];c[8]=e[8]+f[8];return c};d.subtract=m;d.multiplyScalar=function(c,e,f){c[0]=e[0]*f;c[1]=e[1]*f;c[2]=e[2]*f;c[3]=e[3]*f;c[4]=e[4]*f;c[5]=e[5]*f;
c[6]=e[6]*f;c[7]=e[7]*f;c[8]=e[8]*f;return c};d.multiplyScalarAndAdd=function(c,e,f,d){c[0]=e[0]+f[0]*d;c[1]=e[1]+f[1]*d;c[2]=e[2]+f[2]*d;c[3]=e[3]+f[3]*d;c[4]=e[4]+f[4]*d;c[5]=e[5]+f[5]*d;c[6]=e[6]+f[6]*d;c[7]=e[7]+f[7]*d;c[8]=e[8]+f[8]*d;return c};d.exactEquals=function(c,e){return c[0]===e[0]&&c[1]===e[1]&&c[2]===e[2]&&c[3]===e[3]&&c[4]===e[4]&&c[5]===e[5]&&c[6]===e[6]&&c[7]===e[7]&&c[8]===e[8]};d.equals=function(c,e){var f=c[0],d=c[1],b=c[2],a=c[3],g=c[4],k=c[5],l=c[6],t=c[7];c=c[8];var h=e[0],
u=e[1],r=e[2],w=e[3],m=e[4],G=e[5],x=e[6],v=e[7];e=e[8];return Math.abs(f-h)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(h))&&Math.abs(d-u)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(u))&&Math.abs(b-r)<=n.EPSILON*Math.max(1,Math.abs(b),Math.abs(r))&&Math.abs(a-w)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(g-m)<=n.EPSILON*Math.max(1,Math.abs(g),Math.abs(m))&&Math.abs(k-G)<=n.EPSILON*Math.max(1,Math.abs(k),Math.abs(G))&&Math.abs(l-x)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(t-
v)<=n.EPSILON*Math.max(1,Math.abs(t),Math.abs(v))&&Math.abs(c-e)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))};d.mul=h;d.sub=m})},"esri/core/libs/gl-matrix-2/mat3f32":function(){define(["require","exports","./factories/mat3f32"],function(q,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.mat3f32=n})},"esri/core/libs/gl-matrix-2/factories/mat3f32":function(){define(["require","exports"],function(q,d){Object.defineProperty(d,"__esModule",{value:!0});d.create=function(){var d=new Float32Array(9);
d[0]=1;d[4]=1;d[8]=1;return d};d.clone=function(d){var h=new Float32Array(9);h[0]=d[0];h[1]=d[1];h[2]=d[2];h[3]=d[3];h[4]=d[4];h[5]=d[5];h[6]=d[6];h[7]=d[7];h[8]=d[8];return h};d.fromValues=function(d,h,m,c,e,f,p,b,a){var g=new Float32Array(9);g[0]=d;g[1]=h;g[2]=m;g[3]=c;g[4]=e;g[5]=f;g[6]=p;g[7]=b;g[8]=a;return g};d.createView=function(d,h){return new Float32Array(d,h,9)}})},"esri/core/libs/gl-matrix-2/vec2f32":function(){define(["require","exports","./factories/vec2f32"],function(q,d,n){Object.defineProperty(d,
"__esModule",{value:!0});d.vec2f32=n})},"esri/core/libs/gl-matrix-2/factories/vec2f32":function(){define(["require","exports"],function(q,d){function n(){return new Float32Array(2)}function h(c,e){var b=new Float32Array(2);b[0]=c;b[1]=e;return b}function m(){return h(1,1)}function c(){return h(1,0)}function e(){return h(0,1)}Object.defineProperty(d,"__esModule",{value:!0});d.create=n;d.clone=function(c){var e=new Float32Array(2);e[0]=c[0];e[1]=c[1];return e};d.fromValues=h;d.createView=function(c,
e){return new Float32Array(c,e,2)};d.zeros=function(){return n()};d.ones=m;d.unitX=c;d.unitY=e;d.ZEROS=n();d.ONES=m();d.UNIT_X=c();d.UNIT_Y=e()})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["require","exports"],function(q,d){function n(d){return d instanceof Float32Array&&2<=d.length}function h(d){return Array.isArray(d)&&2<=d.length}Object.defineProperty(d,"__esModule",{value:!0});d.isVec2f32=n;d.isVec2f64=h;d.isVec2=function(d){return n(d)||h(d)}})},"esri/views/2d/tiling":function(){define("require exports ./tiling/TileInfoView ./tiling/TileKey ./tiling/TileQueue ./tiling/TileStrategy".split(" "),
function(q,d,n,h,m,c){Object.defineProperty(d,"__esModule",{value:!0});d.TileInfoView=n;d.TileKey=h;d.TileQueue=m;d.TileStrategy=c})},"esri/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),function(q,d,n,h,m,c,e){var f=new c("0/0/0/0"),p=function(){function a(a,b,c,e,d,f,h,w){this.x=a;this.ymin=b;this.ymax=c;this.invM=e;this.leftAdjust=d;this.rightAdjust=f;this.leftBound=h;this.rightBound=
w}a.create=function(b,c){var g;b[1]>c[1]&&(g=[c,b],b=g[0],c=g[1]);g=b[0];b=b[1];var e=c[0];c=c[1];var k=e-g,d=c-b,d=0!==d?k/d:0,f=(Math.ceil(b)-b)*d,h=(Math.floor(b)-b)*d;return new a(g,Math.floor(b),Math.ceil(c),d,0>k?f:h,0>k?h:f,0>k?e:g,0>k?g:e)};a.prototype.incrRow=function(){this.x+=this.invM};a.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};a.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return a}(),b=[[0,0],
[0,0],[0,0],[0,0]];return function(){function a(a,b){var c=this;this.tileInfo=a;this.fullExtent=b;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var g=a.lods.slice();g.sort(function(a,b){return b.scale-a.scale});var e=this._lodInfos=g.map(function(c){return h.create(a,c,b)});g.forEach(function(a,b){c._infoByLevel[a.level]=e[b];c._infoByScale[a.scale]=e[b];c.scales[b]=a.scale},this);this._wrap=a.isWrappable}Object.defineProperty(a.prototype,"spatialReference",{get:function(){return this.tileInfo.spatialReference},
enumerable:!0,configurable:!0});a.prototype.getLODInfoAt=function(a){return this._infoByLevel["number"===typeof a?a:a.level]};a.prototype.getTileBounds=function(a,b,c){void 0===c&&(c=!1);f.set(b);return(b=this._infoByLevel[f.level])?b.getTileBounds(a,f,c):a};a.prototype.getTileCoords=function(a,b,c){void 0===c&&(c=!1);f.set(b);return(b=this._infoByLevel[f.level])?b.getTileCoords(a,f,c):a};a.prototype.getTileCoverage=function(a,c,l){void 0===c&&(c=192);void 0===l&&(l="closest");l="closest"===l?this.getClosestInfoForScale(a.scale):
this.getSmallestInfoForScale(a.scale);var g=m.pool.acquire(l),k=this._wrap,d;d=Infinity;var f=-Infinity,h,B,n=g.spans;b[0][0]=b[0][1]=b[1][1]=b[3][0]=-c;b[1][0]=b[2][0]=a.size[0]+c;b[2][1]=b[3][1]=a.size[1]+c;for(c=0;c<b.length;c++){var x=b[c];a.toMap(x,x);x[0]=l.getColumnForX(x[0]);x[1]=l.getRowForY(x[1])}a=[];x=3;for(c=0;4>c;c++){if(b[c][1]!==b[x][1]){var v=p.create(b[c],b[x]);d=Math.min(v.ymin,d);f=Math.max(v.ymax,f);void 0===a[v.ymin]&&(a[v.ymin]=[]);a[v.ymin].push(v)}x=c}if(null==d||null==f||
100<f-d)return null;for(x=[];d<f;){null!=a[d]&&(x=x.concat(a[d]));h=Infinity;B=-Infinity;for(c=x.length-1;0<=c;c--)v=x[c],h=Math.min(h,v.getLeftCol()),B=Math.max(B,v.getRightCol());h=Math.floor(h);B=Math.floor(B);if(d>=l.first[1]&&d<=l.last[1])if(k)if(l.size[0]<l.worldSize[0])for(v=Math.floor(B/l.worldSize[0]),c=Math.floor(h/l.worldSize[0]);c<=v;c++)n.push(new e(d,Math.max(l.getFirstColumnForWorld(c),h),Math.min(l.getLastColumnForWorld(c),B)));else n.push(new e(d,h,B));else h>l.last[0]||B<l.first[0]||
(h=Math.max(h,l.first[0]),B=Math.min(B,l.last[0]),n.push(new e(d,h,B)));d+=1;for(c=x.length-1;0<=c;c--)v=x[c],v.ymax>=d?v.incrRow():x.splice(c,1)}return g};a.prototype.getTileParentId=function(a){f.set(a);a=this._lodInfos.indexOf(this._infoByLevel[f.level])-1;if(0>a)return null;this._getTileIdAtLOD(f,this._lodInfos[a],f);return f.id};a.prototype.getTileResolution=function(a){return(a=this._infoByLevel["object"===typeof a?a.level:a])?a.resolution:-1};a.prototype.getTileScale=function(a){return(a=this._infoByLevel[a.level])?
a.scale:-1};a.prototype.intersects=function(a,b){f.set(b);b=this._infoByLevel[f.level];var c=a.lodInfo;if(c.resolution>b.resolution){this._getTileIdAtLOD(f,c,f);for(var g=c.denormalizeCol(f.col,f.world),e=0,k=a.spans;e<k.length;e++){var d=k[e];if(d.row===f.row&&d.colFrom<=g&&d.colTo>=g)return!0}}if(c.resolution<b.resolution){k=a.spans.reduce(function(a,b){a[0]=Math.min(a[0],b.row);a[1]=Math.max(a[1],b.row);a[2]=Math.min(a[2],b.colFrom);a[3]=Math.max(a[3],b.colTo);return a},[Infinity,-Infinity,Infinity,
-Infinity]);a=k[0];var g=k[1],e=k[2],k=k[3],h=b.denormalizeCol(f.col,f.world),d=c.getColumnForX(b.getXForColumn(h)),p=c.getRowForY(b.getYForRow(f.row)),h=c.getColumnForX(b.getXForColumn(h+1))-1;b=c.getRowForY(b.getYForRow(f.row+1))-1;return!(d>k||h<e||p>g||b<a)}var m=c.denormalizeCol(f.col,f.world);return a.spans.some(function(a){return a.row===f.row&&a.colFrom<=m&&a.colTo>=m})};a.prototype.normalizeBounds=function(a,b,c){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];this._wrap&&(b=n.getInfo(this.tileInfo.spatialReference),
c=-c*(b.valid[1]-b.valid[0]),a[0]+=c,a[2]+=c);return a};a.prototype.getSmallestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];if(a>b[0])return this._infoByScale[b[0]];for(var c=1;c<b.length-1;c++)if(a>b[c]+1E-6)return this._infoByScale[b[c-1]];return this._infoByScale[b[b.length-1]]};a.prototype.getClosestInfoForScale=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a];a=b.reduce(function(b,c){return Math.abs(c-a)<Math.abs(b-
a)?c:b},b[0]);return this._infoByScale[a]};a.prototype.scaleToLevel=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a].level;for(var c=b.length-1;0<=c;c--)if(a<b[c])return c===b.length-1?this._infoByScale[b[b.length-1]].level:this._infoByScale[b[c]].level+(b[c]-a)/(b[c]-b[c+1]);return this._infoByScale[b[0]].level};a.prototype.scaleToZoom=function(a){return this.tileInfo.scaleToZoom(a)};a.prototype._getTileIdAtLOD=function(a,b,c){var g=this._infoByLevel[c.level];a.set(c);
if(b.resolution<g.resolution)return null;if(b.resolution===g.resolution)return a;a.level=b.level;a.col=Math.floor(c.col*g.resolution/b.resolution+.01);a.row=Math.floor(c.row*g.resolution/b.resolution+.01);return a};return a}()})},"esri/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(q,d,n,h){function m(c,d,h){c[0]=d;c[1]=h;return c}var c=new h("0/0/0/0");return function(){function e(c,e,b,a,g,d,l,h,m,u,r,w){this.level=
c;this.resolution=e;this.scale=b;this.origin=a;this.first=g;this.last=d;this.size=l;this.norm=h;this.worldStart=m;this.worldEnd=u;this.worldSize=r;this.wrap=w}e.create=function(c,d,b){var a=n.getInfo(c.spatialReference),g=[c.origin.x,c.origin.y],k=[c.size[0]*d.resolution,c.size[1]*d.resolution],l=[-Infinity,-Infinity],f=[Infinity,Infinity],h=[Infinity,Infinity];b&&(m(l,Math.max(0,Math.floor((b.xmin-g[0])/k[0])),Math.max(0,Math.floor((g[1]-b.ymax)/k[1]))),m(f,Math.max(0,Math.floor((b.xmax-g[0])/k[0])),
Math.max(0,Math.floor((g[1]-b.ymin)/k[1]))),m(h,f[0]-l[0]+1,f[1]-l[1]+1));var p;c.isWrappable?(c=[Math.ceil(Math.round(2*a.origin[1]/d.resolution)/c.size[0]),h[1]],a=[Math.floor((a.origin[0]-g[0])/k[0]),l[1]],b=[c[0]+a[0]-1,f[1]],p=!0):(a=l,b=f,c=h,p=!1);return new e(d.level,d.resolution,d.scale,g,l,f,h,k,a,b,c,p)};e.prototype.normalizeCol=function(c){if(!this.wrap)return c;var e=this.worldSize[0];return 0>c?e-1-Math.abs((c+1)%e):c%e};e.prototype.denormalizeCol=function(c,e){return this.wrap?this.worldSize[0]*
e+c:c};e.prototype.getWorldForColumn=function(c){return this.wrap?Math.floor(c/this.worldSize[0]):0};e.prototype.getFirstColumnForWorld=function(c){return c*this.worldSize[0]+this.first[0]};e.prototype.getLastColumnForWorld=function(c){return c*this.worldSize[0]+this.first[0]+this.size[0]-1};e.prototype.getColumnForX=function(c){return(c-this.origin[0])/this.norm[0]};e.prototype.getXForColumn=function(c){return this.origin[0]+c*this.norm[0]};e.prototype.getRowForY=function(c){return(this.origin[1]-
c)/this.norm[1]};e.prototype.getYForRow=function(c){return this.origin[1]-c*this.norm[1]};e.prototype.getTileBounds=function(e,d,b){void 0===b&&(b=!1);c.set(d);var a=b?c.col:this.denormalizeCol(c.col,c.world),g=c.row;d=this.getXForColumn(a);b=this.getYForRow(g+1);a=this.getXForColumn(a+1);g=this.getYForRow(g);e[0]=d;e[1]=b;e[2]=a;e[3]=g;return e};e.prototype.getTileCoords=function(e,d,b){void 0===b&&(b=!1);c.set(d);d=b?c.col:this.denormalizeCol(c.col,c.world);Array.isArray(e)?m(e,this.getXForColumn(d),
this.getYForRow(c.row)):(e.x=this.getXForColumn(d),e.y=this.getYForRow(c.row));return e};return e}()})},"esri/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(q,d,n){return function(){function d(d,c,e,f){this.set(d,c,e,f)}d.getId=function(d,c,e,f){return"object"===typeof d?d.level+"/"+d.row+"/"+d.col+"/"+d.world:d+"/"+c+"/"+e+"/"+f};Object.defineProperty(d.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"id",{get:function(){return this.toString()},enumerable:!0,configurable:!0});d.prototype.equals=function(d){return this.level===d.level&&this.row===d.row&&this.col===d.col&&this.world===d.world};d.prototype.release=function(){this.world=this.col=this.row=this.level=0};d.prototype.set=function(d,c,e,f){null==d?this.world=this.col=this.row=this.level=0:"object"===typeof d?(this.level=d.level||0,this.row=d.row||0,this.col=d.col||0,this.world=d.world||0):"string"===typeof d?(d=d.split("/"),c=d[1],e=d[2],
f=d[3],this.level=parseFloat(d[0]),this.row=parseFloat(c),this.col=parseFloat(e),this.world=parseFloat(f)):(this.level=+d,this.row=+c,this.col=+e,this.world=+f||0);return this};d.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};d.prototype.getChildKeys=function(){var h=this.level+1,c=this.row<<1,e=this.col<<1,f=this.world;return[new d(h,c,e,f),new d(h,c,e+1,f),new d(h,c+1,e,f),new d(h,c+1,e+1,f)]};d.prototype.compareRowMajor=function(d){return this.row<d.row?
-1:this.row>d.row?1:this.col<d.col?-1:this.col>d.col?1:0};d.pool=new n(d,!0,null,25,50);return d}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["require","exports","../../../core/ObjectPool"],function(q,d,n){return function(){function d(d){this.lodInfo=d;this.spans=[]}d.prototype.release=function(){};d.prototype.forEach=function(d,c){var e=this.spans,f=this.lodInfo,h=f.level;if(0!==e.length)for(var b=0;b<e.length;b++)for(var a=e[b],g=a.row,k=a.colTo,a=a.colFrom;a<=k;a++)d.call(c,h,g,
f.normalizeCol(a),f.getWorldForColumn(a))};d.pool=new n(d,!0);return d}()})},"esri/views/2d/tiling/TileSpan":function(){define(["require","exports","../../../core/ObjectPool"],function(q,d,n){return function(){function d(d,c,e){this.row=d;this.colFrom=c;this.colTo=e}d.pool=new n(d,!0);return d}()})},"esri/views/2d/tiling/TileQueue":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/vec2 ../../support/QueueProcessor".split(" "),
function(q,d,n,h,m,c,e,f,p,b){function a(a,b){a.length=0;b.forEach(function(b){return a.push(b)});return a}var g=new Set,k=[],l=new Map,t=[0,0];return function(e){function d(a){a=e.call(this,a)||this;a._keyToItem=new Map;a.concurrency=6;a.strategy="scale-first";a.tileInfoView=null;return a}n(d,e);d.prototype.initialize=function(){var a=this,c=this.concurrency,g=this.process,d="scale-first"===this.strategy?this._peekByScaleFirst.bind(this):this._peekByCenterFirst.bind(this);this._queue=new b.QueueProcessor({concurrency:c,
process:function(b,c){b=a._keyToItem.get(b);return g(b,{signal:c})},peeker:d})};d.prototype.destroy=function(){this.clear();this._queue.destroy();this._queue=null};Object.defineProperty(d.prototype,"length",{get:function(){return this._queue?this._queue.length:0},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"onGoingCount",{get:function(){return this._keyToItem.size},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"updating",{get:function(){return 0<this.length||
0<this.onGoingCount},enumerable:!0,configurable:!0});d.prototype.abort=function(a){this._queue.abort("string"===typeof a?a:a.id)};d.prototype.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};d.prototype.get=function(a){return this._queue.get("string"===typeof a?a:a.id)};d.prototype.has=function(a){return"string"===typeof a?this._keyToItem.has(a):this._keyToItem.has(a.id)};d.prototype.isOngoing=function(a){a="string"===typeof a?a:a.id;return this.has(a)&&
this._queue.isOngoing(a)};d.prototype.pause=function(){this._queue.pause()};d.prototype.push=function(a){return c(this,void 0,void 0,function(){var b,c,g,d=this;return m(this,function(e){b=a.key.id;if(this.has(b))return[2,this.get(b)];c=this._queue.push(b);g=function(){d._keyToItem.delete(b);d.notifyChange("updating")};this._keyToItem.set(b,a);c.then(g,g);this.notifyChange("updating");return[2,c]})})};d.prototype.reset=function(){this._queue.reset();this.notifyChange("updating")};d.prototype.resume=
function(){this._queue.resume()};d.prototype._peekByScaleFirst=function(b){if(!this.state)return b[0];for(var c=this.tileInfoView,d=Number.NEGATIVE_INFINITY,e=Number.POSITIVE_INFINITY,f=0;f<b.length;f++){var h=this._keyToItem.get(b[f]),t=this.tileInfoView.getTileScale(h.key);l.has(t)||(l.set(t,[]),d=Math.max(t,d),e=Math.min(t,e));l.get(t).push(h.key);g.add(t)}var r=this.state.scale;l.has(r)||(a(k,g),k.sort(),r=k.reduce(function(a,b){return Math.abs(b-r)<Math.abs(a-r)?b:a},k[0]));r=Math.min(r,d);r=
Math.max(r,e);b=l.get(r);var p=c.getClosestInfoForScale(r),m=p.getColumnForX(this.state.center[0]),u=p.getRowForY(this.state.center[1]);b.sort(function(a,b){var c=p.denormalizeCol(a.col,a.world),g=p.denormalizeCol(b.col,b.world);return Math.sqrt((m-c)*(m-c)+(u-a.row)*(u-a.row))-Math.sqrt((m-g)*(m-g)+(u-b.row)*(u-b.row))});g.clear();l.clear();return b[0].id};d.prototype._peekByCenterFirst=function(a){if(!this.state)return a[0];for(var b=this.tileInfoView,c=this.state.center,g=Number.POSITIVE_INFINITY,
d=null,e=0;e<a.length;e++){var l=this._keyToItem.get(a[e]);b.getTileCoords(t,l.key);var k=p.vec2.distance(t,c);k<g&&(g=k,d=l.key)}return d.id};h([f.property({constructOnly:!0})],d.prototype,"concurrency",void 0);h([f.property({constructOnly:!0})],d.prototype,"process",void 0);h([f.property()],d.prototype,"state",void 0);h([f.property({constructOnly:!0})],d.prototype,"strategy",void 0);h([f.property({constructOnly:!0})],d.prototype,"tileInfoView",void 0);h([f.property({readOnly:!0})],d.prototype,"updating",
null);return d=h([f.subclass("esri.views.2d.tiling.TileQueue")],d)}(f.declared(e))})},"esri/views/support/QueueProcessor":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/scheduling".split(" "),function(q,d,n,h,m,c,e,f){Object.defineProperty(d,"__esModule",{value:!0});var p=function(){return function(b,a){this.item=b;this.controller=a;this.promise=null}}();q=function(){function b(a){var b=
this;this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;a.concurrency&&(this.concurrency=a.concurrency);this._queue=new e({peeker:a.peeker});this.process=a.process;var c=a.scheduler;a.task&&m.isSome(c)&&(this._task=c.registerTask(a.task,function(a){return b.update(a)},function(){return b.needsUpdate()}))}b.prototype.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=
null);this._task&&(this._task.remove(),this._task=null)};Object.defineProperty(b.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,configurable:!0});b.prototype.abort=function(a){(a=this._controllers.get(a))&&a.abort()};b.prototype.clear=function(){this._queue.clear();var a=[];this._controllers.forEach(function(b){return a.push(b)});this._controllers.clear();a.forEach(function(a){return a.abort()});this._processingItems.clear();this._cancelNext()};
b.prototype.get=function(a){return(a=this._deferreds.get(a))?a.promise:void 0};b.prototype.isOngoing=function(a){return this._processingItems.has(a)};b.prototype.has=function(a){return this._deferreds.has(a)};b.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};b.prototype.push=function(a){return h(this,void 0,void 0,function(){var b,d,e,f,h,p,r=this;return n(this,function(g){if(b=this.get(a))return[2,b];e=c.createAbortController();f=function(){var b=r._processingItems.get(a);
b&&b.controller.abort();h();d.reject(c.createAbortError())};h=function(){p.remove();r._deferreds.delete(a);r._controllers.delete(a);r._queue.remove(a);r._processingItems.delete(a);r._scheduleNext()};p=c.onAbortOrThrow(e.signal,f);d=c.createDeferred();this._deferreds.set(a,d);this._controllers.set(a,e);d.promise.then(h,h);this._queue.push(a);this._scheduleNext();return[2,d.promise]})})};b.prototype.reset=function(){var a=[];this._processingItems.forEach(function(b){return a.push(b)});this._processingItems.clear();
for(var b=0;b<a.length;b++){var c=a[b];this._queue.push(c.item);c.controller.abort()}this._scheduleNext()};b.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};b.prototype.needsUpdate=function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency};b.prototype.update=function(a){for(;!a.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),a.madeProgress()};b.prototype._scheduleNext=
function(){var a=this;this._task||this._isPaused||this._schedule||(this._schedule=f.schedule(function(){a._schedule=null;a._next()}))};b.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};b.prototype._cancelNext=function(){this._schedule&&(this._schedule.remove(),this._schedule=null)};b.prototype._processResult=function(a,b){this._canProcessFulfillment(a)&&(this._scheduleNext(),this._deferreds.get(a.item).resolve(b))};
b.prototype._processError=function(a,b){this._canProcessFulfillment(a)&&(this._scheduleNext(),this._deferreds.get(a.item).reject(b))};b.prototype._canProcessFulfillment=function(a){return this._deferreds.get(a.item)&&this._processingItems.get(a.item)===a?!0:!1};b.prototype._process=function(a){var b=this;if(!m.isNone(a)){var d,e=c.createAbortController(),f=new p(a,e);this._processingItems.set(a,f);try{d=this.process(a,e.signal)}catch(J){this._processError(f,J)}d&&"function"===typeof d.then?(f.promise=
d,d.then(function(a){return b._processResult(f,a)},function(a){return b._processError(f,a)})):this._processResult(f,d)}};Object.defineProperty(b.prototype,"test",{get:function(){var a=this;return{update:function(b){return a.update(b)}}},enumerable:!0,configurable:!0});return b}();d.QueueProcessor=q})},"esri/core/Queue":function(){define(["require","exports"],function(q,d){return function(){function d(d){this._items=[];this._itemSet=new Set;this._peeker=function(d){return d[0]};this._length=0;d&&d.peeker&&
(this._peeker=d.peeker)}Object.defineProperty(d.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});d.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};d.prototype.peek=function(){if(0!==this._length)return this._peeker(this._items)};d.prototype.push=function(d){this.contains(d)||this._add(d)};d.prototype.contains=function(d){return 0<this._length&&this._itemSet.has(d)};d.prototype.pop=function(){if(0!==this._length){var d=this.peek();
this._remove(d);return d}};d.prototype.remove=function(d){this.contains(d)&&this._remove(d)};d.prototype._add=function(d){this._items.push(d);this._itemSet.add(d);this._length++};d.prototype._remove=function(d){this._itemSet.delete(d);this._items.splice(this._items.indexOf(d),1);this._length--};return d}()})},"esri/views/2d/tiling/TileStrategy":function(){define("require exports ../../../core/tsSupport/extendsHelper ./TileCache ./TileCoverage ./TileKey".split(" "),function(q,d,n,h,m,c){var e=new c(0,
0,0,0),f=new Map,p=[],b=[];return function(){function a(a){var b=this;this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=a.acquireTile;this.releaseTile=a.releaseTile;this.tileInfoView=a.tileInfoView;this.resampling=null==a.resampling||!!a.resampling;a.cachePolicy&&(this.cachePolicy=a.cachePolicy);a.coveragePolicy&&(this.coveragePolicy=a.coveragePolicy);null!=a.buffer&&
(this.buffer=a.buffer);a.cacheSize&&(this._tileCache=new h.default(a.cacheSize,this.tileInfoView,function(a){b.releaseTile(a)}))}a.prototype.destroy=function(){this.tileIndex.clear()};a.prototype.update=function(a){var c=this,g=this.resampling,d=this.tileIndex,h=this.tileInfoView.getTileCoverage(a.state,this.buffer,this.coveragePolicy);b.length=0;p.length=0;f.clear();if(h){var u=this.tileInfoView.tileInfo,r=u.minScale,w=u.maxScale,B=h.spans,n=h.lodInfo,x=n.level,v=a.state,q=v.scale,u=v.center,v=v.resolution,
A=!a.stationary&&q>this._previousScale;this._previousScale=q;this.tiles.length=0;if(!g&&(q>r||q<w))return this.tiles.length=0,f.clear(),d.forEach(function(a){c.releaseTile(a)}),d.clear(),b.length=0,p.length=0,f.clear(),m.pool.release(h),!0;d.forEach(function(a){return a.visible=!0});w=r=0;if(0<B.length)for(q=0;q<B.length;q++){a=B[q];for(var y=a.row,I=a.colTo,C=a.colFrom;C<=I;C++)if(r++,a=e.set(x,y,n.normalizeCol(C),n.getWorldForColumn(C)).id,d.has(a))g=d.get(a),g.isReady?(f.set(a,g),w++):A||this._addParentTile(a,
f);else{g=void 0;if(this._tileCache&&this._tileCache.has(a)){if(g=this._tileCache.pop(a),this.tileIndex.set(a,g),g.isReady){f.set(a,g);w++;continue}}else g=this.acquireTile(e),this.tileIndex.set(a,g);A||this._addParentTile(a,f)}}var E=w===r;d.forEach(function(a,g){e.set(g);if(!f.has(g)){var d=c.tileInfoView.intersects(h,e);!d||!A&&E?"purge"===c.cachePolicy?e.level===x&&d||p.push(g):(e.level>x||!d)&&p.push(g):a.isReady?b.push(g):e.level>x&&p.push(g)}});for(B=0;B<b.length;B++)a=b[B],(g=d.get(a))&&g.isReady&&
f.set(a,g);for(B=0;B<p.length;B++)a=p[B],g=d.get(a),this._tileCache?this._tileCache.add(g):this.releaseTile(g),d["delete"](a);f.forEach(function(a){return c.tiles.push(a)});d.forEach(function(a){f.has(a.key.id)||(a.visible=!1)});this._tileCache&&this._tileCache.prune(x,u,v);m.pool.release(h);return E}};a.prototype.clear=function(a){var b=this;void 0===a&&(a=!0);var c=this.tileIndex;a&&c.forEach(function(a){b.releaseTile(a)});c.clear()};a.prototype._addParentTile=function(a,b){for(var c=null;;){a=
this.tileInfoView.getTileParentId(a);if(!a)break;if(this.tileIndex.has(a)){if((c=this.tileIndex.get(a))&&c.isReady){b.has(c.key.id)||b.set(c.key.id,c);break}}else if(this._tileCache&&this._tileCache.has(a)&&(c=this._tileCache.pop(a),this.tileIndex.set(a,c),c&&c.isReady)){b.has(c.key.id)||b.set(c.key.id,c);break}}};return a}()})},"esri/views/2d/tiling/TileCache":function(){define(["require","exports","../../../core/libs/gl-matrix-2/vec2"],function(q,d,n){Object.defineProperty(d,"__esModule",{value:!0});
q=function(){function d(d,c,e){this.maxSize=d;this.tileInfoView=c;this.removedFunc=e;this._tilePerId=new Map;this._tileKeysPerLevel=[]}d.prototype.has=function(d){return this._tilePerId.has(d)};d.prototype.get=function(d){return this._tilePerId.get(d)};d.prototype.pop=function(d){var c=this._tilePerId.get(d);if(!c)return null;var e=this._tileKeysPerLevel[c.key.level];this._tilePerId["delete"](d);for(var f=0;f<e.length;f++)if(e[f].id===d){e.splice(f,1);break}c.visible=!0;return c};d.prototype.add=
function(d){d.visible=!1;var c=d.key,e=c.id;this._tilePerId.has(e)||(this._tilePerId.set(e,d),d=c.level,this._tileKeysPerLevel[d]||(this._tileKeysPerLevel[d]=[]),this._tileKeysPerLevel[d].push(c))};d.prototype.prune=function(d,c,e){var f=this._tilePerId.size;if(!(f<=this.maxSize)){for(var h=this._tileKeysPerLevel.length-1;f>this.maxSize&&0<=h;)h!==d&&(f=this._pruneAroundCenterTile(f,c,e,h)),h--;f>this.maxSize&&(f=this._pruneAroundCenterTile(f,c,e,d))}};d.prototype._pruneAroundCenterTile=function(d,
c,e,f){f=this._tileKeysPerLevel[f];if(!f||0===f.length)return d;var h=this.tileInfoView.tileInfo,b=h.size,a=h.origin,g=e*b[0],k=e*b[1],l=[0,0],t=[0,0];for(f.sort(function(b,d){l[0]=a.x+g*(b.col+.5);l[1]=a.y-k*(b.row+.5);t[0]=a.x+g*(d.col+.5);t[1]=a.y-k*(d.row+.5);return n.vec2.squaredDistance(l,c)-n.vec2.squaredDistance(t,c)});0<f.length&&(e=f.pop(),this._removeTile(e.id),d--,d!==this.maxSize););return d};d.prototype._removeTile=function(d){var c=this._tilePerId.get(d);this.removedFunc&&this.removedFunc(c);
this._tilePerId["delete"](d)};return d}();d.default=q})},"esri/views/2d/support/Timeline":function(){define(["require","exports","../../../core/tsSupport/decorateHelper","../../../core/tsSupport/declareExtendsHelper","../../../core/accessorSupport/decorators"],function(q,d,n,h,m){Object.defineProperty(d,"__esModule",{value:!0});q=function(){function c(){this._names=new Map}c.prototype.begin=function(c){this._names.has(c)||(this._names.set(c,!1),-1!==c.indexOf("Brush")&&this.record("Esri.FirstDraw"),
performance.mark("Esri."+c+".Start"))};c.prototype.end=function(c){this._names.has(c)&&!this._names.get(c)&&(this._names.set(c,!0),performance.mark("Esri."+c+".End"))};c.prototype.record=function(c){this._names.has(c)||(this._names.set(c,!0),performance.mark("Esri."+c))};return c=n([m.subclass("esri.views.2d.support.Timeline")],c)}();d.Timeline=q})},"esri/views/2d/input/MapViewInputManager":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Handles ../../../core/watchUtils ../../../core/accessorSupport/decorators ./handlers/DoubleClickZoom ./handlers/DoubleTapDragZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/handlers/PreventContextMenu ../../input/recognizers/DoubleTapDrag ../../input/recognizers/Drag ../../input/recognizers/PointerClickHoldAndDrag ../../input/recognizers/SingleAndDoubleClick".split(" "),
function(q,d,n,h,m,c,e,f,p,b,a,g,k,l,t,J,u,r,w,B,G,x,v,z,A){var y={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},I={zoomIn:["\x3d","+"],zoomOut:["-","_"]},C={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};return function(d){function m(){var a=null!==d&&d.apply(this,arguments)||this;a._handles=new c;return a}n(m,d);m.prototype.initialize=function(){var a=this;this._handles.add([e.whenNot(this.view,
"ready",function(){return a._disconnect()}),e.when(this.view,"ready",function(){return a._connect()})])};m.prototype.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect()};m.prototype._disconnect=function(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)};m.prototype._connect=function(){var c=this,d=new w.BrowserEventSource(this.view.surface,this.view.input),
f=[new z.PointerClickHoldAndDrag,new A.SingleAndDoubleClick,new v.Drag(this.view.navigation),new x.DoubleTapDrag],f=new B.InputManager({eventSource:d,recognizers:f});f.installHandlers("prevent-context-menu",[new G.PreventContextMenu],B.ViewEventPriorities.INTERNAL);f.installHandlers("navigation",[new r.PinchRotateAndZoom(this.view),new k.GamepadNavigation(this.view),new u.MouseWheelZoom(this.view),new p.DoubleClickZoom(this.view),new p.DoubleClickZoom(this.view,["Ctrl"]),new a.DragPan(this.view,"primary"),
new l.KeyPan(this.view,y),new J.KeyZoom(this.view,I),new t.KeyRotate(this.view,C),new g.DragRotate(this.view,"secondary"),new b.DoubleTapDragZoom(this.view,"touch")],B.ViewEventPriorities.INTERNAL);this.view.viewEvents.connect(f);this._source=d;this._inputManager=f;e.init(this.view.navigation,"browserTouchPanEnabled",function(a){c._source.browserTouchPanningEnabled=!a})};Object.defineProperty(m.prototype,"test",{get:function(){return{inputManager:this._inputManager}},enumerable:!0,configurable:!0});
h([f.property()],m.prototype,"view",void 0);return m=h([f.subclass("esri.views.2d.input.MapViewInputManager")],m)}(f.declared(m))})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler","../../../input/handlers/support"],function(q,d,n,h,m){Object.defineProperty(d,"__esModule",{value:!0});q=function(c){function d(d,e){var b=c.call(this,!0)||this;b.view=d;b.registerIncoming("double-click",e,function(a){return b._handleDoubleClick(a,
e)});return b}n(d,c);d.prototype._handleDoubleClick=function(c,d){m.eventMatchesPointerAction(c.data,"primary")&&(c.stopPropagation(),d?this.view.mapViewNavigation.zoomOut([c.data.x,c.data.y]):this.view.mapViewNavigation.zoomIn([c.data.x,c.data.y]))};return d}(h.InputHandler);d.DoubleClickZoom=q})},"esri/views/input/handlers/support":function(){define(["require","exports"],function(q,d){Object.defineProperty(d,"__esModule",{value:!0});d.eventMatchesPointerAction=function(d,h){switch(h){case "primary":return"touch"===
d.pointerType||0===d.button;case "secondary":return"touch"!==d.pointerType&&2===d.button;case "tertiary":return"touch"!==d.pointerType&&1===d.button}};d.eventMatchesMousePointerAction=function(d,h){if("touch"===d.pointerType)return!1;switch(h){case "primary":return 0===d.button;case "secondary":return 2===d.button;case "tertiary":return 1===d.button}}})},"esri/views/2d/input/handlers/DoubleTapDragZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../../core/compilerUtils",
"../../../input/InputHandler"],function(q,d,n,h,m){Object.defineProperty(d,"__esModule",{value:!0});q=function(c){function d(d,e,b){var a=c.call(this,!0)||this;a.view=d;a.pointerType=e;a.registerIncoming("double-tap-drag",b,function(b){return a._handleDoubleTapDrag(b)});return a}n(d,c);d.prototype._handleDoubleTapDrag=function(c){var d=c.data;if(d.pointerType===this.pointerType){c.stopPropagation();var b=d.action;c=d.delta;var a=this.view,d=a.mapViewNavigation;switch(b){case "begin":this._currentScale=
this._startScale=b=a.scale;this._previousDelta=c;d.begin();break;case "update":if(this._previousDelta.y===c.y)break;this._previousDelta=c;c=this._startScale*Math.pow(1.015,c.y);d.setViewpointImmediate(c/this._currentScale);this._currentScale=c;break;case "end":b=a.constraints;a=b.effectiveLODs;if(!b.snapToZoom||!a){d.end();break}a=b.snapScale(this._currentScale);c=(0<c.y?Math.max(a,b.snapToPreviousScale(this._startScale)):Math.min(a,b.snapToNextScale(this._startScale)))/this._currentScale;d.zoom(c);
break;default:h.neverReached(b)}}};return d}(m.InputHandler);d.DoubleTapDragZoom=q})},"esri/views/2d/input/handlers/DragPan":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),function(q,d,n,h,m,c){Object.defineProperty(d,"__esModule",{value:!0});q=function(d){function e(e,b,a){var g=d.call(this,!0)||this;g.view=e;g.pointerAction=b;g.registerIncoming("drag",a,function(a){return g._handleDrag(a)});
g.registerIncoming("pointer-down",function(){return g.stopMomentumNavigation()});var k=g.view.mapViewNavigation;g.dragEventSeparator=new h.DragEventSeparator({start:function(a,b){k.pan.begin(g.view,b.data);b.stopPropagation()},update:function(a,b){k.pan.update(g.view,b.data);b.stopPropagation()},end:function(a,b){k.pan.end(g.view,b.data);b.stopPropagation()},condition:function(a,b){return 1===a&&c.eventMatchesPointerAction(b.data,g.pointerAction)}});return g}n(e,d);e.prototype._handleDrag=function(c){var b=
this.view.mapViewNavigation;b.pinch.zoomMomentum||b.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(c)};e.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};return e}(m.InputHandler);d.DragPan=q})},"esri/views/input/DragEventSeparator":function(){define(["require","exports"],function(q,d){Object.defineProperty(d,"__esModule",{value:!0});q=function(){function d(d){this.callbacks=d;this.currentCount=0;this.callbacks.condition||
(this.callbacks.condition=function(){return!0})}d.prototype.handle=function(d){var h=d.data,c=h.pointers.size;switch(h.action){case "start":this.currentCount=c;this.emitStart(d);break;case "added":this.emitEnd(this.previousEvent);this.currentCount=c;this.emitStart(d);break;case "update":this.emitUpdate(d);break;case "removed":this.startEvent&&this.emitEnd(this.previousEvent);this.currentCount=c;this.emitStart(d);break;case "end":this.emitEnd(d),this.currentCount=0}this.previousEvent=d};d.prototype.emitStart=
function(d){this.startEvent=d;this.callbacks.condition(this.currentCount,d)&&this.callbacks.start(this.currentCount,d,this.startEvent)};d.prototype.emitUpdate=function(d){this.callbacks.condition(this.currentCount,d)&&this.callbacks.update(this.currentCount,d,this.startEvent)};d.prototype.emitEnd=function(d){this.callbacks.condition(this.currentCount,d)&&this.callbacks.end(this.currentCount,d,this.startEvent);this.startEvent=null};return d}();d.DragEventSeparator=q})},"esri/views/2d/input/handlers/DragRotate":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../input/DragEventSeparator ../../../input/InputHandler ../../../input/handlers/support".split(" "),
function(q,d,n,h,m,c){Object.defineProperty(d,"__esModule",{value:!0});q=function(d){function e(e,b,a){var g=d.call(this,!0)||this;g.view=e;g.pointerAction=b;var k=g.view.mapViewNavigation;g.dragEventSeparator=new h.DragEventSeparator({start:function(a,b){k.rotate.begin(g.view,b.data);b.stopPropagation()},update:function(a,b){k.rotate.update(g.view,b.data);b.stopPropagation()},end:function(a,b){k.rotate.end();b.stopPropagation()},condition:function(a,b){return 1===a&&c.eventMatchesPointerAction(b.data,
g.pointerAction)}});g.registerIncoming("drag",a,function(a){return g.dragEventSeparator.handle(a)});return g}n(e,d);return e}(m.InputHandler);d.DragRotate=q})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("require exports ../../../../core/tsSupport/extendsHelper ../../../../core/Handles ../../../../core/scheduling ../../../../core/watchUtils ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),function(q,d,n,h,m,c,e,f,p){Object.defineProperty(d,
"__esModule",{value:!0});q=function(d){function k(a){var b=d.call(this,!0)||this;b.view=a;b.frameTask=null;b.watchHandles=new h;b.currentDevice=null;b.transformation={translation:[0,0,0],heading:0,tilt:0};b.handle=b.registerIncoming("gamepad",function(a){return b.handleEvent(a)});b.handle.pause();return b}n(k,d);k.prototype.onInstall=function(a){var b=this;d.prototype.onInstall.call(this,a);this.watchHandles.add([c.init(this.view.navigation.gamepad,"enabled",function(a){a?(b.handle.resume(),b.frameTask||
(b.frameTask=m.addFrameTask({update:function(a){return b.frameUpdate(a.deltaTime)}}))):(b.handle.pause(),b.frameTask&&(b.frameTask.remove(),b.frameTask=null))})])};k.prototype.onUninstall=function(){this.watchHandles.removeAll();this.frameTask&&(this.frameTask.remove(),this.frameTask=null);d.prototype.onUninstall.call(this)};k.prototype.handleEvent=function(a){var b=this.view.navigation.gamepad.device;b&&a.data.device!==b||this.currentDevice&&this.currentDevice!==a.data.device||("end"===a.data.action?
(this.currentDevice=null,p.resetTransformation(this.transformation)):(this.currentDevice=a.data.device,p.extractTransformation(a.data,this.view.navigation.gamepad,this.transformation)))};k.prototype.frameUpdate=function(c){var d=this.transformation;if(!p.isZeroTransformation(d)){var k=this.view.viewpoint.clone(),l=a*this.view.navigation.gamepad.velocityFactor*c;e.translateBy(k,k,[d.translation[0]*l,-d.translation[1]*l]);l=this.view.size;e.scaleAndRotateBy(k,k,1+d.translation[2]*g*c,this.view.constraints.rotationEnabled?
-d.heading*b*c:0,[l[0]/2,l[1]],l);c=this.view.constraints.constrain(k,this.view.viewpoint);this.view.viewpoint=c}};return k}(f.InputHandler);d.GamepadNavigation=q;var b=.06,a=.7,g=6E-4})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["require","exports","../../core/libs/gl-matrix-2/vec3"],function(q,d,n){function h(d){var c=d*d;0>d&&(c*=-1);return c}Object.defineProperty(d,"__esModule",{value:!0});d.quadraticAccentuation=h;d.resetTransformation=function(d){d.translation[0]=0;
d.translation[1]=0;d.translation[2]=0;d.heading=0;d.tilt=0;return d};d.extractTransformation=function(d,c,e){var f=d.state;d=d.device;c="forward-down"===c.tiltDirection?1:-1;"standard"===d.deviceType?(e.translation[0]=h(f.axes[0]),e.translation[1]=h(f.axes[1]),e.translation[2]=h(f.buttons[7])-h(f.buttons[6]),e.heading=h(f.axes[2]),e.tilt=h(f.axes[3])):"spacemouse"===d.deviceType&&(e.translation[0]=1.2*h(f.axes[0]),e.translation[1]=1.2*h(f.axes[1]),e.translation[2]=2*-h(f.axes[2]),e.heading=1.2*h(f.axes[5]),
e.tilt=1.2*h(f.axes[3]));e.tilt*=c;n.vec3.scale(e.translation,e.translation,1);return e};d.extractTransformationKeyboard=function(d,c){c.translation[0]=d[1]-d[0];c.translation[1]=d[3]-d[2];c.translation[2]=d[4]-d[5];c.heading=d[7]-d[6];c.tilt=d[8]-d[9];return c};d.isZeroTransformation=function(d){return 0===d.translation[0]&&0===d.translation[1]&&0===d.translation[2]&&0===d.heading&&0===d.tilt}})},"esri/views/2d/input/handlers/KeyPan":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper",
"../../../input/InputHandler"],function(q,d,n,h){Object.defineProperty(d,"__esModule",{value:!0});q=function(d){function c(c,f,h){var b,a=d.call(this,!0)||this;a.view=c;a.keys=f;a._pressed=!1;a._keyMap=(b={},b[f.left]="left",b[f.right]="right",b[f.up]="up",b[f.down]="down",b);a.registerIncoming("key-down",h,function(b){return a._handleKeyDown(b)});a.registerIncoming("key-up",h,function(b){return a._handleKeyUp(b)});a.registerIncoming("blur",h,function(){return a._handleBlur()});return a}n(c,d);c.prototype._handleKeyDown=
function(c){c.data.repeat||this._handleKey(c,!0)};c.prototype._handleKeyUp=function(c){this._handleKey(c,!1)};c.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};c.prototype._handleKey=function(c,d){var e=this._keyMap[c.data.key];if(this._pressed=null!=e){if(d)switch(this.view.mapViewNavigation.begin(),e){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();break;case "up":this.view.mapViewNavigation.continousPanUp();
break;case "down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();c.stopPropagation()}};return c}(h.InputHandler);d.KeyPan=q})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(q,d,n,h){Object.defineProperty(d,"__esModule",{value:!0});q=function(d){function c(c,f,h){var b,a=d.call(this,!0)||this;a.view=c;a.keys=f;a._pressed=!1;a._keyToDirection=
(b={},b[f.clockwiseOption1]="clockwise",b[f.clockwiseOption2]="clockwise",b[f.counterClockwiseOption1]="counterClockwise",b[f.counterClockwiseOption2]="counterClockwise",b[f.resetOption1]="reset",b[f.resetOption2]="reset",b);a.registerIncoming("key-down",h,function(b){return a._handleKeyDown(b)});a.registerIncoming("key-up",h,function(b){return a._handleKeyUp(b)});a.registerIncoming("blur",h,function(){return a._handleBlur()});return a}n(c,d);c.prototype._handleKeyDown=function(c){c.data.repeat||
this._handleKey(c,!0)};c.prototype._handleKeyUp=function(c){this._handleKey(c,!1)};c.prototype._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};c.prototype._handleKey=function(c,d){var e=c.modifiers;if(!(0<e.size&&!e.has("Shift")||!this.view.constraints.rotationEnabled)&&(e=this._keyToDirection[c.data.key],this._pressed=null!=e)){if(d)switch(this.view.mapViewNavigation.begin(),e){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;
case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();c.stopPropagation()}};return c}(h.InputHandler);d.KeyRotate=q})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../../core/compilerUtils","../../../input/InputHandler"],function(q,d,n,h,m){Object.defineProperty(d,"__esModule",
{value:!0});q=function(c){function d(d,e,b){var a=c.call(this,!0)||this;a.view=d;a.keys=e;a._keysToZoomAction={};a.registerIncoming("key-down",b,function(b){return a._handleKeyDown(b)});e.zoomIn.forEach(function(b){return a._keysToZoomAction[b]=0});e.zoomOut.forEach(function(b){return a._keysToZoomAction[b]=1});return a}n(d,c);d.prototype._handleKeyDown=function(c){this._handleKey(c)};d.prototype._handleKey=function(c){var d=c.modifiers;if(!(0<d.size)||d.has("Shift"))if(d=c.data.key,d in this._keysToZoomAction){var d=
this._keysToZoomAction[d],b=this.view.mapViewNavigation,a=null;switch(d){case 0:a=b.zoomIn();break;case 1:a=b.zoomOut();break;default:h.neverReached(d);return}b.begin();a.then(function(){return b.end()});c.stopPropagation()}};return d}(m.InputHandler);d.KeyZoom=q})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/InputHandler"],function(q,d,n,h){Object.defineProperty(d,"__esModule",{value:!0});q=function(d){function c(c,
f){var e=d.call(this,!0)||this;e.view=c;e._canZoom=!0;e.registerIncoming("mouse-wheel",f,function(b){return e._handleMouseWheel(b)});return e}n(c,d);c.prototype._handleMouseWheel=function(c){var d=this;if(this.view.navigation.mouseWheelZoomEnabled&&(c.preventDefault(),c.stopPropagation(),this._canZoom)){var e=this.view.mapViewNavigation;c=c.data;if(c=e.zoom(1/Math.pow(.6,1/60*c.deltaY),[c.x,c.y]))this._canZoom=!1,c.catch(function(){}).then(function(){d._canZoom=!0;e.end()})}};return c}(h.InputHandler);
d.MouseWheelZoom=q})},"esri/views/2d/input/handlers/PinchAction":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper","../../../input/DragEventSeparator","../../../input/InputHandler"],function(q,d,n,h,m){Object.defineProperty(d,"__esModule",{value:!0});q=function(c){function d(d){var e=c.call(this,!0)||this;e.view=d;e.registerIncoming("drag",function(a){return e._handleDrag(a)});e.registerIncoming("pointer-down",function(){return e.stopMomentumNavigation()});var b=e.view.mapViewNavigation;
e.dragEventSeparator=new h.DragEventSeparator({start:function(a,c){b.pinch.begin(e.view,c.data);c.stopPropagation()},update:function(a,c){b.pinch.update(e.view,c.data);c.stopPropagation()},end:function(a,c){b.pinch.end(e.view);c.stopPropagation()},condition:function(a){return 2<=a}});return e}n(d,c);d.prototype._handleDrag=function(c){this.dragEventSeparator.handle(c)};d.prototype.stopMomentumNavigation=function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};return d}(m.InputHandler);
d.PinchRotateAndZoom=q})},"esri/views/input/BrowserEventSource":function(){define("require exports ../../core/has ../../core/screenUtils ../../core/libs/pep/pep ./keys ./gamepad/GamepadSource".split(" "),function(q,d,n,h,m,c,e){Object.defineProperty(d,"__esModule",{value:!0});var f=n("trident"),p=n("edge"),b=n("chrome"),a=n("ff"),g=n("safari");q=function(){function d(a,b){var c=this;this.input=b;this._active={};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._eventId=1;this._browserTouchPanningEnabled=
!1;this._element=a;m.applyLocal(a);a.getAttribute("tabindex")||a.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._updateTouchAction();
this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new e.GamepadSource(a,this.input);this._gamepadSource.onEvent=function(a){return c._callback("gamepad",a)}}d.prototype.destroy=function(){var a=this;this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(function(b){a._releasePointerCaptureSafe(b)});this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null);this._activePointerCaptures=null;this._removeTouchAction();this._element.removeEventListener("keydown",
this._preventAltKeyDefault)};Object.defineProperty(d.prototype,"browserTouchPanningEnabled",{get:function(){return this._browserTouchPanningEnabled},set:function(a){this._browserTouchPanningEnabled=a;this._updateTouchAction();this._updateTouchEventHandling()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"onEventReceived",{set:function(a){this._callback=a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"activeEvents",{set:function(a){var b=this,c;for(c in this._active)a&&
a.has(c)||(this._element.removeEventListener(k[c],this._active[c]),delete this._active[c]);a&&a.forEach(function(a){if(!b._active[a]&&k[a]){var c=(b._eventHandlers[a]||b._handleDefault).bind(b,a);b._element.addEventListener(k[a],c);b._active[a]=c}});this._gamepadSource.pollingEnabled=a&&a.has("gamepad")},enumerable:!0,configurable:!0});d.prototype.setPointerCapture=function(a,b){b?(this._element.setPointerCapture(a.pointerId),this._activePointerCaptures.add(a.pointerId)):(this._releasePointerCaptureSafe(a.pointerId),
this._activePointerCaptures.delete(a.pointerId))};d.prototype._updateTouchAction=function(){this._element.classList.remove(this._browserTouchPanningEnabled?"esri-view-surface--touch-none":"esri-view-surface--touch-pan");this._element.classList.add(this._browserTouchPanningEnabled?"esri-view-surface--touch-pan":"esri-view-surface--touch-none")};d.prototype._updateTouchEventHandling=function(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):
this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};d.prototype._removeTouchAction=function(){this._element.classList.remove("esri-view-surface--touch-none");this._element.classList.remove("esri-view-surface--touch-pan");this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};d.prototype._releasePointerCaptureSafe=function(a){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(a)||this._element.releasePointerCapture(a)}catch(J){}};
d.prototype._updateNormalizedPointerLikeEvent=function(a,b){a=h.createScreenPointFromNativeEvent(this._element,a);d.test.disableSubpixelCoordinates&&(a.x=Math.round(a.x),a.y=Math.round(a.y));b.x=a.x;b.y=a.y;return b};d.prototype._handleKey=function(a,b){var d=c.eventKey(b);d&&"key-up"===a&&this._keyDownState.delete(d);b={native:b,key:d,repeat:d&&this._keyDownState.has(d)};d&&"key-down"===a&&this._keyDownState.add(b.key);this._callback(a,b)};d.prototype._handlePointer=function(a,b){b=this._updateNormalizedPointerLikeEvent(b,
{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});this._callback(a,b)};d.prototype._handlePointerPreventDefault=function(a,b){var c=this._updateNormalizedPointerLikeEvent(b,{native:b,x:0,y:0,pointerType:b.pointerType,button:b.button,buttons:b.buttons,eventId:this._eventId++});b.preventDefault();this._callback(a,c)};d.prototype._handleMouseWheel=function(c,d){var e=d.deltaY;switch(d.deltaMode){case 0:if(f||p)e=e/document.documentElement.clientHeight*
600;break;case 1:e*=30;break;case 2:e*=900}f||p?e*=.7:b||g?e*=.6:a&&(e*=1.375);var k=Math.abs(e);100<k&&(e=e/k*200/(1+Math.exp(-.02*(k-100))));d=this._updateNormalizedPointerLikeEvent(d,{native:d,x:0,y:0,deltaY:e});this._callback(c,d)};d.prototype._handlePointerCaptureLost=function(a,b){this._activePointerCaptures.delete(b.pointerId);this._handleDefault(a,b)};d.prototype._handleDefault=function(a,b){var c={native:b};b.preventDefault();this._callback(a,c)};d.prototype._preventAltKeyDefault=function(a){"Alt"===
a.key&&a.preventDefault()};d.prototype._preventMultiTouchPanning=function(a){1<a.touches.length&&a.preventDefault()};d.test={disableSubpixelCoordinates:!1};return d}();d.BrowserEventSource=q;var k={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave",
"pointer-cancel":"pointercancel",focus:"focus",blur:"blur"}})},"esri/core/libs/pep/pep":function(){define(function(){function q(c,d){d=d||Object.create(null);var g=document.createEvent("Event");g.initEvent(c,d.bubbles||!1,d.cancelable||!1);c=2;for(var e;c<b.length;c++)e=b[c],g[e]=d[e]||a[c];g.buttons=d.buttons||0;c=0;c=d.pressure&&g.buttons?d.pressure:g.buttons?.5:0;g.x=g.clientX;g.y=g.clientY;g.pointerId=d.pointerId||0;g.width=d.width||0;g.height=d.height||0;g.pressure=c;g.tiltX=d.tiltX||0;g.tiltY=
d.tiltY||0;g.twist=d.twist||0;g.tangentialPressure=d.tangentialPressure||0;g.pointerType=d.pointerType||"";g.hwTimestamp=d.hwTimestamp||0;g.isPrimary=d.isPrimary||!1;return g}function d(){this.array=[];this.size=0}function n(a,b,c,d){this.addCallback=a.bind(d);this.removeCallback=b.bind(d);this.changedCallback=c.bind(d);v&&(this.observer=new v(this.mutationWatcher.bind(this)))}function h(a){return"body /shadow-deep/ "+m(a)}function m(a){return'[touch-action\x3d"'+a+'"]'}function c(a){return"{ -ms-touch-action: "+
a+"; touch-action: "+a+"; }"}function e(){if(I){A.forEach(function(a){String(a)===a?(y+=m(a)+c(a)+"\n",C&&(y+=h(a)+c(a)+"\n")):(y+=a.selectors.map(m)+c(a.rule)+"\n",C&&(y+=a.selectors.map(h)+c(a.rule)+"\n"))});var a=document.createElement("style");a.textContent=y;document.head.appendChild(a)}}function f(a){if(!u.pointermap.has(a))throw a=Error("NotFoundError"),a.name="NotFoundError",a;}function p(a){for(var b=a.parentNode;b&&b!==a.ownerDocument;)b=b.parentNode;if(!b)throw a=Error("InvalidStateError"),
a.name="InvalidStateError",a;}var b="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget pageX pageY".split(" "),a=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],g=window.Map&&window.Map.prototype.forEach?Map:d;d.prototype={set:function(a,b){if(void 0===b)return this.delete(a);this.has(a)||this.size++;this.array[a]=b},has:function(a){return void 0!==this.array[a]},delete:function(a){this.has(a)&&(delete this.array[a],this.size--)},
get:function(a){return this.array[a]},clear:function(){this.size=this.array.length=0},forEach:function(a,b){return this.array.forEach(function(c,d){a.call(b,c,d,this)},this)}};var k="bubbles cancelable view detail screenX screenY clientX clientY ctrlKey altKey shiftKey metaKey button relatedTarget buttons pointerId width height pressure tiltX tiltY pointerType hwTimestamp isPrimary type target currentTarget which pageX pageY timeStamp".split(" "),l=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,
0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],t={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},J="undefined"!==typeof SVGElementInstance,u={pointermap:new g,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(a,b){var c=b.events;c&&(c.forEach(function(a){b[a]&&(this.eventMap[a]=b[a].bind(b))},this),this.eventSources[a]=b,this.eventSourceList.push(b))},register:function(a){for(var b=this.eventSourceList.length,
c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.register.call(d,a)},unregister:function(a){for(var b=this.eventSourceList.length,c=0,d;c<b&&(d=this.eventSourceList[c]);c++)d.unregister.call(d,a)},contains:function(a,b){try{return a.contains(b)}catch(Z){return!1}},down:function(a){a.bubbles=!0;this.fireEvent("pointerdown",a)},move:function(a){a.bubbles=!0;this.fireEvent("pointermove",a)},up:function(a){a.bubbles=!0;this.fireEvent("pointerup",a)},enter:function(a){a.bubbles=!1;this.fireEvent("pointerenter",
a)},leave:function(a){a.bubbles=!1;this.fireEvent("pointerleave",a)},over:function(a){a.bubbles=!0;this.fireEvent("pointerover",a)},out:function(a){a.bubbles=!0;this.fireEvent("pointerout",a)},cancel:function(a){a.bubbles=!0;this.fireEvent("pointercancel",a)},leaveOut:function(a){this.out(a);this.propagate(a,this.leave,!1)},enterOver:function(a){this.over(a);this.propagate(a,this.enter,!0)},eventHandler:function(a){if(!a._handledByPE){var b=a.type;(b=this.eventMap&&this.eventMap[b])&&b(a);a._handledByPE=
!0}},listen:function(a,b){b.forEach(function(b){this.addEvent(a,b)},this)},unlisten:function(a,b){b.forEach(function(b){this.removeEvent(a,b)},this)},addEvent:function(a,b){a.addEventListener(b,this.boundHandler)},removeEvent:function(a,b){a.removeEventListener(b,this.boundHandler)},makeEvent:function(a,b){this.captureInfo[b.pointerId]&&(b.relatedTarget=null);a=new q(a,b);b.preventDefault&&(a.preventDefault=b.preventDefault);a._target=a._target||b.target;return a},fireEvent:function(a,b){a=this.makeEvent(a,
b);return this.dispatchEvent(a)},cloneEvent:function(a){for(var b=Object.create(null),c,d=0;d<k.length;d++)c=k[d],b[c]=a[c]||l[d],J&&("target"===c||"relatedTarget"===c)&&b[c]instanceof SVGElementInstance&&(b[c]=b[c].correspondingUseElement);a.preventDefault&&(b.preventDefault=function(){a.preventDefault()});return b},getTarget:function(a){var b=this.captureInfo[a.pointerId];if(!b)return a._target;if(a._target===b||!(a.type in t))return b},propagate:function(a,b,c){for(var d=a.target,g=[];null!=d&&
d!==document&&!d.contains(a.relatedTarget);)if(g.push(d),d=d.parentNode,!d)return;c&&g.reverse();g.forEach(function(c){a.target=c;b.call(this,a)},this)},setCapture:function(a,b,c){this.captureInfo[a]&&this.releaseCapture(a,c);this.captureInfo[a]=b;this.implicitRelease=this.releaseCapture.bind(this,a,c);document.addEventListener("pointerup",this.implicitRelease);document.addEventListener("pointercancel",this.implicitRelease);var d=new q("gotpointercapture");d.pointerId=a;d._target=b;c||this.asyncDispatchEvent(d)},
releaseCapture:function(a,b){var c=this.captureInfo[a];if(c){this.captureInfo[a]=void 0;document.removeEventListener("pointerup",this.implicitRelease);document.removeEventListener("pointercancel",this.implicitRelease);var d=new q("lostpointercapture");d.pointerId=a;d._target=c;b||this.asyncDispatchEvent(d)}},dispatchEvent:function(a){var b=this.getTarget(a);if(b)return b.dispatchEvent(a)},asyncDispatchEvent:function(a){requestAnimationFrame(this.dispatchEvent.bind(this,a))}};u.boundHandler=u.eventHandler.bind(u);
var r={shadow:function(a){if(a)return a.shadowRoot||a.webkitShadowRoot},canTarget:function(a){return a&&!!a.elementFromPoint},targetingShadow:function(a){a=this.shadow(a);if(this.canTarget(a))return a},olderShadow:function(a){var b=a.olderShadowRoot;!b&&(a=a.querySelector("shadow"))&&(b=a.olderShadowRoot);return b},allShadows:function(a){var b=[];for(a=this.shadow(a);a;)b.push(a),a=this.olderShadow(a);return b},searchRoot:function(a,b,c){if(a){var d=a.elementFromPoint(b,c),g;for(g=this.targetingShadow(d);g;){if(a=
g.elementFromPoint(b,c))return d=this.targetingShadow(a),this.searchRoot(d,b,c)||a;g=this.olderShadow(g)}return d}},owner:function(a){for(;a.parentNode;)a=a.parentNode;a.nodeType!==Node.DOCUMENT_NODE&&a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(a=document);return a},findTarget:function(a){var b=a.clientX,c=a.clientY;a=this.owner(a.target);a.elementFromPoint(b,c)||(a=document);return this.searchRoot(a,b,c)}},w=Array.prototype.forEach.call.bind(Array.prototype.forEach),B=Array.prototype.map.call.bind(Array.prototype.map),
G=Array.prototype.slice.call.bind(Array.prototype.slice),x=Array.prototype.filter.call.bind(Array.prototype.filter),v=window.MutationObserver||window.WebKitMutationObserver,z={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};n.prototype={watchSubtree:function(a){this.observer&&r.canTarget(a)&&this.observer.observe(a,z)},enableOnSubtree:function(a){this.watchSubtree(a);a===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(a)},
installNewSubtree:function(a){w(this.findElements(a),this.addElement,this)},findElements:function(a){return a.querySelectorAll?a.querySelectorAll("[touch-action]"):[]},removeElement:function(a){this.removeCallback(a)},addElement:function(a){this.addCallback(a)},elementChanged:function(a,b){this.changedCallback(a,b)},concatLists:function(a,b){return a.concat(G(b))},installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},
isElement:function(a){return a.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(a){var b=B(a,this.findElements,this);b.push(x(a,this.isElement));return b.reduce(this.concatLists,[])},mutationWatcher:function(a){a.forEach(this.mutationHandler,this)},mutationHandler:function(a){"childList"===a.type?(this.flattenMutationTree(a.addedNodes).forEach(this.addElement,this),this.flattenMutationTree(a.removedNodes).forEach(this.removeElement,this)):"attributes"===a.type&&this.elementChanged(a.target,
a.oldValue)}};var A=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],y="",I=window.PointerEvent||window.MSPointerEvent,C=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,E=u.pointermap,D=[1,4,2,8,16],F=!1;try{F=1===(new MouseEvent("test",{buttons:1})).buttons}catch(H){}var P={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(a){u.listen(a,this.events)},unregister:function(a){u.unlisten(a,
this.events)},lastTouches:[],isEventSimulatedFromTouch:function(a){var b=this.lastTouches,c=a.clientX;a=a.clientY;for(var d=0,g=b.length,e;d<g&&(e=b[d]);d++){var k=Math.abs(a-e.y);if(25>=Math.abs(c-e.x)&&25>=k)return!0}},prepareEvent:function(a){var b=u.cloneEvent(a),c=b.preventDefault;b.preventDefault=function(){a.preventDefault();c()};b.pointerId=this.POINTER_ID;b.isPrimary=!0;b.pointerType=this.POINTER_TYPE;return b},prepareButtonsForMove:function(a,b){var c=E.get(this.POINTER_ID);a.buttons=0!==
b.which&&c?c.buttons:0;b.buttons=a.buttons},mousedown:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=E.get(this.POINTER_ID),c=this.prepareEvent(a);F||(c.buttons=D[c.button],b&&(c.buttons|=b.buttons),a.buttons=c.buttons);E.set(this.POINTER_ID,a);b&&0!==b.buttons?u.move(c):u.down(c)}},mousemove:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);F||this.prepareButtonsForMove(b,a);b.button=-1;E.set(this.POINTER_ID,a);u.move(b)}},mouseup:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=
E.get(this.POINTER_ID),c=this.prepareEvent(a);if(!F){var d=D[c.button];c.buttons=b?b.buttons&~d:0;a.buttons=c.buttons}E.set(this.POINTER_ID,a);c.buttons&=~D[c.button];0===c.buttons?u.up(c):u.move(c)}},mouseover:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);F||this.prepareButtonsForMove(b,a);b.button=-1;E.set(this.POINTER_ID,a);u.enterOver(b)}},mouseout:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);F||this.prepareButtonsForMove(b,a);b.button=
-1;u.leaveOut(b)}},cancel:function(a){a=this.prepareEvent(a);u.cancel(a);this.deactivateMouse()},deactivateMouse:function(){E.delete(this.POINTER_ID)}},Q=u.captureInfo,L=r.findTarget.bind(r),N=r.allShadows.bind(r),M=u.pointermap,S,O={events:["touchstart","touchmove","touchend","touchcancel"],register:function(a){S.enableOnSubtree(a)},unregister:function(){},elementAdded:function(a){var b=a.getAttribute("touch-action"),c=this.touchActionToScrollType(b);c&&(a._scrollType=c,u.listen(a,this.events),N(a).forEach(function(a){a._scrollType=
c;u.listen(a,this.events)},this))},elementRemoved:function(a){a._scrollType=void 0;u.unlisten(a,this.events);N(a).forEach(function(a){a._scrollType=void 0;u.unlisten(a,this.events)},this)},elementChanged:function(a,b){var c=a.getAttribute("touch-action"),d=this.touchActionToScrollType(c);b=this.touchActionToScrollType(b);d&&b?(a._scrollType=d,N(a).forEach(function(a){a._scrollType=d},this)):b?this.elementRemoved(a):d&&this.elementAdded(a)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",
SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(a){var b=this.scrollTypes;if("none"===a)return"none";if(a===b.XSCROLLER)return"X";if(a===b.YSCROLLER)return"Y";if(b.SCROLLER.exec(a))return"XY"},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){if(0===M.size||1===M.size&&M.has(1))this.firstTouch=a.identifier,this.firstXY={X:a.clientX,Y:a.clientY},this.scrolling=!1,this.cancelResetClickCount()},
removePrimaryPointer:function(a){a.isPrimary&&(this.firstXY=this.firstTouch=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var a=function(){this.clickCount=0;this.resetId=null}.bind(this);this.resetId=setTimeout(a,200)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(a){var b=0;if("touchstart"===a||"touchmove"===a)b=1;return b},touchToPointer:function(a){var b=this.currentTouchEvent,c=u.cloneEvent(a),d=c.pointerId=
a.identifier+2;c.target=Q[d]||L(c);c.bubbles=!0;c.cancelable=!0;c.detail=this.clickCount;c.button=0;c.buttons=this.typeToButtons(b.type);c.width=2*(a.radiusX||a.webkitRadiusX||0);c.height=2*(a.radiusY||a.webkitRadiusY||0);c.pressure=a.force||a.webkitForce||.5;c.isPrimary=this.isPrimaryTouch(a);c.pointerType=this.POINTER_TYPE;c.altKey=b.altKey;c.ctrlKey=b.ctrlKey;c.metaKey=b.metaKey;c.shiftKey=b.shiftKey;var g=this;c.preventDefault=function(){g.scrolling=!1;g.firstXY=null;b.preventDefault()};return c},
processTouches:function(a,b){var c=a.changedTouches;this.currentTouchEvent=a;a=0;for(var d;a<c.length;a++)d=c[a],b.call(this,this.touchToPointer(d))},shouldScroll:function(a){if(this.firstXY){var b;b=a.currentTarget._scrollType;if("none"===b)b=!1;else if("XY"===b)b=!0;else{a=a.changedTouches[0];var c="Y"===b?"X":"Y";b=Math.abs(a["client"+b]-this.firstXY[b])>=Math.abs(a["client"+c]-this.firstXY[c])}this.firstXY=null;return b}},findTouch:function(a,b){for(var c=0,d=a.length,g;c<d&&(g=a[c]);c++)if(g.identifier===
b)return!0},vacuumTouches:function(a){var b=a.touches;if(M.size>=b.length){var c=[];M.forEach(function(a,d){1===d||this.findTouch(b,d-2)||c.push(a.out)},this);c.forEach(this.cancelOut,this)}},touchstart:function(a){this.vacuumTouches(a);this.setPrimaryTouch(a.changedTouches[0]);this.dedupSynthMouse(a);this.scrolling||(this.clickCount++,this.processTouches(a,this.overDown))},overDown:function(a){M.set(a.pointerId,{target:a.target,out:a,outTarget:a.target});u.enterOver(a);u.down(a)},touchmove:function(a){this.scrolling||
(this.shouldScroll(a)?(this.scrolling=!0,this.touchcancel(a)):(a.preventDefault(),this.processTouches(a,this.moveOverOut)))},moveOverOut:function(a){var b=M.get(a.pointerId);if(b){var c=b.out,d=b.outTarget;u.move(a);c&&d!==a.target&&(c.relatedTarget=a.target,a.relatedTarget=d,c.target=d,a.target?(u.leaveOut(c),u.enterOver(a)):(a.target=d,a.relatedTarget=null,this.cancelOut(a)));b.out=a;b.outTarget=a.target}},touchend:function(a){this.dedupSynthMouse(a);this.processTouches(a,this.upOut)},upOut:function(a){this.scrolling||
(u.up(a),u.leaveOut(a));this.cleanUpPointer(a)},touchcancel:function(a){this.processTouches(a,this.cancelOut)},cancelOut:function(a){u.cancel(a);u.leaveOut(a);this.cleanUpPointer(a)},cleanUpPointer:function(a){M.delete(a.pointerId);this.removePrimaryPointer(a)},dedupSynthMouse:function(a){var b=P.lastTouches;a=a.changedTouches[0];this.isPrimaryTouch(a)&&(a={x:a.clientX,y:a.clientY},b.push(a),b=function(a,b){b=a.indexOf(b);-1<b&&a.splice(b,1)}.bind(null,b,a),setTimeout(b,2500))}};S=new n(O.elementAdded,
O.elementRemoved,O.elementChanged,O);var K=u.pointermap,V=window.MSPointerEvent&&"number"===typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,T={events:"MSPointerDown MSPointerMove MSPointerUp MSPointerOut MSPointerOver MSPointerCancel MSGotPointerCapture MSLostPointerCapture".split(" "),register:function(a){u.listen(a,this.events)},unregister:function(a){u.unlisten(a,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(a){var b=a;V&&(b=u.cloneEvent(a),b.pointerType=
this.POINTER_TYPES[a.pointerType]);return b},cleanup:function(a){K.delete(a)},MSPointerDown:function(a){K.set(a.pointerId,a);a=this.prepareEvent(a);u.down(a)},MSPointerMove:function(a){a=this.prepareEvent(a);u.move(a)},MSPointerUp:function(a){var b=this.prepareEvent(a);u.up(b);this.cleanup(a.pointerId)},MSPointerOut:function(a){a=this.prepareEvent(a);u.leaveOut(a)},MSPointerOver:function(a){a=this.prepareEvent(a);u.enterOver(a)},MSPointerCancel:function(a){var b=this.prepareEvent(a);u.cancel(b);this.cleanup(a.pointerId)},
MSLostPointerCapture:function(a){a=u.makeEvent("lostpointercapture",a);u.dispatchEvent(a)},MSGotPointerCapture:function(a){a=u.makeEvent("gotpointercapture",a);u.dispatchEvent(a)}},W,U,R;window.navigator.msPointerEnabled?(W=function(a){f(a);p(this);0!==u.pointermap.get(a).buttons&&(u.setCapture(a,this,!0),this.msSetPointerCapture(a))},U=function(a){f(a);u.releaseCapture(a,!0);this.msReleasePointerCapture(a)}):(W=function(a){f(a);p(this);0!==u.pointermap.get(a).buttons&&u.setCapture(a,this)},U=function(a){f(a);
u.releaseCapture(a)});R=function(a){return!!u.captureInfo[a]};var Y=window.PointerEvent||window.MSPointerEvent;return{dispatcher:u,Installer:n,PointerEvent:q,PointerMap:g,targetFinding:r,applyGlobal:function(){e();window.PointerEvent||(window.PointerEvent=q,window.navigator.msPointerEnabled?(Object.defineProperty(window.navigator,"maxTouchPoints",{value:window.navigator.msMaxTouchPoints,enumerable:!0}),u.registerSource("ms",T)):(Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),
u.registerSource("mouse",P),void 0!==window.ontouchstart&&u.registerSource("touch",O)),u.register(document));window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:W},releasePointerCapture:{value:U},hasPointerCapture:{value:R}})},applyLocal:function(a){Y||(window.PointerEvent||(window.navigator.msPointerEnabled?u.registerSource("ms",T):(u.registerSource("mouse",P),void 0!==window.ontouchstart&&u.registerSource("touch",O)),u.register(document)),
window.Element&&!Element.prototype.setPointerCapture&&(a.setPointerCapture=W.bind(a),a.releasePointerCapture=U.bind(a),a.hasPointerCapture=R.bind(a)),a.getAttribute("touch-action")||a.setAttribute("touch-action","none"))}}})},"esri/views/input/gamepad/GamepadSource":function(){define("require exports ../../../core/tsSupport/assignHelper ../../../core/scheduling ./GamepadInputDevice ./GamepadState".split(" "),function(q,d,n,h,m,c){Object.defineProperty(d,"__esModule",{value:!0});q=function(){function d(d,
e){var b=this;this.element=d;this.input=e;this.handleGamepadConnectedEvent=function(a){b.handleGamepadConnected(a.gamepad)};this.handleGamepadDisconnectedEvent=function(a){a=a.gamepad;var d=b.inputDevices[a.index];d&&(b.emitGamepadEvent(a,c.extractState(d),!1),b.inputDevices[a.index]=void 0,b.latestUpdate[a.index]=void 0,b.input.gamepad.devices.remove(d))};this.frameTask=null;this.latestUpdate=[];this.inputDevices=[];this.callback=null;if(this.supported="getGamepads"in window.navigator)this.forEachGamepad(function(a){return b.handleGamepadConnected(a)}),
window.addEventListener("gamepadconnected",this.handleGamepadConnectedEvent),window.addEventListener("gamepaddisconnected",this.handleGamepadDisconnectedEvent)}d.prototype.destroy=function(){this.pollingEnabled=!1;this.supported&&(window.removeEventListener("gamepadconnected",this.handleGamepadConnectedEvent),window.removeEventListener("gamepaddisconnected",this.handleGamepadDisconnectedEvent))};Object.defineProperty(d.prototype,"onEvent",{set:function(c){this.callback=c},enumerable:!0,configurable:!0});
Object.defineProperty(d.prototype,"pollingEnabled",{set:function(c){this.supported&&(c?this.startPolling():this.stopPolling())},enumerable:!0,configurable:!0});d.prototype.handleGamepadConnected=function(c){var d=new m(c);"unknown"!==d.deviceType&&(this.inputDevices[c.index]=d,this.input.gamepad.devices.add(d))};d.prototype.startPolling=function(){var c=this;null==this.frameTask&&(this.frameTask=h.addFrameTask({update:function(){return c.readGamepadState()}}))};d.prototype.stopPolling=function(){null!=
this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=[])};d.prototype.readGamepadState=function(){var d=this,e=document.hasFocus(),b=this.element.contains(document.activeElement),a="document"===this.input.gamepad.enabledFocusMode&&!e||"view"===this.input.gamepad.enabledFocusMode&&!b;this.forEachGamepad(function(b){var g=d.inputDevices[b.index];if(g){var e=d.latestUpdate[b.index],g=c.extractState(g),f=a||c.stateIdle(g);e&&(e.timestamp===b.timestamp||!e.active&&f||c.stateEqual(e.state,
g))||d.emitGamepadEvent(b,g,!f)}})};d.prototype.forEachGamepad=function(c){for(var d=window.navigator.getGamepads(),b=0;b<d.length;b++){var a=d[b];this.validate(a)&&c(a)}};d.prototype.emitGamepadEvent=function(c,d,b){var a=this.latestUpdate[c.index];if((a=a&&a.active)||b)this.latestUpdate[c.index]={timestamp:c.timestamp,state:d,active:b},this.callback&&this.callback({device:this.inputDevices[c.index],state:d,action:!a&&b?"start":a&&b?"update":"end"})};d.prototype.validate=function(c){if(!c||!c.connected)return!1;
for(var d=0;d<c.axes.length;d++)if(isNaN(c.axes[d]))return!1;return!0};return d}();d.GamepadSource=q})},"esri/views/input/gamepad/GamepadState":function(){define(["require","exports","../../../core/mathUtils"],function(q,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.extractState=function(d){var h=d.native;return{buttons:h.buttons.map(function(c){return c.pressed?c.value?c.value:1:0}),axes:h.axes.map(function(c){var e=d.axisThreshold,f=Math.abs(c);c=f<e?0:n.sign(c)*(f-e)/(1-e);return c})}};
d.stateEqual=function(d,m){if(d.axes.length!==m.axes.length||d.buttons.length!==m.buttons.length)return!1;for(var c=0;c<d.axes.length;c++)if(d.axes[c]!==m.axes[c])return!1;for(c=0;c<d.buttons.length;c++)if(d.buttons[c]!==m.buttons[c])return!1;return!0};d.stateIdle=function(d){for(var h=0;h<d.axes.length;h++)if(0!==d.axes[h])return!1;for(h=0;h<d.buttons.length;h++)if(0!==d.buttons[h])return!1;return!0}})},"esri/views/input/handlers/PreventContextMenu":function(){define(["require","exports","../../../core/tsSupport/extendsHelper",
"../InputHandler"],function(q,d,n,h){Object.defineProperty(d,"__esModule",{value:!0});q=function(d){function c(){var c=d.call(this,!0)||this;c.registerIncoming("context-menu",function(c){c.data.native.preventDefault()});return c}n(c,d);return c}(h.InputHandler);d.PreventContextMenu=q;d.default=q})},"esri/views/input/recognizers/DoubleTapDrag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../../../core/iteratorUtils ../../../core/screenUtils ../DragEventSeparator ../InputHandler ./SingleAndDoubleClick ./support".split(" "),
function(q,d,n,h,m,c,e,f,p,b){Object.defineProperty(d,"__esModule",{value:!0});q=function(a){function d(b,d,g,f,u){void 0===b&&(b=p.DefaultParameters.maximumDoubleClickDelay);void 0===d&&(d=p.DefaultParameters.maximumDoubleClickDistance);void 0===g&&(g=p.DefaultParameters.maximumDoubleTouchDelay);void 0===f&&(f=p.DefaultParameters.maximumDoubleTouchDistance);void 0===u&&(u=h.default);var k=a.call(this,!1)||this;k.maximumDoubleClickDelay=b;k.maximumDoubleClickDistance=d;k.maximumDoubleTouchDelay=g;
k.maximumDoubleTouchDistance=f;k._clock=u;k._doubleTapDragReady=!1;k._doubleTapDragActive=!1;k._dragStartCenter=c.createScreenPoint(0,0);k._pointerState=new Map;k._doubleTapDrag=k.registerOutgoing("double-tap-drag");k._dragEventSeparator=new e.DragEventSeparator({start:function(a,b){return k._dragStart(a,b)},update:function(a,b){return k._dragUpdate(b)},end:function(a,b){return k._dragEnd(b)}});k.registerIncoming("drag",function(a){return k._dragEventSeparator.handle(a)});k.registerIncoming("pointer-down",
function(a){return k._handlePointerDown(a)});k.registerIncoming("pointer-up",function(){return k._handlePointerUp()});return k}n(d,a);d.prototype.onUninstall=function(){this._pointerState.forEach(function(a){null!=a.doubleTapTimeout&&(a.doubleTapTimeout.remove(),a.doubleTapTimeout=null)})};Object.defineProperty(d.prototype,"hasPendingInputs",{get:function(){return m.someMap(this._pointerState,function(a){return null!=a.doubleTapTimeout})},enumerable:!0,configurable:!0});d.prototype._clearPointerDown=
function(a){var b=this._pointerState.get(a);b&&(b.doubleTapTimeout.remove(),b.doubleTapTimeout=null,this._pointerState.delete(a),this.refreshHasPendingInputs())};d.prototype._createDoubleTapDragData=function(a,b,c){return{action:a,delta:b,button:c.button,buttons:c.buttons,pointer:c.pointer,pointers:c.pointers,pointerType:c.pointerType,timestamp:c.timestamp}};d.prototype._dragStart=function(a,b){if(this._doubleTapDragReady&&1===a){this._doubleTapDragReady=!1;this._doubleTapDragActive=!0;var d=b.data;
a=b.modifiers;this._dragStartCenter=d.center;d=this._createDoubleTapDragData("begin",c.createScreenPoint(0,0),d);this._doubleTapDrag.emit(d,void 0,a);b.stopPropagation()}};d.prototype._dragUpdate=function(a){if(this._doubleTapDragActive){var b=a.data,d=a.modifiers,g=b.center,g=c.createScreenPoint(g.x-this._dragStartCenter.x,g.y-this._dragStartCenter.y),b=this._createDoubleTapDragData("update",g,b);this._doubleTapDrag.emit(b,void 0,d);a.stopPropagation()}};d.prototype._dragEnd=function(a){if(this._doubleTapDragActive){var b=
a.data,d=a.modifiers,g=b.center,g=c.createScreenPoint(g.x-this._dragStartCenter.x,g.y-this._dragStartCenter.y),b=this._createDoubleTapDragData("end",g,b);this._doubleTapDrag.emit(b,void 0,d);this._doubleTapDragActive=!1;a.stopPropagation()}};d.prototype._handlePointerDown=function(a){var c=a.data,d=this._pointerId(c),g=this._pointerState.get(d),e=c.native.pointerType;g?(e="touch"===e?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance,this._clearPointerDown(d),b.manhattanDistance(g.event.data,
c)>e?this._storePointerDown(a):this._doubleTapDragReady=!0):this._storePointerDown(a)};d.prototype._handlePointerUp=function(){this._doubleTapDragReady=!1};d.prototype._pointerId=function(a){var b=a.native;a=b.pointerId;var c=b.button,b=b.pointerType;return"mouse"===b?a+":"+c:""+b};d.prototype._storePointerDown=function(a){var b=this,c=a.data,d=c.native.pointerType,g=this._pointerId(c),c=this._clock.setTimeout(function(){return b._clearPointerDown(g)},"touch"===d?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay);
this._pointerState.set(g,{event:a,doubleTapTimeout:c});this.refreshHasPendingInputs()};return d}(f.InputHandler);d.DoubleTapDrag=q})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../../../core/iteratorUtils ../InputHandler ./support".split(" "),function(q,d,n,h,m,c,e){Object.defineProperty(d,"__esModule",{value:!0});d.DefaultParameters={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,
maximumDoubleTouchDistance:35};q=function(c){function f(b,a,g,e,f){void 0===b&&(b=d.DefaultParameters.maximumDoubleClickDelay);void 0===a&&(a=d.DefaultParameters.maximumDoubleClickDistance);void 0===g&&(g=d.DefaultParameters.maximumDoubleTouchDelay);void 0===e&&(e=d.DefaultParameters.maximumDoubleTouchDistance);void 0===f&&(f=h.default);var k=c.call(this,!1)||this;k.maximumDoubleClickDelay=b;k.maximumDoubleClickDistance=a;k.maximumDoubleTouchDelay=g;k.maximumDoubleTouchDistance=e;k._clock=f;k._pointerState=
new Map;k._click=k.registerOutgoing("click");k._doubleClick=k.registerOutgoing("double-click");k.registerIncoming("immediate-click",k._handleImmediateClick.bind(k));k.registerIncoming("pointer-drag",k._handlePointerDrag.bind(k));k.registerIncoming("drag",k._handleDrag.bind(k));return k}n(f,c);f.prototype.onUninstall=function(){this._pointerState.forEach(function(b){null!=b.doubleClickTimeout&&(b.doubleClickTimeout.remove(),b.doubleClickTimeout=null)})};Object.defineProperty(f.prototype,"hasPendingInputs",
{get:function(){return m.someMap(this._pointerState,function(b){return null!=b.doubleClickTimeout})},enumerable:!0,configurable:!0});f.prototype._pointerId=function(b){b=b.native;return"mouse"===b.pointerType?b.pointerId+":"+b.button:""+b.pointerType};f.prototype._handleImmediateClick=function(b){var a=b.data,c=this._pointerId(a),d=this._pointerState.get(c);if(d){var f="touch"===a.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;e.manhattanDistance(d.event.data,a)>
f?(this._clearDoubleClickTimeout(c,!0),this._startClick(b)):(this._clearDoubleClickTimeout(c,!1),this._doubleClick.emit(d.event.data,void 0,d.event.modifiers))}else this._startClick(b)};f.prototype._startClick=function(b){var a=this,c=this._pointerId(b.data);this._pointerState.set(c,{event:b,doubleClickTimeout:this._clock.setTimeout(function(){return a._doubleClickTimeoutExceeded(c)},"touch"===b.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)});this.refreshHasPendingInputs()};
f.prototype._handlePointerDrag=function(b){b=this._pointerId(b.data.currentEvent);this._clearDoubleClickTimeout(b,!0)};f.prototype._handleDrag=function(b){b=this._pointerId(b.data.pointer);this._clearDoubleClickTimeout(b,!0)};f.prototype._clearDoubleClickTimeout=function(b,a){var c=this._pointerState.get(b);c&&(c.doubleClickTimeout.remove(),c.doubleClickTimeout=null,a&&this._doubleClickTimeoutExceeded(b),this._pointerState.delete(b),this.refreshHasPendingInputs())};f.prototype._doubleClickTimeoutExceeded=
function(b){var a=this._pointerState.get(b);this._click.emit(a.event.data,void 0,a.event.modifiers);a.doubleClickTimeout=null;this._pointerState.delete(b);this.refreshHasPendingInputs()};return f}(c.InputHandler);d.SingleAndDoubleClick=q})},"esri/views/input/recognizers/support":function(){define(["require","exports","../../../core/screenUtils"],function(q,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.manhattanDistance=function(d,m){return Math.abs(m.x-d.x)+Math.abs(m.y-d.y)};d.euclideanDistance=
function(d,m){var c=m.x-d.x;d=m.y-d.y;return Math.sqrt(c*c+d*d)};d.fitCircleLSQ=function(d,m){m?(m.radius=0,m.center.x=0,m.center.y=0):m={radius:0,center:n.createScreenPoint()};if(0===d.length)return m;if(1===d.length)return m.center.x=d[0].x,m.center.y=d[0].y,m;if(2===d.length){var c=d[0];d=d[1];var e=[d.x-c.x,d.y-c.y],f=e[0],e=e[1];m.radius=Math.sqrt(f*f+e*e)/2;m.center.x=(c.x+d.x)/2;m.center.y=(c.y+d.y)/2;return m}for(var h=0,b=0,a=0;a<d.length;a++)h+=d[a].x,b+=d[a].y;for(var h=h/d.length,b=b/
d.length,g=d.map(function(a){return a.x-h}),k=d.map(function(a){return a.y-b}),l=c=m=0,t=0,J=f=0,a=e=0;a<g.length;a++){var u=g[a],r=k[a],w=u*u,B=r*r;m+=w;c+=B;l+=u*r;t+=w*u;f+=B*r;J+=u*B;e+=r*w}a=m;g=l;k=c;t=.5*(t+J);f=.5*(f+e);e=a*k-l*g;J=(t*k-f*g)/e;f=(a*f-l*t)/e;e=n.createScreenPoint(J+h,f+b);return{radius:Math.sqrt(J*J+f*f+(m+c)/d.length),center:e}}})},"esri/views/input/recognizers/Drag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/screenUtils ../../../layers/support/timeUtils ../InputHandler ./support".split(" "),
function(q,d,n,h,m,c,e){function f(a){var b=[];a.forEach(function(a){b.push(h.createScreenPoint(a.event.x,a.event.y))});return e.fitCircleLSQ(b)}function p(b){var c=f(b),d=0;b.forEach(function(b){for(var g=a(b,c),g=g-b.lastAngle;g>Math.PI;)g-=2*Math.PI;for(;g<-Math.PI;)g+=2*Math.PI;g=b.lastAngle+g;b.lastAngle=g;d+=g-b.initialAngle});d/=b.size||1;return{angle:d,radius:c.radius,center:c.center}}function b(a){var b=new Map;a.forEach(function(a,c){return b.set(c,a.event)});return b}function a(a,b){a=
a.event;return Math.atan2(a.y-b.center.y,a.x-b.center.x)}Object.defineProperty(d,"__esModule",{value:!0});q=function(c){function d(a){var b=c.call(this,!1)||this;b.navigationTouch=a;b.startStateModifiers=new Set;b.activePointerMap=new Map;b.isDragging=!1;b.isCurrentDragSuppressed=!1;b.drag=b.registerOutgoing("drag");b.registerIncoming("pointer-drag",b.handlePointerDrag.bind(b));b.registerIncoming("pointer-up",b.handlePointerUpAndPointerLost.bind(b));b.registerIncoming("pointer-capture-lost",b.handlePointerUpAndPointerLost.bind(b));
b.registerIncoming("pointer-cancel",b.handlePointerUpAndPointerLost.bind(b));return b}n(d,c);d.prototype.createPayload=function(a,c,d,g){return{action:a,pointerType:this.pointerType,button:this.mouseButton,buttons:c.buttons,timestamp:g,pointers:b(this.activePointerMap),pointer:c,angle:d.angle,radius:d.radius,center:d.center}};d.prototype.addPointer=function(b){var c=b.native.pointerId,d=p(this.activePointerMap).angle;b={event:b,initialAngle:0,lastAngle:0};this.activePointerMap.set(c,b);c=a(b,f(this.activePointerMap));
b.initialAngle=c;b.lastAngle=c;this.updatePointerAngles(d)};d.prototype.updatePointer=function(a){if(!a||null!=a.x||null!=a.y){var b=this.activePointerMap.get(a.native.pointerId);b?b.event=a:this.addPointer(a)}};d.prototype.removePointer=function(a){var b=p(this.activePointerMap).angle;this.activePointerMap.delete(a);this.updatePointerAngles(b)};d.prototype.updatePointerAngles=function(b){var c=p(this.activePointerMap);this.activePointerMap.forEach(function(d){d.initialAngle=a(d,c)-b;d.lastAngle=
a(d,c)-b})};d.prototype.emitEvent=function(a,b,c){var d=p(this.activePointerMap);this.drag.emit(this.createPayload(a,b,d,c),void 0,this.startStateModifiers)};d.prototype.handlePointerUpAndPointerLost=function(a){var b=a.data.native.pointerId,c=m.Milliseconds(a.timestamp);this.activePointerMap.get(b)&&(1===this.activePointerMap.size?(this.updatePointer(a.data),!this.isCurrentDragSuppressed&&this.emitEvent("end",a.data,c),this.isCurrentDragSuppressed=this.isDragging=!1,this.removePointer(b)):(this.removePointer(b),
this.emitEvent("removed",a.data,m.Milliseconds(a.timestamp))))};d.prototype.handlePointerDrag=function(a){var b=a.data,c=b.currentEvent,d=m.Milliseconds(a.timestamp);switch(b.action){case "start":case "update":this.isDragging?this.activePointerMap.has(c.native.pointerId)?(this.updatePointer(c),!this.isCurrentDragSuppressed&&this.emitEvent("update",c,d)):(this.addPointer(c),this.emitEvent("added",c,d),this.isCurrentDragSuppressed=this.isSuppressed):(this.updatePointer(c),this.pointerType=a.data.startEvent.pointerType,
this.mouseButton=a.data.startEvent.button,this.startStateModifiers=a.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this.emitEvent("start",c,d))}};Object.defineProperty(d.prototype,"isSuppressed",{get:function(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size},enumerable:!0,configurable:!0});return d}(c.InputHandler);d.Drag=q;(function(a){a[a.Left=0]="Left";
a[a.Middle=1]="Middle";a[a.Right=2]="Right";a[a.Back=3]="Back";a[a.Forward=4]="Forward";a[a.Undefined=-1]="Undefined"})(d.Button||(d.Button={}))})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/clock ../InputHandler ./support".split(" "),function(q,d,n,h,m,c){Object.defineProperty(d,"__esModule",{value:!0});d.DefaultParameters={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilTouchDrag:6,holdDelay:500};
q=function(e){function f(c,b,a,g,k){void 0===c&&(c=d.DefaultParameters.maximumClickDelay);void 0===b&&(b=d.DefaultParameters.movementUntilMouseDrag);void 0===a&&(a=d.DefaultParameters.movementUntilTouchDrag);void 0===g&&(g=d.DefaultParameters.holdDelay);void 0===k&&(k=h.default);var f=e.call(this,!1)||this;f.maximumClickDelay=c;f.movementUntilMouseDrag=b;f.movementUntilTouchDrag=a;f.holdDelay=g;f._clock=k;f._pointerState=new Map;f._pointerDrag=f.registerOutgoing("pointer-drag");f._immediateClick=
f.registerOutgoing("immediate-click");f._pointerHold=f.registerOutgoing("hold");f.registerIncoming("pointer-down",f._handlePointerDown.bind(f));f.registerIncoming("pointer-up",function(a){f._handlePointerLoss(a,"pointer-up")});f.registerIncoming("pointer-capture-lost",function(a){f._handlePointerLoss(a,"pointer-capture-lost")});f.registerIncoming("pointer-cancel",function(a){f._handlePointerLoss(a,"pointer-cancel")});f._moveHandle=f.registerIncoming("pointer-move",f._handlePointerMove.bind(f));f._moveHandle.pause();
return f}n(f,e);f.prototype.onUninstall=function(){this._pointerState.forEach(function(c){null!=c.holdTimeout&&(c.holdTimeout.remove(),c.holdTimeout=null)});e.prototype.onUninstall.call(this)};f.prototype._handlePointerDown=function(c){var b=this,a=c.data,d=a.native.pointerId,e=null;0===this._pointerState.size&&(e=this._clock.setTimeout(function(){var a=b._pointerState.get(d);a&&(a.isDragging||(b._pointerHold.emit(a.previousEvent,void 0,c.modifiers),a.holdEmitted=!0),a.holdTimeout=null)},this.holdDelay));
e={startEvent:a,previousEvent:a,startTimestamp:c.timestamp,isDragging:!1,downButton:a.native.button,holdTimeout:e,modifiers:new Set};this._pointerState.set(d,e);this.startCapturingPointer(a.native);this._moveHandle.resume();1<this._pointerState.size&&this.startDragging(c)};f.prototype._createPointerDragData=function(c,b,a){return{action:c,startEvent:b.startEvent,previousEvent:b.previousEvent,currentEvent:a}};f.prototype._handlePointerMove=function(d){var b=d.data,a=this._pointerState.get(b.native.pointerId);
a&&(a.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",a,b),void 0,a.modifiers):c.euclideanDistance(b,a.startEvent)>("touch"===b.native.pointerType?this.movementUntilTouchDrag:this.movementUntilMouseDrag)&&this.startDragging(d),a.previousEvent=b)};f.prototype.startDragging=function(c){var b=this,a=c.data,d=a.native.pointerId;this._pointerState.forEach(function(g){null!=g.holdTimeout&&(g.holdTimeout.remove(),g.holdTimeout=null);g.isDragging||(g.modifiers=c.modifiers,g.isDragging=
!0,d===g.startEvent.native.pointerId?b._pointerDrag.emit(b._createPointerDragData("start",g,a)):b._pointerDrag.emit(b._createPointerDragData("start",g,g.previousEvent),c.timestamp))})};f.prototype._handlePointerLoss=function(c,b){var a=c.data,d=a.native.pointerId,e=this._pointerState.get(d);e&&(null!=e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null),e.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",e,"pointer-up"===b?a:e.previousEvent),void 0,e.modifiers):"pointer-up"===
b&&e.downButton===a.native.button&&c.timestamp-e.startTimestamp<=this.maximumClickDelay&&!e.holdEmitted&&this._immediateClick.emit(a),this._pointerState.delete(d),this.stopCapturingPointer(a.native),0===this._pointerState.size&&this._moveHandle.pause())};return f}(m.InputHandler);d.PointerClickHoldAndDrag=q})},"esri/views/2d/support/HighlightOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),
function(q,d,n,h,m,c,e){var f=0;return function(c){function b(){var a=null!==c&&c.apply(this,arguments)||this;a.color=new m([0,255,255]);a.haloOpacity=1;a.fillOpacity=.25;return a}n(b,c);Object.defineProperty(b.prototype,"version",{get:function(){return f++},enumerable:!0,configurable:!0});h([e.property({readOnly:!0,dependsOn:["color","haloColor","haloOpacity","fillOpacity"]})],b.prototype,"version",null);h([e.property({type:m})],b.prototype,"color",void 0);h([e.property({type:m})],b.prototype,"haloColor",
void 0);h([e.property()],b.prototype,"haloOpacity",void 0);h([e.property()],b.prototype,"fillOpacity",void 0);return b=h([e.subclass("esri.views.2d.support.HighlightOptions")],b)}(e.declared(c))})},"esri/views/support/screenshotUtils":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/compilerUtils","../../core/mathUtils"],function(q,d,n,h,m){function c(c,d){var g=c||{},e=g.format,f=g.quality,k=g.rotation,g=g.disableSlice,l=a(c,d.padding),w;w=d.width-l.left-l.right;
d=d.height-l.top-l.bottom;l={x:0,y:0,width:w,height:d};if(c&&c.area){null!=c.area.x&&(l.x=Math.floor(c.area.x));null!=c.area.y&&(l.y=Math.floor(c.area.y));var r=null!=c.area.width?Math.floor(c.area.width):null,u=null!=c.area.height?Math.floor(c.area.height):null;l.width=w-l.x;l.height=d-l.y;null!=r&&null!=u?(l.width=Math.min(l.width,r),l.height=Math.min(l.height,u)):null==r&&null!=u?(r=Math.min(l.width,r),l.height*=r/l.width,l.width=r):null!=r&&null==u&&(r=Math.min(l.height,u),l.width*=r/l.height,
l.height=r)}l=b(l,c);r=Math.floor(Math.max(l.x,0));u=Math.floor(Math.max(l.y,0));w={x:r,y:u,width:Math.floor(Math.min(l.width,w-r)),height:Math.floor(Math.min(l.height,d-u))};d=w.width/w.height;l=l.width/l.height;l!==d&&(l>d?(d=Math.floor(w.width/l),w={x:w.x,y:Math.floor(w.y+(w.height-d)/2),width:w.width,height:d}):(d=Math.floor(w.height*l),w={x:Math.floor(w.x+(w.width-d)/2),y:w.y,width:d,height:w.height}));l=p(c,w);d=l.width;l=l.height;a:switch(e){case "png":case "jpg":case "jpeg":break a;case null:case void 0:e=
t;break a;default:h.neverReached(e),e=t}r=J[e];f=m.clamp(null!=f?f:r,0,100);return{format:e,quality:f,area:w,width:d,height:l,rotation:k,disableSlice:!!g,ignoreBackground:!(!c||!c.ignoreBackground),ignorePadding:!(!c||!c.ignorePadding)}}function e(a,b){return a.toDataURL(l[b.format],b.quality/100)}function f(a,b,c){c||(g||(g=document.createElement("canvas"),g.width=1,g.height=1),c=g);return c.getContext("2d").createImageData(a,b)}function p(a,b){if(!a)return b;var c=a.width;a=a.height;if(null!=c&&
null!=a)return{width:Math.floor(c),height:Math.floor(a)};if(null==c&&null==a)return b;b=b.width/b.height;return null==a?{width:Math.floor(c),height:Math.floor(c/b)}:{width:Math.floor(a*b),height:Math.floor(a)}}function b(a,b){if(!b||null==b.width||null==b.height)return a;b=b.width/b.height;var c=a.width/a.height;if(c===b)return a;if(c<b)return b=Math.floor(a.height*b),a.x-=(b-a.width)/2,a.width=b,a;b=Math.floor(a.width/b);a.y-=(b-a.height)/2;a.height=b;return a}function a(a,b){return!b||a&&a.ignorePadding?
u:b}Object.defineProperty(d,"__esModule",{value:!0});d.completeUserSettings=c;d.toRenderSettings=function(b,d){var g=c(b,d),e=g.area,f=g.width/e.width,k=a(g,d.padding),l=k.left+k.right,h=k.top+k.bottom;return{framebufferWidth:Math.floor((d.width-l)*f+l),framebufferHeight:Math.floor((d.height-h)*f+h),region:{x:Math.floor(e.x*f)+k.left,y:Math.floor(e.y*f)+k.top,width:g.width,height:g.height},format:g.format,quality:g.quality,rotation:g.rotation,pixelRatio:f,layers:b&&b.layers?b.layers:[],disableSlice:g.disableSlice,
ignoreBackground:g.ignoreBackground,ignorePadding:g.ignorePadding}};d.encodeResult=function(a,b,c,d){if(d.premultipliedAlpha)for(var g=a.data,f=g.length,k=0;k<f;k+=4){var l=g[k+3];0<l&&(l/=255,g[k+0]/=l,g[k+1]/=l,g[k+2]/=l)}c.width=a.width;c.height=a.height;g=c.getContext("2d");g.putImageData(a,0,0);d.flipY&&(g.save(),g.globalCompositeOperation="copy",g.scale(1,-1),g.translate(0,-g.canvas.height),g.drawImage(g.canvas,0,0),g.restore());a=g.getImageData(0,0,a.width,a.height);b=e(c,b);c.width=0;c.height=
0;return{dataUrl:b,data:a}};d.toDataUrl=e;d.createEmptyImageData=function(a,b,c){if(!a||!b)throw Error("Cannot construct image data without dimensions");if(k)try{return new ImageData(a,b)}catch(G){k=!1}return f(a,b,c)};d.wrapImageData=function(a,b,c,d){if(!b||!c)throw Error("Cannot construct image data without dimensions");if(k)try{return new ImageData(a,b,c)}catch(x){k=!1}b=f(b,c,d);b.data.set(a,0);return b};d.resampleHermite=function(a,b,c,d,g,e,f,k){void 0===d&&(d=0);void 0===g&&(g=0);void 0===
e&&(e=a.width-d);void 0===f&&(f=a.height-g);void 0===k&&(k=!1);var l=a.data,h=b.width,w=b.height,r=b.data;e/=h;f/=w;var t=Math.ceil(e/2),u=Math.ceil(f/2);a=a.width;for(var m=0;m<w;m++)for(var p=0;p<h;p++){for(var B=4*(p+(k?w-m-1:m)*h),n=0,J=0,x=0,q=0,G=0,v=0,z=(m+.5)*f,A=Math.floor(m*f);A<(m+1)*f;A++)for(var U=Math.abs(z-(A+.5))/u,R=(p+.5)*e,U=U*U,Y=Math.floor(p*e);Y<(p+1)*e;Y++){var H=Math.abs(R-(Y+.5))/t,H=Math.sqrt(U+H*H);if(!(1<=H)){var H=2*H*H*H-3*H*H+1,X=4*(d+Y+(g+A)*a),v=v+H*l[X+3],J=J+H;!c&&
255>l[X+3]&&(H=H*l[X+3]/255);x+=H*l[X];q+=H*l[X+1];G+=H*l[X+2];n+=H}}r[B]=x/n;r[B+1]=q/n;r[B+2]=G/n;r[B+3]=v/J}return b};d.screenshotSuperSampleSettings=function(b,c,d){if(!c)return b;c=b.framebufferWidth;var g=b.framebufferHeight,e=b.pixelRatio,f=b.region;d=a(b,d);var k=d.left+d.right,l=d.top+d.bottom,h=c-k,w=g-l,r=Math.min(8,Math.min((2048-k)/h,(2048-l)/w));return 1.5>r?b:n({},b,{framebufferWidth:Math.round(h*r)+k,framebufferHeight:Math.round(w*r)+l,pixelRatio:e*r,resample:{region:{x:Math.round((f.x-
d.left)*r)+d.left,y:Math.round((f.y-d.top)*r)+d.top,width:Math.round(f.width*r),height:Math.round(f.height*r)},width:c,height:g}})};var g=null,k=!0,l={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},t="jpg",J={png:100,jpg:98,jpeg:98},u={top:0,right:0,bottom:0,left:0}})},"esri/views/support/WebGLRequirements":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/Error","../../core/has"],function(q,d,n,h,m){Object.defineProperty(d,"__esModule",{value:!0});var c=
{supportsMajorWebPerformanceCaveat:!1};d.check=function(d){d=n({},c,d);return m("esri-webgl")?!d.supportsMajorWebPerformanceCaveat&&m("esri-webgl-major-performance-caveat")?new h("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is blacklisted."):m("esri-webgl-high-precision-fragment")?m("esri-webgl-vertex-shader-samplers")?m("esri-webgl-element-index-uint")?m("esri-webgl-standard-derivatives")?
m("esri-webgl-instanced-arrays")?null:new h("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported."):new h("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported."):new h("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):new h("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):
new h("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new h("webgl:required","WebGL is required but not supported.")}})},"esri/views/ui/2d/DefaultUI2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../DefaultUI".split(" "),function(q,d,n,h,m,c){return function(c){function d(d){d=c.call(this,d)||this;d.components=
["attribution","zoom"];return d}n(d,c);h([m.property()],d.prototype,"components",void 0);return d=h([m.subclass("esri.views.ui.2d.DefaultUI2D")],d)}(m.declared(c))})},"esri/views/ui/DefaultUI":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),function(q,
d,n,h,m,c,e,f,p,b,a,g){return function(d){function f(a){a=d.call(this,a)||this;a._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"};a.components=[];return a}n(f,d);f.prototype.initialize=function(){this._handles.add([m.init(this,"components",this._componentsWatcher.bind(this)),m.init(this,"view",this._updateViewAwareWidgets.bind(this))])};f.prototype._removeComponents=function(a){var b=this;a.forEach(function(a){if(a=b._find(a))b.remove(a),
a.destroy()})};f.prototype._updateViewAwareWidgets=function(a){var b=this;this.components.forEach(function(c){(c=(c=b._find(c))&&c.widget)&&void 0!==c.view&&(c.view=a)})};f.prototype._componentsWatcher=function(a,b){this._removeComponents(b);this._addComponents(a);this._adjustPadding(a)};f.prototype._adjustPadding=function(a){-1!==a.indexOf("attribution")||this._isOverridden("padding")||(this.padding=this.padding.top)};f.prototype._addComponents=function(a){var b=this;this.initialized&&a.forEach(function(a){return b.add(b._createComponent(a),
b._defaultPositionLookup[a])})};f.prototype._createComponent=function(a){var b=this._createWidget(a);if(b)return new e({id:a,node:b})};f.prototype._createWidget=function(a){if("attribution"===a)return this._createAttribution();if("compass"===a)return this._createCompass();if("navigation-toggle"===a)return this._createNavigationToggle();if("zoom"===a)return this._createZoom()};f.prototype._createAttribution=function(){return new p({view:this.view})};f.prototype._createCompass=function(){return new b({view:this.view})};
f.prototype._createNavigationToggle=function(){return new a({view:this.view})};f.prototype._createZoom=function(){return new g({view:this.view})};h([c.property()],f.prototype,"components",void 0);return f=h([c.subclass("esri.views.ui.DefaultUI")],f)}(c.declared(f))})},"esri/views/ui/Component":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators".split(" "),function(q,
d,n,h,m,c,e){return function(d){function f(){var b=null!==d&&d.apply(this,arguments)||this;b.widget=null;return b}n(f,d);f.prototype.destroy=function(){this.widget&&this.widget.destroy();this.node=null};Object.defineProperty(f.prototype,"id",{get:function(){return this.get("widget.id")||this.get("node.id")},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"node",{set:function(b){var a=this._get("node");b!==a&&(b&&b.classList.add("esri-component"),a&&a.classList.remove("esri-component"),
this._set("node",b))},enumerable:!0,configurable:!0});f.prototype.castNode=function(b){if(!b)return this._set("widget",null),null;if("string"===typeof b||b&&"nodeType"in b)return this._set("widget",null),c.byId(b);b&&"function"===typeof b.render&&!b.domNode&&(b.domNode=document.createElement("div"));this._set("widget",b);return b.domNode};h([e.property()],f.prototype,"id",null);h([e.property()],f.prototype,"node",null);h([e.cast("node")],f.prototype,"castNode",null);h([e.property({readOnly:!0})],
f.prototype,"widget",void 0);return f=h([e.subclass("esri.views.ui.Component")],f)}(e.declared(m))})},"esri/views/ui/UI":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/domUtils ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ./Component ../../widgets/support/widgetUtils".split(" "),function(q,d,n,h,m,c,e,f,p,b,a,g){function k(b){return"object"!==
typeof b||b instanceof a||"declaredClass"in b||!("component"in b||"index"in b||"position"in b)?null:b}function l(a,b){var c=b.bottom,d=b.left,g=b.right;a.style.top=b.top;a.style.bottom=c;a.style.left=d;a.style.right=g}var t={left:0,top:0,bottom:0,right:0},J={bottom:30,top:15,right:15,left:15};return function(d){function e(a){a=d.call(this,a)||this;a._cornerNameToContainerLookup={};a._positionNameToContainerLookup={};a._components=[];a._componentToKey=new Map;a._handles=new f;a.view=null;a._initContainers();
return a}h(e,d);e.prototype.initialize=function(){this._handles.add([p.init(this,"view.padding, container",this._applyViewPadding.bind(this)),p.init(this,"padding",this._applyUIPadding.bind(this))])};e.prototype.destroy=function(){this.container=null;for(var a=0,b=this._components;a<b.length;a++)b[a].destroy();this._components.length=0;this._handles.destroy();this._componentToKey.clear()};Object.defineProperty(e.prototype,"container",{set:function(a){var b=this._get("container");a!==b&&(a&&(a.classList.add("esri-ui"),
this._attachContainers(a)),b&&(b.classList.remove("esri-ui"),l(b,{top:"",bottom:"",left:"",right:""}),c.empty(b)),this._set("container",a))},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"height",{get:function(){var a=this.get("view.height")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.top+b.bottom),0)},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"padding",{get:function(){return this._get("padding")},set:function(a){a?this._override("padding",
a):this._clearOverride("padding")},enumerable:!0,configurable:!0});e.prototype.castPadding=function(a){return"number"===typeof a?{bottom:a,top:a,right:a,left:a}:n({},J,a)};Object.defineProperty(e.prototype,"width",{get:function(){var a=this.get("view.width")||0;if(0===a)return a;var b=this._getViewPadding();return Math.max(a-(b.left+b.right),0)},enumerable:!0,configurable:!0});e.prototype.add=function(b,c){var d=this,g,e;if(Array.isArray(b))b.forEach(function(a){return d.add(a,c)});else{var f=k(b);
f&&(g=f.index,c=f.position,b=f.component,e=f.key);c&&"object"===typeof c&&(g=c.index,e=c.key,c=c.position);!b||c&&!this._isValidPosition(c)||(b instanceof a||(b=new a({node:b})),this._place({component:b,position:c,index:g}),this._components.push(b),e&&this._componentToKey.set(b,e))}};e.prototype.remove=function(a,b){var c=this;if(a){if(Array.isArray(a))return a.map(function(a){return c.remove(a,b)});var d=this._find(a);if(d){var g=this._componentToKey;if(!g.has(a)||g.get(a)===b)return g=this._components.indexOf(d),
d.node.parentNode&&d.node.parentNode.removeChild(d.node),this._componentToKey.delete(a),this._components.splice(g,1)[0]}}};e.prototype.empty=function(a){var b=this;if(Array.isArray(a))return a.map(function(a){return b.empty(a)}).reduce(function(a,b){return a.concat(b)});a=a||"manual";return"manual"===a?Array.prototype.slice.call(this._manualContainer.children).filter(function(a){return!a.classList.contains("esri-ui-corner")}).map(function(a){return b.remove(a)}):this._isValidPosition(a)?Array.prototype.slice.call(this._cornerNameToContainerLookup[a].children).map(this.remove,
this):null};e.prototype.move=function(a,b){var c=this;Array.isArray(a)&&a.forEach(function(a){return c.move(a,b)});if(a){var d,g=k(a)||k(b);g&&(d=g.index,b=g.position,a=g.component||a);(!b||this._isValidPosition(b))&&(a=this.remove(a))&&this.add(a,{position:b,index:d})}};e.prototype.find=function(a){return a?(a=this._findById(a))&&(a.widget||a.node):null};e.prototype._find=function(b){return b?b instanceof a?this._findByComponent(b):"string"===typeof b?this._findById(b):this._findByNode(b.domNode||
b):null};e.prototype._getViewPadding=function(){return this.get("view.padding")||t};e.prototype._attachContainers=function(a){a.appendChild(this._innerContainer);a.appendChild(this._manualContainer)};e.prototype._initContainers=function(){var a=document.createElement("div");a.classList.add("esri-ui-inner-container");a.classList.add("esri-ui-corner-container");var b=document.createElement("div");b.classList.add("esri-ui-inner-container");b.classList.add("esri-ui-manual-container");var c=document.createElement("div");
c.classList.add("esri-ui-top-left");c.classList.add("esri-ui-corner");a.appendChild(c);var d=document.createElement("div");d.classList.add("esri-ui-top-right");d.classList.add("esri-ui-corner");a.appendChild(d);var e=document.createElement("div");e.classList.add("esri-ui-bottom-left");e.classList.add("esri-ui-corner");a.appendChild(e);var f=document.createElement("div");f.classList.add("esri-ui-bottom-right");f.classList.add("esri-ui-corner");a.appendChild(f);this._innerContainer=a;this._manualContainer=
b;a=g.isRTL();this._cornerNameToContainerLookup={"top-left":c,"top-right":d,"bottom-left":e,"bottom-right":f,"top-leading":a?d:c,"top-trailing":a?c:d,"bottom-leading":a?f:e,"bottom-trailing":a?e:f};this._positionNameToContainerLookup=n({manual:b},this._cornerNameToContainerLookup)};e.prototype._isValidPosition=function(a){return!!this._positionNameToContainerLookup[a]};e.prototype._place=function(a){var b=a.component,d=a.index;a=this._positionNameToContainerLookup[a.position||"manual"];var g=-1<d,
e=b.widget;e&&!e._started&&"function"===typeof e.postMixInProperties&&"function"===typeof e.buildRendering&&"function"===typeof e.postCreate&&"function"===typeof e.startup&&b.widget.startup();g?(g=Array.prototype.slice.call(a.children),0===d?a.firstChild?c.insertBefore(b.node,a.firstChild):a.appendChild(b.node):d>=g.length?a.appendChild(b.node):c.insertBefore(b.node,g[d])):a.appendChild(b.node)};e.prototype._applyViewPadding=function(){var a=this.container;a&&l(a,this._toPxPosition(this._getViewPadding()))};
e.prototype._applyUIPadding=function(){var a=this._innerContainer;a&&l(a,this._toPxPosition(this.padding))};e.prototype._toPxPosition=function(a){return{top:this._toPxUnit(a.top),left:this._toPxUnit(a.left),right:this._toPxUnit(a.right),bottom:this._toPxUnit(a.bottom)}};e.prototype._toPxUnit=function(a){return 0===a?"0":a+"px"};e.prototype._findByComponent=function(a){var b=null,c;this._components.some(function(d){(c=d===a)&&(b=d);return c});return b};e.prototype._findById=function(a){var b=null,
c;this._components.some(function(d){(c=d.id===a)&&(b=d);return c});return b};e.prototype._findByNode=function(a){var b=null,c;this._components.some(function(d){(c=d.node===a)&&(b=d);return c});return b};m([b.property()],e.prototype,"container",null);m([b.property({dependsOn:["view.height"]})],e.prototype,"height",null);m([b.property({value:J})],e.prototype,"padding",null);m([b.cast("padding")],e.prototype,"castPadding",null);m([b.property()],e.prototype,"view",void 0);m([b.property({dependsOn:["view.width"]})],
e.prototype,"width",null);return e=m([b.subclass("esri.views.ui.UI")],e)}(b.declared(e.EventedAccessor))})},"esri/widgets/Attribution":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Attribution/nls/Attribution ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Attribution/AttributionViewModel ./support/widget".split(" "),function(q,d,n,h,m,c,e,f,p,b){return function(a){function d(b){b=a.call(this,b)||this;b._isOpen=
!1;b._attributionTextOverflowed=!1;b._prevSourceNodeHeight=0;b.iconClass="esri-icon-description";b.itemDelimiter=" | ";b.label=m.widgetLabel;b.view=null;b.viewModel=new p;return b}n(d,a);d.prototype.postInitialize=function(){var a=this;this.own(c.on(this,"viewModel.items","change",function(){return a.scheduleRender()}))};Object.defineProperty(d.prototype,"attributionText",{get:function(){return this.viewModel.items.reduce(function(a,b){-1===a.indexOf(b.text)&&a.push(b.text);return a},[]).join(this.itemDelimiter)},
enumerable:!0,configurable:!0});d.prototype.render=function(){var a,c=(a={},a["esri-attribution--open"]=this._isOpen,a);return b.tsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",c),onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),b.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",b.tsx("a",{class:this.classes("esri-attribution__link","esri-widget__anchor"),href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri")))};
d.prototype._renderSourcesNode=function(){var a,c=this._isOpen,d=this._isInteractive(),g=d?0:-1,e=this.attributionText,f=d?"button":void 0,c=(a={},a["esri-attribution__sources--open"]=c,a["esri-interactive"]=d,a);return b.tsx("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes("esri-attribution__sources",c),innerHTML:e,role:f,tabIndex:g})};d.prototype._afterSourcesNodeCreate=function(a){this._prevSourceNodeHeight=a.clientWidth};d.prototype._afterSourcesNodeUpdate=
function(a){var b=!1,c=a.clientHeight;a=a.scrollWidth>=a.clientWidth;var d=this._attributionTextOverflowed!==a;this._attributionTextOverflowed=a;d&&(b=!0);this._isOpen&&(a=c<this._prevSourceNodeHeight,this._prevSourceNodeHeight=c,a&&(this._isOpen=!1,b=!0));b&&this.scheduleRender()};d.prototype._toggleState=function(){this._isInteractive()&&(this._isOpen=!this._isOpen)};d.prototype._isInteractive=function(){return this._isOpen||this._attributionTextOverflowed};h([e.property({dependsOn:["viewModel.items.length",
"itemDelimiter"],readOnly:!0}),b.renderable()],d.prototype,"attributionText",null);h([e.property()],d.prototype,"iconClass",void 0);h([e.property(),b.renderable()],d.prototype,"itemDelimiter",void 0);h([e.property()],d.prototype,"label",void 0);h([e.aliasOf("viewModel.view")],d.prototype,"view",void 0);h([e.property({type:p}),b.renderable(["state","view.size"])],d.prototype,"viewModel",void 0);h([b.accessibleHandler()],d.prototype,"_toggleState",null);return d=h([e.subclass("esri.widgets.Attribution")],
d)}(e.declared(f))})},"esri/widgets/Attribution/AttributionViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/awaiterHelper ../../core/tsSupport/generatorHelper ../../geometry ../../core/arrayUtils ../../core/asyncUtils ../../core/Collection ../../core/HandleOwner ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/contains ../../geometry/support/webMercatorUtils".split(" "),
function(q,d,n,h,m,c,e,f,p,b,a,g,k,l,t){function J(a,b){return a.length!==b.length||a.some(function(a,c){return a.text!==b[c].text})}function u(a,b,c){c&&b&&(f.find(a,function(a){return a.layerView===b&&a.text===c})||a.push({text:c,layerView:b}))}var r=[];return function(a){function d(c){var d=a.call(this,c)||this;d.clear=function(){d._fetchedAttributionData.clear();d._pendingAttributions.clear();d.handles.remove("suspension");d.notifyChange("state")};d._pendingAttributions=new Set;d._fetchedAttributionData=
new Map;d.items=new b;d.view=null;d._allLayerViewsChange=function(a){d.handles.remove("suspension");var b=d.get("view.allLayerViews");b&&d.handles.add(b.map(function(a){return a.watch(["suspended","attributionVisible"],d._updateAttributionItems)}),"suspension");a&&a.removed&&a.removed.forEach(function(a){d._pendingAttributions.delete(a);d._fetchedAttributionData.delete(a)});d._updateAttributionItems()};d._updateAttributionItems=function(){var a=d.get("view.allLayerViews");r.length=0;a?(a.forEach(function(a){if(!a.suspended&&
a.get("layer.attributionVisible")){var b=a.layer;if(b&&"function"===typeof b.originOf&&"user"===b.originOf("copyright"))u(r,a,b.copyright);else if(b.hasAttributionData)if(d._fetchedAttributionData.has(a)){var c=d._fetchedAttributionData.get(a);c&&u(r,a,d._getDynamicAttribution(c,d.view,b))}else d._fetchAttributionData(a);else(c=b.get("portalItem.accessInformation"))?u(r,a,c):u(r,a,b.copyright)}}),J(d.items,r)&&(d.items.removeAll(),d.items.addMany(r)),d.notifyChange("state")):d.clear()};d.handles.add([g.on(d,
"view.allLayerViews","change",d._allLayerViewsChange,d._allLayerViewsChange,d.clear),g.whenTrue(d,"view.stationary",function(){return d._updateAttributionItems()})]);return d}n(d,a);d.prototype.destroy=function(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear()};Object.defineProperty(d.prototype,"state",{get:function(){return this.get("view.ready")?0<this._pendingAttributions.size?"loading":"ready":"disabled"},enumerable:!0,configurable:!0});d.prototype._fetchAttributionData=
function(a){return m(this,void 0,void 0,function(){var b,d;return c(this,function(c){switch(c.label){case 0:if(this._pendingAttributions.has(a))return[2];this._pendingAttributions.add(a);return[4,p.result(a.layer.fetchAttributionData())];case 1:return b=c.sent(),this._pendingAttributions.has(a)&&(d=b.ok?this._createContributionIndex(b.value,"bing-maps"===a.layer.type):null,this._pendingAttributions.delete(a),this._fetchedAttributionData.set(a,d)),this._updateAttributionItems(),[2]}})})};d.prototype._createContributionIndex=
function(a,b){a=a.contributors;var c={};if(!a)return c;for(var d=0;d<a.length;d++){var g=a[d],f=g.coverageAreas;if(!f)return;for(var k=0;k<f.length;k++)for(var l=f[k],h=l.bbox,r=l.zoomMin-(b&&l.zoomMin?1:0),m=l.zoomMax-(b&&l.zoomMax?1:0),l={extent:t.geographicToWebMercator({xmin:h[1],ymin:h[0],xmax:h[3],ymax:h[2],spatialReference:e.SpatialReference.WGS84}),attribution:g.attribution||"",score:null!=l.score?l.score:100,id:d};r<=m;r++)c[r]=c[r]||[],c[r].push(l)}c.maxKey=Math.max.apply(null,Object.keys(c));
return c};d.prototype._getDynamicAttribution=function(a,b,c){var d=b.extent;c=c.tileInfo.scaleToZoom(b.scale);c=Math.min(a.maxKey,Math.round(c));if(!d||null==c||-1>=c)return"";a=a[c];var g=t.project(d.center.clone().normalize(),b.spatialReference),e={};return a?a.filter(function(a){var b=!e[a.id]&&g&&l.extentContainsPoint(a.extent,g);b&&(e[a.id]=!0);return b}).sort(function(a,b){return b.score-a.score||a.objectId-b.objectId}).map(function(a){return a.attribution}).join(", "):""};h([k.property({readOnly:!0,
type:b})],d.prototype,"items",void 0);h([k.property({dependsOn:["view.ready"],readOnly:!0})],d.prototype,"state",null);h([k.property()],d.prototype,"view",void 0);return d=h([k.subclass("esri.widgets.Attribution.AttributionViewModel")],d)}(k.declared(a.HandleOwner))})},"esri/widgets/Compass":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Compass/nls/Compass ../core/accessorSupport/decorators ./Widget ./Compass/CompassViewModel ./support/widget".split(" "),
function(q,d,n,h,m,c,e,f,p){return function(b){function a(a){a=b.call(this,a)||this;a.goToOverride=null;a.iconClass="esri-icon-locate-circled";a.label=m.widgetLabel;a.view=null;a.viewModel=new f;return a}n(a,b);a.prototype.reset=function(){};a.prototype.render=function(){var a,b,c=this.viewModel,d=c.orientation,c=c.state,e="disabled"===c,f="compass"===("rotation"===c?"rotation":"compass"),c=e?-1:0,e=(a={},a["esri-disabled"]=e,a["esri-interactive"]=!e,a);a=(b={},b["esri-icon-compass"]=f,b["esri-icon-dial"]=
!f,b);return p.tsx("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",e),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:c,"aria-label":m.reset,title:m.reset},p.tsx("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",a),styles:this._toRotationTransform(d)}),p.tsx("span",{class:"esri-icon-font-fallback-text"},m.reset))};a.prototype._reset=function(){this.viewModel.reset()};a.prototype._toRotationTransform=function(a){return{transform:"rotateZ("+
a.z+"deg)"}};h([c.aliasOf("viewModel.goToOverride")],a.prototype,"goToOverride",void 0);h([c.property()],a.prototype,"iconClass",void 0);h([c.property()],a.prototype,"label",void 0);h([c.aliasOf("viewModel.view")],a.prototype,"view",void 0);h([c.property({type:f}),p.renderable(["viewModel.orientation","viewModel.state"])],a.prototype,"viewModel",void 0);h([c.aliasOf("viewModel.reset")],a.prototype,"reset",null);h([p.accessibleHandler()],a.prototype,"_reset",null);return a=h([c.subclass("esri.widgets.Compass")],
a)}(c.declared(e))})},"esri/widgets/Compass/CompassViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators ../support/GoTo".split(" "),function(q,d,n,h,m,c,e,f,p){return function(b){function a(a){a=b.call(this,a)||this;a._handles=new c;a.orientation={x:0,y:0,z:0};a.view=null;a._updateForCamera=a._updateForCamera.bind(a);a._updateForRotation=
a._updateForRotation.bind(a);a._updateRotationWatcher=a._updateRotationWatcher.bind(a);a.view;return a}n(a,b);a.prototype.initialize=function(){this._handles.add(e.init(this,"view",this._updateRotationWatcher))};a.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(a.prototype,"canShowNorth",{get:function(){var a=this.get("view.spatialReference");return!(!a||!a.isWebMercator&&!a.isGeographic)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"state",{get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"},enumerable:!0,configurable:!0});a.prototype.reset=function(){if(this.get("view.ready")){var a={};"2d"===this.view.type?a.rotation=0:a.heading=0;this.callGoTo({target:a})}};a.prototype._updateForRotation=function(a){void 0!==a&&null!==a&&(this.orientation={z:a})};a.prototype._updateForCamera=function(a){a&&(this.orientation={x:0,y:0,z:-a.heading})};a.prototype._updateRotationWatcher=function(a){this._handles.removeAll();
a&&("2d"===a.type?this._handles.add(e.init(this,"view.rotation",this._updateForRotation)):this._handles.add(e.init(this,"view.camera",this._updateForCamera)))};h([f.property({dependsOn:["view.spatialReference.isWebMercator","view.spatialReference.wkid"],readOnly:!0})],a.prototype,"canShowNorth",null);h([f.property()],a.prototype,"orientation",void 0);h([f.property({dependsOn:["view.ready","canShowNorth"],readOnly:!0})],a.prototype,"state",null);h([f.property()],a.prototype,"view",void 0);h([f.property()],
a.prototype,"reset",null);return a=h([f.subclass("esri.widgets.CompassViewModel")],a)}(f.declared(p.GoToMixin(m)))})},"esri/widgets/NavigationToggle":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./NavigationToggle/nls/NavigationToggle ../core/accessorSupport/decorators ./Widget ./NavigationToggle/NavigationToggleViewModel ./support/widget".split(" "),function(q,d,n,h,m,c,e,f,p){return function(b){function a(a){a=b.call(this,a)||
this;a.iconClass="esri-icon-pan2";a.label=m.widgetLabel;a.view=null;a.viewModel=new f;return a}n(a,b);Object.defineProperty(a.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});a.prototype.toggle=function(){};a.prototype.render=function(){var a,b,c,d="disabled"===this.get("viewModel.state"),e="pan"===this.get("viewModel.navigationMode"),f=(a={},a["esri-disabled"]=d,a["esri-navigation-toggle--horizontal"]="horizontal"===this.layout,
a);a=(b={},b["esri-navigation-toggle__button--active"]=e,b);b=(c={},c["esri-navigation-toggle__button--active"]=!e,c);c=d?-1:0;return p.tsx("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",f),onclick:this._toggle,onkeydown:this._toggle,tabIndex:c,"aria-label":m.toggle,title:m.toggle},p.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--pan",a)},p.tsx("span",{class:"esri-icon-pan"})),p.tsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button",
"esri-navigation-toggle__button--rotate",b)},p.tsx("span",{class:"esri-icon-rotate"})))};a.prototype._toggle=function(){this.toggle()};h([c.property()],a.prototype,"iconClass",void 0);h([c.property()],a.prototype,"label",void 0);h([c.property({value:"vertical"}),p.renderable()],a.prototype,"layout",null);h([c.aliasOf("viewModel.view"),p.renderable()],a.prototype,"view",void 0);h([c.property({type:f}),p.renderable(["viewModel.state","viewModel.navigationMode"])],a.prototype,"viewModel",void 0);h([c.aliasOf("viewModel.toggle")],
a.prototype,"toggle",null);h([p.accessibleHandler()],a.prototype,"_toggle",null);return a=h([c.subclass("esri.widgets.NavigationToggle")],a)}(c.declared(e))})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Handles ../../core/watchUtils ../../core/accessorSupport/decorators".split(" "),function(q,d,n,h,m,c,e,f){return function(d){function b(a){a=
d.call(this,a)||this;a._handles=new c;a.navigationMode="pan";a.view=null;a.toggle=a.toggle.bind(a);return a}n(b,d);b.prototype.initialize=function(){this._handles.add(e.when(this,"view.inputManager",this._setNavigationMode.bind(this)))};b.prototype.destroy=function(){this._handles.destroy();this.view=this._handles=null};Object.defineProperty(b.prototype,"state",{get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"},enumerable:!0,configurable:!0});b.prototype.toggle=
function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};b.prototype._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};h([f.property({dependsOn:["view.ready"],readOnly:!0})],b.prototype,"state",null);h([f.property()],b.prototype,"navigationMode",void 0);h([f.property()],b.prototype,"view",void 0);h([f.property()],b.prototype,"toggle",null);return b=h([f.subclass("esri.widgets.NavigationToggleViewModel")],
b)}(f.declared(m))})},"esri/widgets/Zoom":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/i18n!./Zoom/nls/Zoom ../core/accessorSupport/decorators ./Widget ./Zoom/IconButton ./Zoom/ZoomViewModel ./support/widget".split(" "),function(q,d,n,h,m,c,e,f,p,b){return function(a){function d(b){b=a.call(this,b)||this;b.iconClass="esri-icon-zoom-in-magnifying-glass";b.label=m.widgetLabel;b.view=null;b.viewModel=new p;return b}n(d,a);d.prototype.postInitialize=
function(){this._zoomInButton=new f({action:this.zoomIn,iconClass:"esri-icon-plus",title:m.zoomIn});this._zoomOutButton=new f({action:this.zoomOut,iconClass:"esri-icon-minus",title:m.zoomOut})};Object.defineProperty(d.prototype,"layout",{set:function(a){"horizontal"!==a&&(a="vertical");this._set("layout",a)},enumerable:!0,configurable:!0});d.prototype.render=function(){var a,c=this.viewModel,d=(a={},a["esri-zoom--horizontal"]="horizontal"===this.layout,a);this._zoomInButton.enabled="ready"===c.state&&
c.canZoomIn;this._zoomOutButton.enabled="ready"===c.state&&c.canZoomOut;return b.tsx("div",{class:this.classes("esri-zoom esri-widget",d)},this._zoomInButton.render(),this._zoomOutButton.render())};d.prototype.zoomIn=function(){};d.prototype.zoomOut=function(){};h([c.property()],d.prototype,"iconClass",void 0);h([c.property()],d.prototype,"label",void 0);h([c.property({value:"vertical"}),b.renderable()],d.prototype,"layout",null);h([c.aliasOf("viewModel.view"),b.renderable()],d.prototype,"view",void 0);
h([c.property({type:p}),b.renderable(["viewModel.canZoomIn","viewModel.canZoomOut","viewModel.state"])],d.prototype,"viewModel",void 0);h([c.aliasOf("viewModel.zoomIn")],d.prototype,"zoomIn",null);h([c.aliasOf("viewModel.zoomOut")],d.prototype,"zoomOut",null);return d=h([c.subclass("esri.widgets.Zoom")],d)}(c.declared(e))})},"esri/widgets/Zoom/IconButton":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../Widget ../support/widget".split(" "),
function(q,d,n,h,m,c,e){return function(c){function d(){var b=null!==c&&c.apply(this,arguments)||this;b.enabled=!0;b.iconClass="";b.title="";return b}n(d,c);d.prototype.render=function(){var b,a,c=this.enabled?0:-1,d=(b={},b["esri-disabled"]=!this.enabled,b["esri-interactive"]=this.enabled,b);b=(a={},a[this.iconClass]=!!this.iconClass,a);return e.tsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",d),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:c,
title:this.title},e.tsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",b)}),e.tsx("span",{class:"esri-icon-font-fallback-text"},this.title))};d.prototype._triggerAction=function(){this.action.call(this)};h([m.property()],d.prototype,"action",void 0);h([m.property(),e.renderable()],d.prototype,"enabled",void 0);h([m.property(),e.renderable()],d.prototype,"iconClass",void 0);h([m.property(),e.renderable()],d.prototype,"title",void 0);h([e.accessibleHandler()],d.prototype,
"_triggerAction",null);return d=h([m.subclass("esri.widgets.IconButton")],d)}(m.declared(c))})},"esri/widgets/Zoom/ZoomViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(q,d,n,h,m,c,e,f){return function(d){function b(a){a=d.call(this,a)||this;a.canZoomIn=!1;a.canZoomOut=!1;a.zoomIn=a.zoomIn.bind(a);a.zoomOut=a.zoomOut.bind(a);
return a}n(b,d);b.prototype.destroy=function(){this.view=null};Object.defineProperty(b.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"view",{set:function(a){a?"2d"===a.type?this._zoomConditions=new e({view:a}):"3d"===a.type&&(this._zoomConditions=new f({view:a})):this._zoomConditions=null;this._set("view",a)},enumerable:!0,configurable:!0});b.prototype.zoomIn=function(){if(this.canZoomIn){var a=
this.view;"2d"===a.type?a.mapViewNavigation.zoomIn():a.goTo({zoomFactor:2})}};b.prototype.zoomOut=function(){if(this.canZoomOut){var a=this.view;"2d"===a.type?a.mapViewNavigation.zoomOut():a.goTo({zoomFactor:.5})}};h([c.property()],b.prototype,"_zoomConditions",void 0);h([c.property({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],b.prototype,"canZoomIn",void 0);h([c.property({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],b.prototype,"canZoomOut",void 0);h([c.property({dependsOn:["view.ready"],
readOnly:!0})],b.prototype,"state",null);h([c.property()],b.prototype,"view",null);h([c.property()],b.prototype,"zoomIn",null);h([c.property()],b.prototype,"zoomOut",null);return b=h([c.subclass("esri.widgets.Zoom.ZoomViewModel")],b)}(c.declared(m))})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(q,d,n,h,m,c){return function(d){function e(){return null!==
d&&d.apply(this,arguments)||this}n(e,d);Object.defineProperty(e.prototype,"canZoomIn",{get:function(){if(!this.get("view.ready"))return!1;var c=this.get("view.animation.target.scale")||this.get("view.scale"),b=this.get("view.constraints.effectiveMaxScale");return 0===b||c>b},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"canZoomOut",{get:function(){if(!this.get("view.ready"))return!1;var c=this.get("view.animation.target.scale")||this.get("view.scale"),b=this.get("view.constraints.effectiveMinScale");
return 0===b||c<b},enumerable:!0,configurable:!0});h([c.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMaxScale"],readOnly:!0})],e.prototype,"canZoomIn",null);h([c.property({dependsOn:["view.ready","view.scale","view.animation.target.scale","view.constraints.effectiveMinScale"],readOnly:!0})],e.prototype,"canZoomOut",null);h([c.property()],e.prototype,"view",void 0);return e=h([c.subclass("esri.widgets.Zoom.ZoomConditions2D")],e)}(c.declared(m))})},
"esri/widgets/Zoom/ZoomConditions3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(q,d,n,h,m,c){return function(d){function e(){return null!==d&&d.apply(this,arguments)||this}n(e,d);Object.defineProperty(e.prototype,"canZoomIn",{get:function(){return!!this.get("view.ready")},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"canZoomOut",
{get:function(){return!!this.get("view.ready")},enumerable:!0,configurable:!0});h([c.property({dependsOn:["view.ready"],readOnly:!0})],e.prototype,"canZoomIn",null);h([c.property({dependsOn:["view.ready"],readOnly:!0})],e.prototype,"canZoomOut",null);h([c.property()],e.prototype,"view",void 0);return e=h([c.subclass("esri.widgets.Zoom.ZoomConditions3D")],e)}(c.declared(m))})},"esri/core/libs/gl-matrix-2/mat4":function(){define(["require","exports","./math/mat4"],function(q,d,n){Object.defineProperty(d,
"__esModule",{value:!0});d.mat4=n})},"esri/core/libs/gl-matrix-2/math/mat4":function(){define(["require","exports","../factories/vec3f64","./common"],function(q,d,n,h){function m(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function c(b,a,c){var d=a[0],g=a[1],e=a[2],f=a[3],h=a[4],r=a[5],m=a[6],p=a[7],n=a[8],q=a[9],v=a[10],z=a[11],A=a[12],y=a[13],I=a[14];a=a[15];var C=c[0],E=c[1],D=c[2],F=c[3];b[0]=C*d+E*h+D*n+F*A;
b[1]=C*g+E*r+D*q+F*y;b[2]=C*e+E*m+D*v+F*I;b[3]=C*f+E*p+D*z+F*a;C=c[4];E=c[5];D=c[6];F=c[7];b[4]=C*d+E*h+D*n+F*A;b[5]=C*g+E*r+D*q+F*y;b[6]=C*e+E*m+D*v+F*I;b[7]=C*f+E*p+D*z+F*a;C=c[8];E=c[9];D=c[10];F=c[11];b[8]=C*d+E*h+D*n+F*A;b[9]=C*g+E*r+D*q+F*y;b[10]=C*e+E*m+D*v+F*I;b[11]=C*f+E*p+D*z+F*a;C=c[12];E=c[13];D=c[14];F=c[15];b[12]=C*d+E*h+D*n+F*A;b[13]=C*g+E*r+D*q+F*y;b[14]=C*e+E*m+D*v+F*I;b[15]=C*f+E*p+D*z+F*a;return b}function e(b,a,c){var d=a[0],g=a[1],e=a[2],f=a[3],h=d+d,r=g+g,m=e+e;a=d*h;var p=d*
r,d=d*m,n=g*r,g=g*m,e=e*m,h=f*h,r=f*r,f=f*m;b[0]=1-(n+e);b[1]=p+f;b[2]=d-r;b[3]=0;b[4]=p-f;b[5]=1-(a+e);b[6]=g+h;b[7]=0;b[8]=d+r;b[9]=g-h;b[10]=1-(a+n);b[11]=0;b[12]=c[0];b[13]=c[1];b[14]=c[2];b[15]=1;return b}function f(b,a,c){b[0]=a[0]-c[0];b[1]=a[1]-c[1];b[2]=a[2]-c[2];b[3]=a[3]-c[3];b[4]=a[4]-c[4];b[5]=a[5]-c[5];b[6]=a[6]-c[6];b[7]=a[7]-c[7];b[8]=a[8]-c[8];b[9]=a[9]-c[9];b[10]=a[10]-c[10];b[11]=a[11]-c[11];b[12]=a[12]-c[12];b[13]=a[13]-c[13];b[14]=a[14]-c[14];b[15]=a[15]-c[15];return b}Object.defineProperty(d,
"__esModule",{value:!0});d.copy=function(b,a){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};d.set=function(b,a,c,d,e,f,h,m,r,p,n,q,x,v,z,A,y){b[0]=a;b[1]=c;b[2]=d;b[3]=e;b[4]=f;b[5]=h;b[6]=m;b[7]=r;b[8]=p;b[9]=n;b[10]=q;b[11]=x;b[12]=v;b[13]=z;b[14]=A;b[15]=y;return b};d.identity=m;d.transpose=function(b,a){if(b===a){var c=a[1],d=a[2],e=a[3],f=a[6],h=a[7],m=a[11];
b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=c;b[6]=a[9];b[7]=a[13];b[8]=d;b[9]=f;b[11]=a[14];b[12]=e;b[13]=h;b[14]=m}else b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b};d.invert=function(b,a){var c=a[0],d=a[1],e=a[2],f=a[3],h=a[4],m=a[5],r=a[6],p=a[7],n=a[8],q=a[9],x=a[10],v=a[11],z=a[12],A=a[13],y=a[14];a=a[15];var I=c*m-d*h,C=c*r-e*h,E=c*p-f*h,D=d*r-e*m,F=d*p-f*m,P=e*p-
f*r,Q=n*A-q*z,L=n*y-x*z,N=n*a-v*z,M=q*y-x*A,S=q*a-v*A,O=x*a-v*y,K=I*O-C*S+E*M+D*N-F*L+P*Q;if(!K)return null;K=1/K;b[0]=(m*O-r*S+p*M)*K;b[1]=(e*S-d*O-f*M)*K;b[2]=(A*P-y*F+a*D)*K;b[3]=(x*F-q*P-v*D)*K;b[4]=(r*N-h*O-p*L)*K;b[5]=(c*O-e*N+f*L)*K;b[6]=(y*E-z*P-a*C)*K;b[7]=(n*P-x*E+v*C)*K;b[8]=(h*S-m*N+p*Q)*K;b[9]=(d*N-c*S-f*Q)*K;b[10]=(z*F-A*E+a*I)*K;b[11]=(q*E-n*F-v*I)*K;b[12]=(m*L-h*M-r*Q)*K;b[13]=(c*M-d*L+e*Q)*K;b[14]=(A*C-z*D-y*I)*K;b[15]=(n*D-q*C+x*I)*K;return b};d.adjoint=function(b,a){var c=a[0],
d=a[1],e=a[2],f=a[3],h=a[4],m=a[5],r=a[6],p=a[7],n=a[8],q=a[9],x=a[10],v=a[11],z=a[12],A=a[13],y=a[14];a=a[15];b[0]=m*(x*a-v*y)-q*(r*a-p*y)+A*(r*v-p*x);b[1]=-(d*(x*a-v*y)-q*(e*a-f*y)+A*(e*v-f*x));b[2]=d*(r*a-p*y)-m*(e*a-f*y)+A*(e*p-f*r);b[3]=-(d*(r*v-p*x)-m*(e*v-f*x)+q*(e*p-f*r));b[4]=-(h*(x*a-v*y)-n*(r*a-p*y)+z*(r*v-p*x));b[5]=c*(x*a-v*y)-n*(e*a-f*y)+z*(e*v-f*x);b[6]=-(c*(r*a-p*y)-h*(e*a-f*y)+z*(e*p-f*r));b[7]=c*(r*v-p*x)-h*(e*v-f*x)+n*(e*p-f*r);b[8]=h*(q*a-v*A)-n*(m*a-p*A)+z*(m*v-p*q);b[9]=-(c*
(q*a-v*A)-n*(d*a-f*A)+z*(d*v-f*q));b[10]=c*(m*a-p*A)-h*(d*a-f*A)+z*(d*p-f*m);b[11]=-(c*(m*v-p*q)-h*(d*v-f*q)+n*(d*p-f*m));b[12]=-(h*(q*y-x*A)-n*(m*y-r*A)+z*(m*x-r*q));b[13]=c*(q*y-x*A)-n*(d*y-e*A)+z*(d*x-e*q);b[14]=-(c*(m*y-r*A)-h*(d*y-e*A)+z*(d*r-e*m));b[15]=c*(m*x-r*q)-h*(d*x-e*q)+n*(d*r-e*m);return b};d.determinant=function(b){var a=b[0],c=b[1],d=b[2],e=b[3],f=b[4],h=b[5],m=b[6],r=b[7],p=b[8],n=b[9],q=b[10],x=b[11],v=b[12],z=b[13],A=b[14];b=b[15];return(a*h-c*f)*(q*b-x*A)-(a*m-d*f)*(n*b-x*z)+(a*
r-e*f)*(n*A-q*z)+(c*m-d*h)*(p*b-x*v)-(c*r-e*h)*(p*A-q*v)+(d*r-e*m)*(p*z-n*v)};d.multiply=c;d.translate=function(b,a,c){var d=c[0],e=c[1];c=c[2];var g=void 0,f=void 0,h=void 0,m=void 0,p=void 0,n=void 0,q=void 0,x=void 0,v=void 0,z=void 0,A=void 0,y=void 0;a===b?(b[12]=a[0]*d+a[4]*e+a[8]*c+a[12],b[13]=a[1]*d+a[5]*e+a[9]*c+a[13],b[14]=a[2]*d+a[6]*e+a[10]*c+a[14],b[15]=a[3]*d+a[7]*e+a[11]*c+a[15]):(g=a[0],f=a[1],h=a[2],m=a[3],p=a[4],n=a[5],q=a[6],x=a[7],v=a[8],z=a[9],A=a[10],y=a[11],b[0]=g,b[1]=f,b[2]=
h,b[3]=m,b[4]=p,b[5]=n,b[6]=q,b[7]=x,b[8]=v,b[9]=z,b[10]=A,b[11]=y,b[12]=g*d+p*e+v*c+a[12],b[13]=f*d+n*e+z*c+a[13],b[14]=h*d+q*e+A*c+a[14],b[15]=m*d+x*e+y*c+a[15]);return b};d.scale=function(b,a,c){var d=c[0],e=c[1];c=c[2];b[0]=a[0]*d;b[1]=a[1]*d;b[2]=a[2]*d;b[3]=a[3]*d;b[4]=a[4]*e;b[5]=a[5]*e;b[6]=a[6]*e;b[7]=a[7]*e;b[8]=a[8]*c;b[9]=a[9]*c;b[10]=a[10]*c;b[11]=a[11]*c;b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};d.rotate=function(b,a,c,d){var e=d[0],g=d[1];d=d[2];var f=Math.sqrt(e*e+
g*g+d*d),k=void 0,m=void 0,p=void 0,n=void 0,q=void 0,x=void 0,v=void 0,z=void 0,A=void 0,y=void 0,I=void 0,C=void 0,E=void 0,D=void 0,F=void 0,P=void 0,Q=void 0,L=void 0,N=void 0,M=void 0,S=void 0,O=void 0,m=k=void 0;if(f<h.EPSILON)return null;f=1/f;e*=f;g*=f;d*=f;k=Math.sin(c);m=Math.cos(c);p=1-m;n=a[0];q=a[1];x=a[2];v=a[3];z=a[4];A=a[5];y=a[6];I=a[7];C=a[8];E=a[9];D=a[10];F=a[11];P=e*e*p+m;Q=g*e*p+d*k;L=d*e*p-g*k;N=e*g*p-d*k;M=g*g*p+m;S=d*g*p+e*k;O=e*d*p+g*k;k=g*d*p-e*k;m=d*d*p+m;b[0]=n*P+z*Q+
C*L;b[1]=q*P+A*Q+E*L;b[2]=x*P+y*Q+D*L;b[3]=v*P+I*Q+F*L;b[4]=n*N+z*M+C*S;b[5]=q*N+A*M+E*S;b[6]=x*N+y*M+D*S;b[7]=v*N+I*M+F*S;b[8]=n*O+z*k+C*m;b[9]=q*O+A*k+E*m;b[10]=x*O+y*k+D*m;b[11]=v*O+I*k+F*m;a!==b&&(b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b};d.rotateX=function(b,a,c){var d=Math.sin(c);c=Math.cos(c);var e=a[4],g=a[5],f=a[6],h=a[7],m=a[8],p=a[9],n=a[10],q=a[11];a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[4]=e*c+m*d;b[5]=g*c+p*
d;b[6]=f*c+n*d;b[7]=h*c+q*d;b[8]=m*c-e*d;b[9]=p*c-g*d;b[10]=n*c-f*d;b[11]=q*c-h*d;return b};d.rotateY=function(b,a,c){var d=Math.sin(c);c=Math.cos(c);var e=a[0],g=a[1],f=a[2],h=a[3],m=a[8],p=a[9],n=a[10],q=a[11];a!==b&&(b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=e*c-m*d;b[1]=g*c-p*d;b[2]=f*c-n*d;b[3]=h*c-q*d;b[8]=e*d+m*c;b[9]=g*d+p*c;b[10]=f*d+n*c;b[11]=h*d+q*c;return b};d.rotateZ=function(b,a,c){var d=Math.sin(c);c=Math.cos(c);var e=a[0],g=a[1],
f=a[2],h=a[3],m=a[4],p=a[5],n=a[6],q=a[7];a!==b&&(b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=e*c+m*d;b[1]=g*c+p*d;b[2]=f*c+n*d;b[3]=h*c+q*d;b[4]=m*c-e*d;b[5]=p*c-g*d;b[6]=n*c-f*d;b[7]=q*c-h*d;return b};d.fromTranslation=function(b,a){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=a[0];b[13]=a[1];b[14]=a[2];b[15]=1;return b};d.fromScaling=function(b,a){b[0]=a[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a[1];
b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=a[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromRotation=function(b,a,c){var d=c[0],e=c[1];c=c[2];var g=Math.sqrt(d*d+e*e+c*c),f=void 0,m=void 0,p=void 0;if(g<h.EPSILON)return null;g=1/g;d*=g;e*=g;c*=g;f=Math.sin(a);m=Math.cos(a);p=1-m;b[0]=d*d*p+m;b[1]=e*d*p+c*f;b[2]=c*d*p-e*f;b[3]=0;b[4]=d*e*p-c*f;b[5]=e*e*p+m;b[6]=c*e*p+d*f;b[7]=0;b[8]=d*c*p+e*f;b[9]=e*c*p-d*f;b[10]=c*c*p+m;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromXRotation=function(b,
a){var c=Math.sin(a);a=Math.cos(a);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a;b[6]=c;b[7]=0;b[8]=0;b[9]=-c;b[10]=a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromYRotation=function(b,a){var c=Math.sin(a);a=Math.cos(a);b[0]=a;b[1]=0;b[2]=-c;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=c;b[9]=0;b[10]=a;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromZRotation=function(b,a){var c=Math.sin(a);a=Math.cos(a);b[0]=a;b[1]=c;b[2]=0;b[3]=0;b[4]=-c;b[5]=a;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=
0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.fromRotationTranslation=e;d.fromQuat2=function(b,a){var c=p,d=-a[0],f=-a[1],h=-a[2],m=a[3],n=a[4],r=a[5],q=a[6],B=a[7],G=d*d+f*f+h*h+m*m;0<G?(c[0]=2*(n*m+B*d+r*h-q*f)/G,c[1]=2*(r*m+B*f+q*d-n*h)/G,c[2]=2*(q*m+B*h+n*f-r*d)/G):(c[0]=2*(n*m+B*d+r*h-q*f),c[1]=2*(r*m+B*f+q*d-n*h),c[2]=2*(q*m+B*h+n*f-r*d));e(b,a,c);return b};var p=n.create();d.getTranslation=function(b,a){b[0]=a[12];b[1]=a[13];b[2]=a[14];return b};d.getScaling=function(b,a){var c=a[0],d=a[1],
e=a[2],f=a[4],h=a[5],m=a[6],p=a[8],n=a[9];a=a[10];b[0]=Math.sqrt(c*c+d*d+e*e);b[1]=Math.sqrt(f*f+h*h+m*m);b[2]=Math.sqrt(p*p+n*n+a*a);return b};d.getRotation=function(b,a){var c=a[0]+a[5]+a[10],d=0;0<c?(d=2*Math.sqrt(c+1),b[3]=.25*d,b[0]=(a[6]-a[9])/d,b[1]=(a[8]-a[2])/d,b[2]=(a[1]-a[4])/d):a[0]>a[5]&&a[0]>a[10]?(d=2*Math.sqrt(1+a[0]-a[5]-a[10]),b[3]=(a[6]-a[9])/d,b[0]=.25*d,b[1]=(a[1]+a[4])/d,b[2]=(a[8]+a[2])/d):a[5]>a[10]?(d=2*Math.sqrt(1+a[5]-a[0]-a[10]),b[3]=(a[8]-a[2])/d,b[0]=(a[1]+a[4])/d,b[1]=
.25*d,b[2]=(a[6]+a[9])/d):(d=2*Math.sqrt(1+a[10]-a[0]-a[5]),b[3]=(a[1]-a[4])/d,b[0]=(a[8]+a[2])/d,b[1]=(a[6]+a[9])/d,b[2]=.25*d);return b};d.fromRotationTranslationScale=function(b,a,c,d){var e=a[0],g=a[1],f=a[2],h=a[3],k=e+e,m=g+g,p=f+f;a=e*k;var n=e*m,e=e*p,q=g*m,g=g*p,f=f*p,k=h*k,m=h*m,h=h*p,p=d[0],v=d[1];d=d[2];b[0]=(1-(q+f))*p;b[1]=(n+h)*p;b[2]=(e-m)*p;b[3]=0;b[4]=(n-h)*v;b[5]=(1-(a+f))*v;b[6]=(g+k)*v;b[7]=0;b[8]=(e+m)*d;b[9]=(g-k)*d;b[10]=(1-(a+q))*d;b[11]=0;b[12]=c[0];b[13]=c[1];b[14]=c[2];
b[15]=1;return b};d.fromRotationTranslationScaleOrigin=function(b,a,c,d,e){var g=a[0],f=a[1],h=a[2],k=a[3],l=g+g,m=f+f,p=h+h;a=g*l;var n=g*m,q=g*p,g=f*m,f=f*p,z=h*p,h=k*l,m=k*m,A=k*p,y=d[0],I=d[1],p=d[2];d=e[0];k=e[1];e=e[2];var l=(1-(g+z))*y,C=(n+A)*y,y=(q-m)*y,n=(n-A)*I,z=(1-(a+z))*I,I=(f+h)*I,q=(q+m)*p,f=(f-h)*p;a=(1-(a+g))*p;b[0]=l;b[1]=C;b[2]=y;b[3]=0;b[4]=n;b[5]=z;b[6]=I;b[7]=0;b[8]=q;b[9]=f;b[10]=a;b[11]=0;b[12]=c[0]+d-(l*d+n*k+q*e);b[13]=c[1]+k-(C*d+z*k+f*e);b[14]=c[2]+e-(y*d+I*k+a*e);b[15]=
1;return b};d.fromQuat=function(b,a){var c=a[0],d=a[1],e=a[2];a=a[3];var f=c+c,h=d+d,m=e+e,c=c*f,p=d*f,d=d*h,n=e*f,q=e*h,e=e*m,f=a*f,h=a*h;a*=m;b[0]=1-d-e;b[1]=p+a;b[2]=n-h;b[3]=0;b[4]=p-a;b[5]=1-c-e;b[6]=q+f;b[7]=0;b[8]=n+h;b[9]=q-f;b[10]=1-c-d;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};d.frustum=function(b,a,c,d,e,f,h){var g=1/(c-a),k=1/(e-d),l=1/(f-h);b[0]=2*f*g;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=2*f*k;b[6]=0;b[7]=0;b[8]=(c+a)*g;b[9]=(e+d)*k;b[10]=(h+f)*l;b[11]=-1;b[12]=0;b[13]=0;b[14]=h*
f*2*l;b[15]=0;return b};d.perspective=function(b,a,c,d,e){a=1/Math.tan(a/2);var g=void 0;b[0]=a/c;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[11]=-1;b[12]=0;b[13]=0;b[15]=0;null!=e&&Infinity!==e?(g=1/(d-e),b[10]=(e+d)*g,b[14]=2*e*d*g):(b[10]=-1,b[14]=-2*d);return b};d.perspectiveFromFieldOfView=function(b,a,c,d){var e=Math.tan(a.upDegrees*Math.PI/180),g=Math.tan(a.downDegrees*Math.PI/180),f=Math.tan(a.leftDegrees*Math.PI/180);a=Math.tan(a.rightDegrees*Math.PI/180);var h=2/(f+
a),k=2/(e+g);b[0]=h;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=k;b[6]=0;b[7]=0;b[8]=-((f-a)*h*.5);b[9]=(e-g)*k*.5;b[10]=d/(c-d);b[11]=-1;b[12]=0;b[13]=0;b[14]=d*c/(c-d);b[15]=0;return b};d.ortho=function(b,a,c,d,e,f,h){var g=1/(a-c),k=1/(d-e),l=1/(f-h);b[0]=-2*g;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=-2*k;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=2*l;b[11]=0;b[12]=(a+c)*g;b[13]=(e+d)*k;b[14]=(h+f)*l;b[15]=1;return b};d.lookAt=function(b,a,c,d){var e=void 0,g=void 0,f=void 0,k=void 0,p=void 0,n=void 0,q=void 0,G=void 0,x=
void 0,v=void 0,z=a[0],A=a[1];a=a[2];f=d[0];k=d[1];d=d[2];q=c[0];G=c[1];c=c[2];if(Math.abs(z-q)<h.EPSILON&&Math.abs(A-G)<h.EPSILON&&Math.abs(a-c)<h.EPSILON)return m(b);q=z-q;G=A-G;x=a-c;v=1/Math.sqrt(q*q+G*G+x*x);q*=v;G*=v;x*=v;e=k*x-d*G;g=d*q-f*x;f=f*G-k*q;(v=Math.sqrt(e*e+g*g+f*f))?(v=1/v,e*=v,g*=v,f*=v):f=g=e=0;k=G*f-x*g;p=x*e-q*f;n=q*g-G*e;(v=Math.sqrt(k*k+p*p+n*n))?(v=1/v,k*=v,p*=v,n*=v):n=p=k=0;b[0]=e;b[1]=k;b[2]=q;b[3]=0;b[4]=g;b[5]=p;b[6]=G;b[7]=0;b[8]=f;b[9]=n;b[10]=x;b[11]=0;b[12]=-(e*z+
g*A+f*a);b[13]=-(k*z+p*A+n*a);b[14]=-(q*z+G*A+x*a);b[15]=1;return b};d.targetTo=function(b,a,c,d){var e=a[0],g=a[1];a=a[2];var f=d[0],h=d[1],k=d[2];d=e-c[0];var m=g-c[1];c=a-c[2];var p=d*d+m*m+c*c;0<p&&(p=1/Math.sqrt(p),d*=p,m*=p,c*=p);var n=h*c-k*m,k=k*d-f*c,f=f*m-h*d,p=n*n+k*k+f*f;0<p&&(p=1/Math.sqrt(p),n*=p,k*=p,f*=p);b[0]=n;b[1]=k;b[2]=f;b[3]=0;b[4]=m*f-c*k;b[5]=c*n-d*f;b[6]=d*k-m*n;b[7]=0;b[8]=d;b[9]=m;b[10]=c;b[11]=0;b[12]=e;b[13]=g;b[14]=a;b[15]=1;return b};d.str=function(b){return"mat4("+
b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"};d.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+Math.pow(b[6],2)+Math.pow(b[7],2)+Math.pow(b[8],2)+Math.pow(b[9],2)+Math.pow(b[10],2)+Math.pow(b[11],2)+Math.pow(b[12],2)+Math.pow(b[13],2)+Math.pow(b[14],2)+Math.pow(b[15],2))};d.add=function(b,a,
c){b[0]=a[0]+c[0];b[1]=a[1]+c[1];b[2]=a[2]+c[2];b[3]=a[3]+c[3];b[4]=a[4]+c[4];b[5]=a[5]+c[5];b[6]=a[6]+c[6];b[7]=a[7]+c[7];b[8]=a[8]+c[8];b[9]=a[9]+c[9];b[10]=a[10]+c[10];b[11]=a[11]+c[11];b[12]=a[12]+c[12];b[13]=a[13]+c[13];b[14]=a[14]+c[14];b[15]=a[15]+c[15];return b};d.subtract=f;d.multiplyScalar=function(b,a,c){b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c;b[4]=a[4]*c;b[5]=a[5]*c;b[6]=a[6]*c;b[7]=a[7]*c;b[8]=a[8]*c;b[9]=a[9]*c;b[10]=a[10]*c;b[11]=a[11]*c;b[12]=a[12]*c;b[13]=a[13]*c;b[14]=a[14]*
c;b[15]=a[15]*c;return b};d.multiplyScalarAndAdd=function(b,a,c,d){b[0]=a[0]+c[0]*d;b[1]=a[1]+c[1]*d;b[2]=a[2]+c[2]*d;b[3]=a[3]+c[3]*d;b[4]=a[4]+c[4]*d;b[5]=a[5]+c[5]*d;b[6]=a[6]+c[6]*d;b[7]=a[7]+c[7]*d;b[8]=a[8]+c[8]*d;b[9]=a[9]+c[9]*d;b[10]=a[10]+c[10]*d;b[11]=a[11]+c[11]*d;b[12]=a[12]+c[12]*d;b[13]=a[13]+c[13]*d;b[14]=a[14]+c[14]*d;b[15]=a[15]+c[15]*d;return b};d.exactEquals=function(b,a){return b[0]===a[0]&&b[1]===a[1]&&b[2]===a[2]&&b[3]===a[3]&&b[4]===a[4]&&b[5]===a[5]&&b[6]===a[6]&&b[7]===a[7]&&
b[8]===a[8]&&b[9]===a[9]&&b[10]===a[10]&&b[11]===a[11]&&b[12]===a[12]&&b[13]===a[13]&&b[14]===a[14]&&b[15]===a[15]};d.equals=function(b,a){var c=b[0],d=b[1],e=b[2],f=b[3],m=b[4],p=b[5],n=b[6],q=b[7],B=b[8],G=b[9],x=b[10],v=b[11],z=b[12],A=b[13],y=b[14];b=b[15];var I=a[0],C=a[1],E=a[2],D=a[3],F=a[4],P=a[5],Q=a[6],L=a[7],N=a[8],M=a[9],S=a[10],O=a[11],K=a[12],V=a[13],T=a[14];a=a[15];return Math.abs(c-I)<=h.EPSILON*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(d-C)<=h.EPSILON*Math.max(1,Math.abs(d),Math.abs(C))&&
Math.abs(e-E)<=h.EPSILON*Math.max(1,Math.abs(e),Math.abs(E))&&Math.abs(f-D)<=h.EPSILON*Math.max(1,Math.abs(f),Math.abs(D))&&Math.abs(m-F)<=h.EPSILON*Math.max(1,Math.abs(m),Math.abs(F))&&Math.abs(p-P)<=h.EPSILON*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(n-Q)<=h.EPSILON*Math.max(1,Math.abs(n),Math.abs(Q))&&Math.abs(q-L)<=h.EPSILON*Math.max(1,Math.abs(q),Math.abs(L))&&Math.abs(B-N)<=h.EPSILON*Math.max(1,Math.abs(B),Math.abs(N))&&Math.abs(G-M)<=h.EPSILON*Math.max(1,Math.abs(G),Math.abs(M))&&Math.abs(x-
S)<=h.EPSILON*Math.max(1,Math.abs(x),Math.abs(S))&&Math.abs(v-O)<=h.EPSILON*Math.max(1,Math.abs(v),Math.abs(O))&&Math.abs(z-K)<=h.EPSILON*Math.max(1,Math.abs(z),Math.abs(K))&&Math.abs(A-V)<=h.EPSILON*Math.max(1,Math.abs(A),Math.abs(V))&&Math.abs(y-T)<=h.EPSILON*Math.max(1,Math.abs(y),Math.abs(T))&&Math.abs(b-a)<=h.EPSILON*Math.max(1,Math.abs(b),Math.abs(a))};d.mul=c;d.sub=f})},"esri/core/libs/gl-matrix-2/mat4f32":function(){define(["require","exports","./factories/mat4f32"],function(q,d,n){Object.defineProperty(d,
"__esModule",{value:!0});d.mat4f32=n})},"esri/core/libs/gl-matrix-2/factories/mat4f32":function(){define(["require","exports"],function(q,d){function n(){var d=new Float32Array(16);d[0]=1;d[5]=1;d[10]=1;d[15]=1;return d}Object.defineProperty(d,"__esModule",{value:!0});d.create=n;d.clone=function(d){var h=new Float32Array(16);h[0]=d[0];h[1]=d[1];h[2]=d[2];h[3]=d[3];h[4]=d[4];h[5]=d[5];h[6]=d[6];h[7]=d[7];h[8]=d[8];h[9]=d[9];h[10]=d[10];h[11]=d[11];h[12]=d[12];h[13]=d[13];h[14]=d[14];h[15]=d[15];return h};
d.fromValues=function(d,m,c,e,f,p,b,a,g,k,l,n,q,u,r,w){var h=new Float32Array(16);h[0]=d;h[1]=m;h[2]=c;h[3]=e;h[4]=f;h[5]=p;h[6]=b;h[7]=a;h[8]=g;h[9]=k;h[10]=l;h[11]=n;h[12]=q;h[13]=u;h[14]=r;h[15]=w;return h};d.createView=function(d,m){return new Float32Array(d,m,16)};d.IDENTITY=n()})},"esri/core/libs/gl-matrix-2/vec3f32":function(){define(["require","exports","./factories/vec3f32"],function(q,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.vec3f32=n})},"esri/core/libs/gl-matrix-2/factories/vec3f32":function(){define(["require",
"exports"],function(q,d){function n(){return new Float32Array(3)}function h(c,b,a){var d=new Float32Array(3);d[0]=c;d[1]=b;d[2]=a;return d}function m(){return h(1,1,1)}function c(){return h(1,0,0)}function e(){return h(0,1,0)}function f(){return h(0,0,1)}Object.defineProperty(d,"__esModule",{value:!0});d.create=n;d.clone=function(c){var b=new Float32Array(3);b[0]=c[0];b[1]=c[1];b[2]=c[2];return b};d.fromValues=h;d.createView=function(c,b){return new Float32Array(c,b,3)};d.zeros=function(){return n()};
d.ones=m;d.unitX=c;d.unitY=e;d.unitZ=f;d.ZEROS=n();d.ONES=m();d.UNIT_X=c();d.UNIT_Y=e();d.UNIT_Z=f()})},"esri/core/libs/gl-matrix-2/vec4f32":function(){define(["require","exports","./factories/vec4f32"],function(q,d,n){Object.defineProperty(d,"__esModule",{value:!0});d.vec4f32=n})},"esri/core/libs/gl-matrix-2/factories/vec4f32":function(){define(["require","exports"],function(q,d){function n(){return new Float32Array(4)}function h(b,a,c,d){var e=new Float32Array(4);e[0]=b;e[1]=a;e[2]=c;e[3]=d;return e}
function m(){return h(1,1,1,1)}function c(){return h(1,0,0,0)}function e(){return h(0,1,0,0)}function f(){return h(0,0,1,0)}function p(){return h(0,0,0,1)}Object.defineProperty(d,"__esModule",{value:!0});d.create=n;d.clone=function(b){var a=new Float32Array(4);a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a};d.fromValues=h;d.createView=function(b,a){return new Float32Array(b,a,4)};d.zeros=function(){return n()};d.ones=m;d.unitX=c;d.unitY=e;d.unitZ=f;d.unitW=p;d.ZEROS=n();d.ONES=m();d.UNIT_X=c();
d.UNIT_Y=e();d.UNIT_Z=f();d.UNIT_W=p()})},"esri/layers/graphics/featureConversionUtils":function(){define("require exports ../../core/Error ../../core/Logger ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(q,d,n,h,m,c,e,f){function p(a,b){return a?b?4:3:b?3:2}function b(a,b,c,d){if(a){if(c)return b&&d?T:K;if(b&&d)return V}else if(b&&d)return K;return O}function a(a,b){return Math.round((b-a.translate[0])/a.scale[0])}function g(a,b){return Math.round((a.translate[1]-
b)/a.scale[1])}function k(a,b){return b*a.scale[0]+a.translate[0]}function l(a,b){return a.translate[1]-b*a.scale[1]}function t(a){a=a.coords;return{x:a[0],y:a[1]}}function J(a,b){a.coords[0]=b.x;a.coords[1]=b.y;return a}function u(a){a=a.coords;return{x:a[0],y:a[1],z:a[2]}}function r(a,b){a.coords[0]=b.x;a.coords[1]=b.y;a.coords[2]=b.z;return a}function w(a){a=a.coords;return{x:a[0],y:a[1],m:a[2]}}function B(a,b){a.coords[0]=b.x;a.coords[1]=b.y;a.coords[2]=b.m;return a}function G(a){a=a.coords;return{x:a[0],
y:a[1],z:a[2],m:a[3]}}function x(a,b){a.coords[0]=b.x;a.coords[1]=b.y;a.coords[2]=b.z;a.coords[3]=b.m;return a}function v(a,b){return a&&b?x:a?r:b?B:J}function z(a,b,c){if(!a)return null;for(var d=p(b,c),e=[],f=0;f<a.coords.length;f+=d){for(var g=[],h=0;h<d;h++)g.push(a.coords[f+h]);e.push(g)}return b?c?{points:e,hasZ:b,hasM:c}:{points:e,hasZ:b}:c?{points:e,hasM:c}:{points:e}}function A(a,b,c){void 0===c&&(c=p(b.hasZ,b.hasM));a.lengths[0]=b.points.length;var d=a.coords,e=0,f=0;for(b=b.points;f<b.length;f++)for(var g=
b[f],h=0;h<c;h++)d[e++]=g[h];return a}function y(a,b,c){if(!a)return null;var d=p(b,c),e=a.coords,f=[],g=0,h=0;for(a=a.lengths;h<a.length;h++){for(var k=a[h],l=[],m=0;m<k;m++){for(var n=[],q=0;q<d;q++)n.push(e[g++]);l.push(n)}f.push(l)}return b?c?{paths:f,hasZ:b,hasM:c}:{paths:f,hasZ:b}:c?{paths:f,hasM:c}:{paths:f}}function I(a,b,c){void 0===c&&(c=p(b.hasZ,b.hasM));var d=a.lengths,e=a.coords,f=0,g=0;for(b=b.paths;g<b.length;g++){for(var h=b[g],k=0,l=h;k<l.length;k++)for(var m=l[k],n=0;n<c;n++)e[f++]=
m[n];d.push(h.length)}return a}function C(a,b,c){if(!a)return null;var d=p(b,c),e=a.coords,f=[],g=0,h=0;for(a=a.lengths;h<a.length;h++){for(var k=a[h],l=[],m=0;m<k;m++){for(var n=[],q=0;q<d;q++)n.push(e[g++]);l.push(n)}f.push(l)}return b?c?{rings:f,hasZ:b,hasM:c}:{rings:f,hasZ:b}:c?{rings:f,hasM:c}:{rings:f}}function E(a,b,c,d){void 0===c&&(c=b.hasZ);void 0===d&&(d=b.hasM);D(a,b.rings,c,d);return a}function D(a,b,c,d){c=p(c,d);d=a.lengths;for(var e=a.coords,f=0,g=d.length=e.length=0;g<b.length;g++){for(var h=
b[g],k=0,l=h;k<l.length;k++)for(var m=l[k],n=0;n<c;n++)e[f++]=m[n];d.push(h.length)}return a}function F(a,b,d,e,g,h){a.length=0;if(!d){for(e=0;e<b.length;e++)g=b[e],a.push(new c.default(null,g.attributes,null,g.attributes[h]));return a}switch(d){case "esriGeometryPoint":e=v(e,g);for(g=0;g<b.length;g++){var k=b[g];d=k.geometry;var k=k.attributes,l=void 0;d&&(l=e(new f.default,d));a.push(new c.default(l,k,null,k[h]))}break;case "esriGeometryMultipoint":e=p(e,g);for(g=0;g<b.length;g++)k=b[g],d=k.geometry,
k=k.attributes,l=void 0,d&&(l=A(new f.default,d,e)),a.push(new c.default(l,k,null,k[h]));break;case "esriGeometryPolyline":e=p(e,g);for(g=0;g<b.length;g++)k=b[g],d=k.geometry,k=k.attributes,l=void 0,d&&(l=I(new f.default,d,e)),a.push(new c.default(l,k,null,k[h]));break;case "esriGeometryPolygon":for(d=0;d<b.length;d++){var m=b[d],k=m.geometry,l=m.centroid,m=m.attributes,q=void 0;k&&(q=E(new f.default,k,e,g));l?a.push(new c.default(q,m,J(new f.default,l),m[h])):a.push(new c.default(q,m,null,m[h]))}break;
default:M.error("convertToFeatureSet:unknown-geometry",new n("Unable to parse unknown geometry type '"+d+"'")),a.length=0}return a}function P(a,b,c,d,e){a.length=0;switch(c){case "esriGeometryPoint":c=t;d&&e?c=G:d?c=u:e&&(c=w);for(d=0;d<b.length;d++){var f=b[d];e=f.geometry;f=f.attributes;e=e?c(e):null;a.push({attributes:f,geometry:e})}break;case "esriGeometryMultipoint":for(c=0;c<b.length;c++){var g=b[c],f=g.geometry,g=g.attributes,h=void 0;f&&(h=z(f,d,e));a.push({attributes:g,geometry:h})}break;
case "esriGeometryPolyline":for(c=0;c<b.length;c++)g=b[c],f=g.geometry,g=g.attributes,h=void 0,f&&(h=y(f,d,e)),a.push({attributes:g,geometry:h});break;case "esriGeometryPolygon":for(c=0;c<b.length;c++){var h=b[c],g=h.geometry,f=h.attributes,k=h.centroid,h=void 0;g&&(h=C(g,d,e));k?(g=t(k),a.push({attributes:f,centroid:g,geometry:h})):a.push({attributes:f,geometry:h})}break;default:M.error("convertToFeatureSet:unknown-geometry",new n("Unable to parse unknown geometry type '"+c+"'"))}return a}function Q(c,
d,e,f,h,k,l,m){void 0===l&&(l=e);void 0===m&&(m=f);c.lengths.length&&(c.lengths.length=0);c.coords.length&&(c.coords.length=0);if(!d||!d.coords.length)return null;h=S[h];var n=d.coords;d=d.lengths;var q=p(e,f),r=p(e&&l,f&&m);e=b(e,f,l,m);if(!d.length)return e(c.coords,n,0,0,a(k,n[0]),g(k,n[1])),c.lengths.length&&(c.lengths.length=0),c.coords.length=q,c;for(var t,R=0,u,H=0,w=0;w<d.length;w++){var v=d[w];if(!(v<h)){var x=0;u=H;m=f=a(k,n[R]);t=l=g(k,n[R+1]);e(c.coords,n,u,R,m,t);x++;R+=q;u+=r;for(var Y=
1;Y<v;Y++,R+=q)if(m=a(k,n[R]),t=g(k,n[R+1]),m!==f||t!==l)e(c.coords,n,u,R,m-f,t-l),u+=r,x++,f=m,l=t;x>=h&&(c.lengths.push(x),H=u)}}c.coords.length=H;return c.coords.length?c:null}function L(a,b,c,d,e,f,g){for(var h=d,k=0,l,m=f+c;m<g;m+=c){l=b[m];var p=b[m+1],n=b[g],q=b[g+1],r=b[f],t=b[f+1],R=n-r,u=q-t;if(0!==R||0!==u){var H=((l-r)*R+(p-t)*u)/(R*R+u*u);1<H?(r=n,t=q):0<H&&(r+=R*H,t+=u*H)}R=l-r;u=p-t;l=R*R+u*u;l>h&&(k=m,h=l)}h>d&&(k-f>c&&L(a,b,c,d,e,f,k),e(a,b,a.length,k,b[k],b[k+1]),g-k>c&&L(a,b,c,
d,e,k,g))}function N(a,b,c,d,e){var f=b.coords,g=b.lengths,h=c?d?T:K:d?K:O;c=p(c,d);if(!f.length)return a!==b&&(a.lengths.length=0,a.coords.length=0),a;if(!g.length)return h(a.coords,f,0,0,k(e,f[0]),l(e,f[1])),a!==b&&(a.lengths.length=0,a.coords.length=c),a;var m=e.scale;d=m[0];for(var m=m[1],n=0,q=0;q<g.length;q++){var r=g[q];a.lengths[q]=r;var t=k(e,f[n]),u=l(e,f[n+1]);h(a.coords,f,n,n,t,u);for(var n=n+c,R=1;R<r;R++,n+=c)t+=f[n]*d,u-=f[n+1]*m,h(a.coords,f,n,n,t,u)}a!==b&&(a.lengths.length=g.length,
a.coords.length=f.length);return a}Object.defineProperty(d,"__esModule",{value:!0});var M=h.getLogger("esri.tasks.support.optimizedFeatureSet"),S={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},O=function(a,b,c,d,e,f){a[c]=e;a[c+1]=f},K=function(a,b,c,d,e,f){a[c]=e;a[c+1]=f;a[c+2]=b[d+2]},V=function(a,b,c,d,e,f){a[c]=e;a[c+1]=f;a[c+2]=b[d+3]},T=function(a,b,c,d,e,f){a[c]=e;a[c+1]=f;a[c+2]=b[d+2];a[c+3]=b[d+3]};d.quantizeX=a;d.quantizeY=g;d.hydrateX=k;d.hydrateY=
l;d.convertToPoint=function(a,b,c){return a?b?c?G(a):u(a):c?w(a):t(a):null};d.convertFromPoint=function(a,b,c){void 0===c&&(c=v(null!=b.z,null!=b.m));return c(a,b)};d.convertToMultipoint=z;d.convertFromMultipoint=A;d.convertToPolyline=y;d.convertFromPolyline=I;d.convertToPolygon=C;d.convertFromPolygon=E;d.convertFromNestedArray=D;var W=[],U=[];d.convertFromFeature=function(a,b,c,d,e){W[0]=a;a=F(U,W,b,c,d,e)[0];W.length=U.length=0;return a};d.convertFromFeatures=F;d.convertToFeature=function(a,b,c,
d){U[0]=a;P(W,U,b,c,d);a=W[0];W.length=U.length=0;return a};d.convertFromGeometry=function(a,b,c){if(!a)return null;var d=new f.default;"hasZ"in a&&null==b&&(b=a.hasZ);"hasM"in a&&null==c&&(c=a.hasM);if(m.isPoint(a))return v(null!=b?b:null!=a.z,null!=c?c:null!=a.m)(d,a);if(m.isPolygon(a))return E(d,a,b,c);if(m.isPolyline(a))return I(d,a,p(b,c));if(m.isMultipoint(a))return A(d,a,p(b,c));M.error("convertFromGeometry:unknown-geometry",new n("Unable to parse unknown geometry type '"+a+"'"))};d.convertToGeometry=
function(a,b,c,d){a=a&&("coords"in a?a:a.geometry);if(!a)return null;switch(b){case "esriGeometryPoint":return b=t,c&&d?b=G:c?b=u:d&&(b=w),b(a);case "esriGeometryMultipoint":return z(a,c,d);case "esriGeometryPolyline":return y(a,c,d);case "esriGeometryPolygon":return C(a,c,d);default:M.error("convertToGeometry:unknown-geometry",new n("Unable to parse unknown geometry type '"+b+"'"))}};d.convertToFeatures=P;d.convertToFeatureSet=function(a){var b=a.objectIdFieldName,c=a.spatialReference,d=a.transform,
e=a.fields,f=a.hasM,g=a.hasZ,h=a.geometryType,k=a.exceededTransferLimit;a={features:P([],a.features,h,g,f),fields:e,geometryType:h,objectIdFieldName:b,spatialReference:c};d&&(a.transform=d);k&&(a.exceededTransferLimit=k);f&&(a.hasM=f);g&&(a.hasZ=g);return a};d.convertFromFeatureSet=function(a,b){var c=new e.default,d=a.hasM,f=a.hasZ,g=a.features,h=a.objectIdFieldName,k=a.spatialReference,l=a.geometryType,m=a.exceededTransferLimit,p=a.transform;c.fields=a.fields;c.geometryType=l;c.objectIdFieldName=
h||b;c.spatialReference=k;if(!c.objectIdFieldName)return M.error(new n("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),c;g&&F(c.features,g,l,f,d,c.objectIdFieldName);m&&(c.exceededTransferLimit=m);d&&(c.hasM=d);f&&(c.hasZ=f);p&&(c.transform=p);return c};d.hydrateOptimizedFeatureSet=function(a){var b=a.transform,c=a.hasM,d=a.hasZ;if(!b)return a;for(var e=0,f=a.features;e<f.length;e++){var g=f[e];g.geometry&&N(g.geometry,g.geometry,c,d,b);g.centroid&&N(g.centroid,g.centroid,
c,d,b)}a.transform=null;return a};d.quantizeOptimizedFeatureSet=function(a,b){var d=b.geometryType,e=b.features,g=b.hasM,h=b.hasZ;if(!a)return b;for(var k=0;k<e.length;k++){var l=e[k],m=new c.default(new f.default,l.attributes);Q(m.geometry,l.geometry,g,h,d,a);l.centroid&&(m.centroid=new f.default,Q(m.centroid,l.centroid,g,h,"esriGeometryPoint",a));e[k]=m}b.transform=a;return b};d.quantizeOptimizedGeometry=Q;d.generalizeOptimizedGeometry=function(a,c,d,e,f,g,h,k){void 0===h&&(h=d);void 0===k&&(k=
e);a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!c||!c.coords.length)return null;f=S[f];var l=c.coords;c=c.lengths;var m=p(d,e),n=p(d&&h,e&&k);d=b(d,e,h,k);if(!c.length)return d(a.coords,l,0,0,l[0],l[1]),a.lengths.length&&(a.lengths.length=0),a.coords.length=m,a;e=0;g*=g;for(h=0;h<c.length;h++){k=c[h];if(!(k<f)){var q=a.coords.length/n,r=e,t=e+(k-1)*m;d(a.coords,l,a.coords.length,r,l[r],l[r+1]);L(a.coords,l,m,g,d,r,t);d(a.coords,l,a.coords.length,t,l[t],l[t+1]);r=
a.coords.length/n-q;r>=f?a.lengths.push(r):a.coords.length=q*n}e+=k*m}return a.coords.length?a:null};d.getBoundsOptimizedGeometry=function(a,b,c,d){c=p(c,d);var e=d=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,g=Number.NEGATIVE_INFINITY;if(b&&b.coords){b=b.coords;for(var h=0;h<b.length;h+=c){var k=b[h],l=b[h+1];d=Math.min(d,k);f=Math.max(f,k);e=Math.min(e,l);g=Math.max(g,l)}}a[0]=d;a[1]=e;a[2]=f;a[3]=g;return a};d.getQuantizedBoundsOptimizedGeometry=function(a,b,c,d){c=p(c,d);d=b.coords;var e=
Number.POSITIVE_INFINITY,f=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY,k=0,l=0;for(b=b.lengths;l<b.length;l++)for(var m=b[l],n=d[k],q=d[k+1],e=Math.min(n,e),f=Math.min(q,f),g=Math.max(n,g),h=Math.max(q,h),k=k+c,r=1;r<m;r++,k+=c){var t=d[k],u=d[k+1],n=n+t,q=q+u;0>t&&(e=Math.min(e,n));0<t&&(g=Math.max(g,n));0>u?f=Math.min(f,q):0<u&&(h=Math.max(h,q))}a[0]=e;a[1]=f;a[2]=g;a[3]=h;return a};d.hydrateOptimizedGeometry=N;d.removeZMValues=function(a,c,d,e,f,g){var h,k=p(d,
e);d=b(d,e,f,g);e=c.coords;a.coords.length=0;a.lengths.length=0;(h=a.lengths).push.apply(h,c.lengths);for(c=0;c<e.length;c+=k)d(a.coords,e,a.coords.length,c,e[c],e[c+1]);return a};d.removeCollinearVectices=function(a,c,d,e,f){if(!c||!c.coords||!c.coords.length)return null;d=S[d];var g=c.coords;c=c.lengths;var h=b(e,f,e,f);e=p(e,f);for(var k=f=0,l=0,m=0,n=0;n<c.length;n++){var q=c[n],k=m;h(a.coords,g,k,f,g[f],g[f+1]);f+=e;var r=g[f],t=g[f+1],u=r,w=t,v=t/r,k=k+e;h(a.coords,g,k,f,u,w);f+=e;for(var x=
2;x<q;x++){var r=g[f],t=g[f+1],y=t/r,L=v===y||!isFinite(v)&&!isFinite(y),v=L&&isFinite(y)?0<=v&&0<=y||0>=v&&0>=y:0<=w&&0<=t||0>=w&&0>=t;L&&v?(u+=r,w+=t):(u=r,w=t,k+=e);h(a.coords,g,k,f,u,w);f+=e;v=y}k+=e;q=(k-m)/e;q>=d&&(a.lengths[l]=q,m=k,l++)}a.coords.length>k&&(a.coords.length=k);a.lengths.length>l&&(a.lengths.length=l);return a.coords.length?a:null}})},"esri/views/2d/arcade/utils":function(){define("require exports ../../../core/tsSupport/assignHelper @dojo/framework/shim/WeakMap ../../../core/Error ../../../core/Logger ../../../geometry/support/quantizationUtils ../../../layers/graphics/featureConversionUtils".split(" "),
function(q,d,n,h,m,c,e,f){function p(a,c,d,e){var f=e.transform,h=e.hasZ;e=e.hasM;g.has(a)||g.set(a,b(d));a=g.get(a)(c.geometry,f,h,e);return n({},c,{geometry:a})}function b(b){var c={};switch(b){case "esriGeometryPoint":return function(a,b,d,f){return e.hydratePoint(b,c,a,d,f)};case "esriGeometryPolygon":return function(a,b,d,f){return e.hydratePolygon(b,c,a,d,f)};case "esriGeometryPolyline":return function(a,b,d,f){return e.hydratePolyline(b,c,a,d,f)};case "esriGeometryMultipoint":return function(a,
b,d,f){return e.hydrateMultipoint(b,c,a,d,f)};default:return a.error(new m("mapview-arcade","Unable to handle geometryType: "+b)),function(a){return a}}}Object.defineProperty(d,"__esModule",{value:!0});var a=c.getLogger("esri.views.2d.support.arcadeOnDemand");d.callWithOptimizedFeature=function(b,c,d,e,g){var h=e.geometryType,k=e.hasZ;e=e.hasM;c=b.referencesGeometry()?g?p(b,f.convertToFeature(c,h,k,e),h,g):f.convertToFeature(c,h,k,e):c;c=b.repurposeFeature(c);try{return b.evaluate(n({},d,{$feature:c}))}catch(B){return a.warn("Feature arcade evaluation failed:",
B),null}};d.callWithFeature=function(b,c,d,e,f){c=b.referencesGeometry()&&f?p(b,c,e,f):c;c=b.repurposeFeature(c);try{return b.evaluate(n({},d,{$feature:c}))}catch(r){return a.warn("Feature arcade evaluation failed:",r),null}};var g=new h.default;d.createHydrateFactory=b})},"*now":function(q){q(['dojo/i18n!*preload*esri/views/nls/MapView*["ar","bs","ca","cs","da","de","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},
"*noref":1}});
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/Error ../core/has ../core/Logger ../core/promiseUtils ../core/screenUtils ../core/watchUtils ../core/workers ../core/accessorSupport/decorators ./BreakpointsOwner ./DOMContainer ./Magnifier ./MapViewBase ./2d/input/MapViewInputManager ./2d/support/HighlightOptions ./support/screenshotUtils ./support/WebGLRequirements ./ui/2d/DefaultUI2D @dojo/framework/shim/Promise".split(" "),function(q,
d,n,h,m,c,e,f,p,b,a,g,k,l,t,J,u,r,w,B,G,x,v){function z(){return c(this,void 0,void 0,function(){var a,b,c,d,e,f,g;return m(this,function(h){switch(h.label){case 0:return[4,Promise.all([new Promise(function(a,b){q(["./webgl"],a,b)}),new Promise(function(a,b){q(["./2d/mapViewDeps"],a,b)}),new Promise(function(a,b){q(["./2d/engine"],a,b)})])];case 1:return a=h.sent(),b=a[1],c=b.GraphicsView2D,d=b.LabelManager,e=b.MapViewNavigation,f=b.MagnifierView2D,g=a[2].Stage,C=c,E=d,D=e,F=f,I=g,[2]}})})}function A(a){return!("layerViews"in
a)&&null!=a.container}var y=p.getLogger("esri.views.MapView"),I,C,E,D,F;return function(c){function d(a){a=c.call(this,a)||this;a._magnifierView=null;a._stage=null;a._resolveWhenReady=[];a.graphicsView=null;a.highlightOptions=new B;a.magnifier=new u;a.inputManager=new w({view:a});a.mapViewNavigation=null;a.supersampleScreenhotsEnabled=!0;a.ui=new v;a.rendering=!1;k.initialize();return a}n(d,c);Object.defineProperty(d.prototype,"background",{get:function(){return this.get("map.initialViewProperties.background")||
null},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"interacting",{get:function(){return this.mapViewNavigation&&this.mapViewNavigation.interacting||!1},enumerable:!0,configurable:!0});d.prototype.toMap=function(b){if(a.isSupportedScreenPointEvent(b)){var c=a.createScreenPointFromSupportedEvent(this,b);return this.inherited(arguments,[c])}return this.inherited(arguments)};d.prototype.hitTest=function(c){var d=a.isSupportedScreenPointEvent(c)?a.createScreenPointFromSupportedEvent(this,
c):c;if(!this.ready||isNaN(d.x)||isNaN(d.y))return b.resolve({screenPoint:d,results:[]});var e=this.toMap(d);c=[this.graphicsView];c.push.apply(c,this.allLayerViews.toArray().reverse());return b.all(c.map(function(a){return a&&a.hitTest?a.hitTest(d.x,d.y):null})).then(function(a){return{screenPoint:d,results:a.filter(function(a){return null!=a}).map(function(a){return{mapPoint:e,graphic:a}})}})};d.prototype.takeScreenshot=function(a){return this.ready?this._stage.takeScreenshot(G.toRenderSettings(a,
this),this.allLayerViews):b.reject("Map view cannot be used before it is ready")};d.prototype.on=function(a,b,c,d){var e=this.inputManager&&this.viewEvents.on(a,b,c,d);return e?e:this.inherited(arguments)};d.prototype.hasEventListener=function(a){return this.inherited(arguments)||this.viewEvents.hasHandler(a)};d.prototype.whenLayerView=function(a){return this.inherited(arguments)};d.prototype.graphicChanged=function(a){this.graphicsView&&this.graphicsView.graphicUpdateHandler(a)};d.prototype.whenReady=
function(){var a=this;return b.create(function(b){a.ready?b(a):a._resolveWhenReady.push(b)})};d.prototype.forceDOMReadyCycle=function(){this.forceReadyCycle()};d.prototype.validate=function(){var a=x.check({supportsMajorWebPerformanceCaveat:!0});f("safari")&&9>f("safari")&&(a=new e("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:f("safari")}));return a?(y.warn("#validate()",a.message),b.reject(a)):z()};d.prototype._startup=
function(){var a=this;this.timeline.begin("MapView Startup");this.inherited(arguments);this.graphics.owner=this;var b=new I(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenhotsEnabled,contextOptions:{deactivatedWebGLExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline}),c=new C({view:this,graphics:this.graphics}),d=new D({view:this,animationManager:this.animationManager}),
e=new E({view:this});this._magnifierView=new F;this._magnifierView.magnifier=this.magnifier;this._stage=b;this.frameTask.graphicsView=c;this._set("graphicsView",c);this._set("mapViewNavigation",d);this._set("labelManager",e);this.handles.add([this.allLayerViews.on("change",function(){return a._updateStageChildren()}),b.on("post-render",function(){return a._set("rendering",a.allLayerViews.some(function(a){return!("layerViews"in a)&&!0===a.rendering}))}),b.on("webgl-error",function(b){return a.fatalError=
b.error}),g.init(this,"stationary",function(a){return b.stationary=a},!0),g.init(this,"state.viewpoint",function(){return b.state=a.state},!0),g.init(this,"background",function(a){return b.background=a},!0),g.init(this,"magnifier",function(b){return a._magnifierView.magnifier=b},!0),g.init(this,"renderingOptions",function(a){return b.renderingOptions=a},!0),g.init(this,"highlightOptions",function(){return b.highlightOptions=a.highlightOptions},!0)],"map-view");b.state=this.state;b.background=this.background;
this._updateStageChildren();c=this._resolveWhenReady;this._resolveWhenReady=[];c.forEach(function(b){return b(a)});this.timeline.end("MapView Startup")};d.prototype._teardown=function(){this.handles.remove("map-view");this.layerViewManager.clear();this.labelManager.destroy();this._magnifierView.destroy();this._stage.destroy();this.graphicsView.destroy();this.mapViewNavigation.destroy();this._stage=null;this._set("graphicsView",null);this._magnifierView=null;this._set("labelManager",null);this._set("mapViewNavigation",
null);this.graphics.owner=null;this.inherited(arguments)};d.prototype._updateStageChildren=function(){var a=this;this._stage.removeAllChildren();this.allLayerViews.filter(A).forEach(function(b,c){a._stage.addChildAt(b.container,c)});this._stage.addChild(this.graphicsView.container);this._stage.addChild(this._magnifierView)};h([l.property({readOnly:!0,dependsOn:["map.initialViewProperties?.background"]})],d.prototype,"background",null);h([l.property()],d.prototype,"graphicsView",void 0);h([l.property({type:B})],
d.prototype,"highlightOptions",void 0);h([l.property({type:u})],d.prototype,"magnifier",void 0);h([l.property({readOnly:!0})],d.prototype,"inputManager",void 0);h([l.property({readOnly:!0})],d.prototype,"mapViewNavigation",void 0);h([l.property({dependsOn:["mapViewNavigation.interacting"],type:Boolean})],d.prototype,"interacting",null);h([l.property({type:Boolean,constructOnly:!0})],d.prototype,"supersampleScreenhotsEnabled",void 0);h([l.property({type:v})],d.prototype,"ui",void 0);h([l.property({readOnly:!0})],
d.prototype,"rendering",void 0);h([l.property({constructOnly:!0})],d.prototype,"renderCanvas",void 0);h([l.property({constructOnly:!0})],d.prototype,"deactivatedWebGLExtensions",void 0);h([l.property({constructOnly:!0})],d.prototype,"debugWebGLExtensions",void 0);return d=h([l.subclass("esri.views.MapView")],d)}(l.declared(t.BreakpointsOwner(J.DOMContainer(r))))});