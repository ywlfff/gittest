// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.14/esri/copyright.txt for details.
//>>built
require({cache:{"esri/AggregateGraphic":function(){define("require exports ./core/tsSupport/decorateHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/assignHelper ./Graphic ./core/accessorSupport/decorators".split(" "),function(z,a,u,m,x,p,l){return function(a){function c(){return null!==a&&a.apply(this,arguments)||this}m(c,a);k=c;c.prototype.getEffectivePopupTemplate=function(a){void 0===a&&(a=!1);return this.popupTemplate?this.popupTemplate:(a=this.sourceLayer&&this.sourceLayer.featureReduction)&&
"popupTemplate"in a?a.popupTemplate:null};c.prototype.getObjectId=function(){return this.objectId};c.prototype.clone=function(){return new k(x({objectId:this.objectId},this.cloneProperties()))};var k;u([l.property({type:Number,json:{read:!0}})],c.prototype,"objectId",void 0);return c=k=u([l.subclass("esri.AggregateGraphic")],c)}(l.declared(p))})},"esri/layers/graphics/data/projectionSupport":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../core/Error ../../../core/promiseUtils ../../../geometry/projection ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(z,a,u,m,x,p,l,c,e){function k(a,c){var b;if(!c)return null;if("x"in c){var d={x:0,y:0};a=a(c.x,c.y,v);d.x=a[0];d.y=a[1];null!=c.z&&(d.z=c.z);null!=c.m&&(d.m=c.m);return d}if("xmin"in c)return d={xmin:0,ymin:0,xmax:0,ymax:0},b=a(c.xmin,c.ymin,v),d.xmin=b[0],d.ymin=b[1],a=a(c.xmax,c.ymax,v),d.xmax=a[0],d.ymax=a[1],c.hasZ&&(d.zmin=c.zmin,d.zmax=c.zmax,d.hasZ=!0),c.hasM&&(d.mmin=c.mmin,d.mmax=c.mmax,d.hasM=!0),d;if("rings"in c)return{rings:g(c.rings,a),hasM:c.hasM,hasZ:c.hasZ};if("paths"in c)return{paths:g(c.paths,
a),hasM:c.hasM,hasZ:c.hasZ};if("points"in c)return{points:h(c.points,a),hasM:c.hasM,hasZ:c.hasZ}}function g(a,c){for(var b=[],d=0;d<a.length;d++)b.push(h(a[d],c));return b}function h(a,c){for(var b=[],d=0;d<a.length;d++){var r=a[d],t=c(r[0],r[1],[0,0]);b.push(t);2<r.length&&t.push(r[2]);3<r.length&&t.push(r[3])}return b}function q(a,d){return!c.isValid(a)||!c.isValid(d)||c.equals(a,d)||e.canProject(a,d)?!1:!0}Object.defineProperty(a,"__esModule",{value:!0});var v=[0,0];a.doesBrowserSupportProjection=
function(a,c){return q(a,c)?l.isSupported():!0};a.checkProjectionSupport=function(a,c){return m(this,void 0,void 0,function(){var b,d,r;return u(this,function(e){if(!c)return[2];if(Array.isArray(a)){b=0;for(d=a;b<d.length;b++)if(r=d[b],q(r.geometry&&r.geometry.spatialReference,c)){if(l.isSupported())return[2,l.load()];throw new x("feature-store:unsupported-query","projection not supported",{inSpatialReference:a,outSpatialReference:c});}return[2]}if(!q(a,c))return[2];if(l.isSupported())return[2,l.load()];
throw new x("feature-store:unsupported-query","projection not supported",{inSpatialReference:a,outSpatialReference:c});})})};var E=k.bind(null,e.lngLatToXY),y=k.bind(null,e.xyToLngLat);a.project=function(a,d,b){if(!a)return a;b||(b=d,d=a.spatialReference);return c.isValid(d)&&c.isValid(b)&&!c.equals(d,b)?e.canProject(d,b)?c.isWebMercator(b)?E(a):y(a):l.projectMany([a],d,b,null,!0)[0]:a};var d=new (function(){function a(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}a.prototype.push=
function(a,b,d){return m(this,void 0,void 0,function(){var e,r=this;return u(this,function(h){a&&a.length&&b&&d&&!c.equals(b,d)||p.resolve(a);e={geometries:a,inSpatialReference:b,outSpatialReference:d,resolve:null};this._jobs.push(e);return[2,p.create(function(b){e.resolve=b;null===r._timer&&(r._timer=setTimeout(r._process,10))},function(){var b=r._jobs.indexOf(e);-1<b&&r._jobs.splice(b,1)})]})})};a.prototype._process=function(){this._timer=null;var a=this._jobs.shift();if(a){var b=a.geometries,d=
a.inSpatialReference,r=a.outSpatialReference,a=a.resolve;e.canProject(d,r)?c.isWebMercator(r)?a(b.map(E)):a(b.map(y)):a(l.projectMany(b,d,r,null,!0));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return a}());a.projectMany=function(a,c,b){return m(this,void 0,void 0,function(){return u(this,function(e){return[2,d.push(a,c,b)]})})}})},"esri/geometry/projection":function(){define("require exports ../core/promiseUtils ./pe ./SpatialReference ./support/GeographicTransformation".split(" "),
function(z,a,u,m,x,p){function l(a,k,l,m,y){void 0===m&&(m=null);void 0===y&&(y=!1);if(null===m){var d=p.cacheKey(k,l);void 0!==g[d]?m=g[d]:(m=c(k,l,null),null===m&&(m=new p),g[d]=m)}return e._project(a,k,l instanceof x||!1===y?l:new x(l),m,y)}function c(a,c,g){void 0===g&&(g=null);a=e._getTransformation(a,c,g);return null!==a?p.fromGE(a):null}Object.defineProperty(a,"__esModule",{value:!0});var e=null;a.isLoaded=function(){return!!e&&m.isLoaded()};a.isSupported=function(){return m.isSupported()};
var k=null;a.load=function(){return k?k:k=u.create(function(a,c){var h=m.load();z(["./geometryEngine"],function(g){e=g;h.then(function(){e._enableProjection(m);a()},function(a){c(a)})})})};a.project=function(a,c,e){void 0===e&&(e=null);return a instanceof Array?0===a.length?[]:l(a,a[0].spatialReference,c,e):l([a],a.spatialReference,c,e)[0]};var g={};a.projectMany=l;a.getTransformation=c;a.getTransformations=function(a,c,g){void 0===g&&(g=null);a=e._getTransformationBySuitability(a,c,g);if(null!==
a){c=[];for(g=0;g<a.length;g++)c.push(p.fromGE(a[g]));return c}return[]}})},"esri/geometry/pe":function(){define(["require","exports","../core/tsSupport/extendsHelper","../core/has","../core/promiseUtils"],function(z,a,u,m,x){function p(c){function d(b,a,c){b[a]=c(b[a])}a._pe=c;h.init();q.init();v.init();E.init();y.init();a.PeGCSExtent=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}u(c,b);c.prototype.destroy=function(){a._pe.destroy(this)};return c}(a._pe.PeGCSExtent);for(var e=
0,b=[a._pe.PeDatum,a._pe.PeGeogcs,a._pe.PeGeogtran,a._pe.PeObject,a._pe.PeParameter,a._pe.PePrimem,a._pe.PeProjcs,a._pe.PeSpheroid,a._pe.PeUnit];e<b.length;e++)c=b[e],d(c.prototype,"getName",function(b){return function(){return b.call(this,Array(h.PE_NAME_MAX))}});e=0;for(b=[a._pe.PeGeogtran,a._pe.PeProjcs];e<b.length;e++)c=b[e],d(c.prototype,"getParameters",function(b){return function(){for(var c=Array(h.PE_PARM_MAX),d=b.call(this),e=0;e<c.length;e++){var r=a._pe.getValue(d,"*");c[e]=r?a._pe.wrapPointer(r,
a._pe.PeParameter):null;d+=Int32Array.BYTES_PER_ELEMENT}return c}});d(a._pe.PeHorizon.prototype,"getCoord",function(b){return function(){var a=this.getSize();if(!a)return null;var c=[],d=b.call(this);k(c,a,d);return c}});d(a._pe.PeGTlistExtendedEntry.prototype,"getEntries",function(b){var c=a._pe._pe_getPeGTlistExtendedGTsSize();return function(){var d=null,e=b.call(this);if(!a._pe.compare(e,a._pe.NULL)){var d=[e],r=this.getSteps();if(1<r)for(var e=a._pe.getPointer(e),h=1;h<r;h++)d.push(a._pe.wrapPointer(e+
c*h,a._pe.PeGTlistExtendedGTs))}return d}});var g=a._pe._pe_getPeHorizonSize();c=function(b){return function(){var c=this._cache;c||(this._cache=c=new Map);if(c.has(b))return c.get(b);var d=null,e=b.call(this);if(!a._pe.compare(e,a._pe.NULL)){var d=[e],r=e.getNump();if(1<r)for(var e=a._pe.getPointer(e),h=1;h<r;h++)d.push(a._pe.wrapPointer(e+g*h,a._pe.PeHorizon))}c.set(b,d);return d}};d(a._pe.PeProjcs.prototype,"horizonGcsGenerate",c);d(a._pe.PeProjcs.prototype,"horizonPcsGenerate",c);a._pe.PeObject.prototype.toString=
function(b){void 0===b&&(b=h.PE_STR_OPTS_NONE);a._pe.ensureCache.prepare();var c=a._pe.getPointer(this),d=a._pe.ensureInt8(Array(h.PE_BUFFER_MAX));return a._pe.UTF8ToString(a._pe._pe_object_to_string_ext(c,b,d))}}function l(c){if(c){var d=a._pe.getClass(c);d&&(d=a._pe.getCache(d))&&(c=a._pe.getPointer(c))&&delete d[c]}}function c(c,e){var d=[];e=Array(e);for(var b=0;b<c;b++)d.push(a._pe.ensureInt8(e));return d}function e(a){var c;Array.isArray(a[0])?(c=[],a.forEach(function(a){c.push(a[0],a[1])})):
c=a;return c}function k(c,e,h,b){void 0===b&&(b=!1);if(b)for(b=0;b<2*e;b++)c[b]=a._pe.getValue(h+b*Float64Array.BYTES_PER_ELEMENT,"double");else{var d=0===c.length;for(b=0;b<e;b++)d&&(c[b]=Array(2)),c[b][0]=a._pe.getValue(h,"double"),c[b][1]=a._pe.getValue(h+Float64Array.BYTES_PER_ELEMENT,"double"),h+=2*Float64Array.BYTES_PER_ELEMENT}}Object.defineProperty(a,"__esModule",{value:!0});var g;a._pe=null;a.isLoaded=function(){return!!a._pe};a.isSupported=function(){return!!m("esri-wasm")};a.load=function(){return g?
g:g=x.create(function(a,c){z(["./support/pe-wasm"],function(d){d({locateFile:function(b){return z.toUrl("./support/"+b)},onAbort:function(b){c(Error(b))}}).then(function(b){p(b);a()})})})};(function(c){function d(b,c,d){a._pe.ensureCache.prepare();var h=e(d),r=d===h,h=a._pe.ensureFloat64(h);(b=a._pe._pe_geog_to_proj(a._pe.getPointer(b),c,h))&&k(d,c,h,r);return b}function g(a,c,d){return b(a,c,d,0)}function b(b,c,d,h){a._pe.ensureCache.prepare();var r=e(d),g=d===r,r=a._pe.ensureFloat64(r);(b=a._pe._pe_proj_to_geog_center(a._pe.getPointer(b),
c,r,h))&&k(d,c,r,g);return b}c.geogToProj=d;c.projGeog=function(b,a,c,e){switch(e){case h.PE_TRANSFORM_P_TO_G:return g(b,a,c);case h.PE_TRANSFORM_G_TO_P:return d(b,a,c)}return 0};c.projToGeog=g;c.projToGeogCenter=b})(a.PeCSTransformations||(a.PeCSTransformations={}));var h;(function(c){c.init=function(){c.PE_BUFFER_MAX=a._pe.PeDefs.prototype.PE_BUFFER_MAX;c.PE_NAME_MAX=a._pe.PeDefs.prototype.PE_NAME_MAX;c.PE_MGRS_MAX=a._pe.PeDefs.prototype.PE_MGRS_MAX;c.PE_USNG_MAX=a._pe.PeDefs.prototype.PE_USNG_MAX;
c.PE_DD_MAX=a._pe.PeDefs.prototype.PE_DD_MAX;c.PE_DDM_MAX=a._pe.PeDefs.prototype.PE_DDM_MAX;c.PE_DMS_MAX=a._pe.PeDefs.prototype.PE_DMS_MAX;c.PE_UTM_MAX=a._pe.PeDefs.prototype.PE_UTM_MAX;c.PE_PARM_MAX=a._pe.PeDefs.prototype.PE_PARM_MAX;c.PE_TYPE_NONE=a._pe.PeDefs.prototype.PE_TYPE_NONE;c.PE_TYPE_GEOGCS=a._pe.PeDefs.prototype.PE_TYPE_GEOGCS;c.PE_TYPE_PROJCS=a._pe.PeDefs.prototype.PE_TYPE_PROJCS;c.PE_TYPE_GEOGTRAN=a._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;c.PE_TYPE_COORDSYS=a._pe.PeDefs.prototype.PE_TYPE_COORDSYS;
c.PE_TYPE_UNIT=a._pe.PeDefs.prototype.PE_TYPE_UNIT;c.PE_STR_OPTS_NONE=a._pe.PeDefs.prototype.PE_STR_OPTS_NONE;c.PE_STR_AUTH_NONE=a._pe.PeDefs.prototype.PE_STR_AUTH_NONE;c.PE_STR_AUTH_TOP=a._pe.PeDefs.prototype.PE_STR_AUTH_TOP;c.PE_STR_NAME_CANON=a._pe.PeDefs.prototype.PE_STR_NAME_CANON;c.PE_PARM_X0=a._pe.PeDefs.prototype.PE_PARM_X0;c.PE_PARM_ND=a._pe.PeDefs.prototype.PE_PARM_ND;c.PE_TRANSFORM_1_TO_2=a._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;c.PE_TRANSFORM_2_TO_1=a._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;
c.PE_TRANSFORM_P_TO_G=a._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;c.PE_TRANSFORM_G_TO_P=a._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;c.PE_HORIZON_RECT=a._pe.PeDefs.prototype.PE_HORIZON_RECT;c.PE_HORIZON_POLY=a._pe.PeDefs.prototype.PE_HORIZON_POLY;c.PE_HORIZON_LINE=a._pe.PeDefs.prototype.PE_HORIZON_LINE;c.PE_HORIZON_DELTA=a._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(h=a.PeDefs||(a.PeDefs={}));(function(c){function d(c,d){var h=null,r=b[c];r||(r={},b[c]=r);r.hasOwnProperty(String(d))?h=r[d]:(c=a._pe.PeFactory.prototype.factoryByType(c,
d),a._pe.compare(c,a._pe.NULL)||(h=c,r[d]=h));return h=e(h)}function e(b){if(b){var c=b.getType();switch(c){case h.PE_TYPE_GEOGCS:b=a._pe.castObject(b,a._pe.PeGeogcs);break;case h.PE_TYPE_PROJCS:b=a._pe.castObject(b,a._pe.PeProjcs);break;case h.PE_TYPE_GEOGTRAN:b=a._pe.castObject(b,a._pe.PeGeogtran);break;default:c&h.PE_TYPE_UNIT&&(b=a._pe.castObject(b,a._pe.PeUnit))}}return b}var b={},g={};c.initialize=function(){a._pe.PeFactory.prototype.initialize(null)};c.coordsys=function(b){return d(h.PE_TYPE_COORDSYS,
b)};c.factoryByType=d;c.fromString=function(b,c){var d=null,h=g[b];h||(h={},g[b]=h);h.hasOwnProperty(c)?d=h[c]:(b=a._pe.PeFactory.prototype.fromString(b,c),a._pe.compare(b,a._pe.NULL)||(d=b,h[c]=d));return d=e(d)};c.geogcs=function(b){return d(h.PE_TYPE_GEOGCS,b)};c.geogtran=function(b){return d(h.PE_TYPE_GEOGTRAN,b)};c.getCode=function(b){return a._pe.PeFactory.prototype.getCode(b)};c.projcs=function(b){return d(h.PE_TYPE_PROJCS,b)};c.unit=function(b){return d(h.PE_TYPE_UNIT,b)}})(a.PeFactory||(a.PeFactory=
{}));a.PeGCSExtent=null;var q;(function(c){var d;c.init=function(){c.PE_GTLIST_OPTS_COMMON=a._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;d=a._pe._pe_getPeGTlistExtendedEntrySize()};c.getGTlist=function(c,b,e,h,r,g){var y=null,t=new a._pe.PeInteger(g);try{var k=a._pe.PeGTlistExtended.prototype.getGTlist(c,b,e,h,r,t);if(g=t.val)if(y=[k],1<g){var l=a._pe.getPointer(k);for(c=1;c<g;c++)y.push(a._pe.wrapPointer(l+d*c,a._pe.PeGTlistExtendedEntry))}}finally{a._pe.destroy(t)}return y}})(q=a.PeGTlistExtended||
(a.PeGTlistExtended={}));(function(c){c.destroy=function(c){if(c&&c.length){for(var d=0;d<c.length;d++){var b=c[d];l(b);b.getEntries().forEach(function(b){l(b);b=b.getGeogtran();l(b);b.getParameters().forEach(l);[b.getGeogcs1(),b.getGeogcs2()].forEach(function(b){l(b);var c=b.getDatum();l(c);l(c.getSpheroid());l(b.getPrimem());l(b.getUnit())})})}a._pe.PeGTlistExtendedEntry.prototype.Delete(c[0])}}})(a.PeGTlistExtendedEntry||(a.PeGTlistExtendedEntry={}));(function(c){c.geogToGeog=function(c,d,b,h,
g){a._pe.ensureCache.prepare();var r=e(b),y=b===r,r=a._pe.ensureFloat64(r),t=0;h&&(t=a._pe.ensureFloat64(h));(c=a._pe._pe_geog_to_geog(a._pe.getPointer(c),d,r,t,g))&&k(b,d,r,y);return c}})(a.PeGTTransformations||(a.PeGTTransformations={}));(function(d){function r(b,d,r,g,y,k){a._pe.ensureCache.prepare();var t,l;switch(b){case "dd":t=a._pe._pe_geog_to_dd;l=h.PE_DD_MAX;break;case "ddm":t=a._pe._pe_geog_to_ddm;l=h.PE_DDM_MAX;break;case "dms":t=a._pe._pe_geog_to_dms,l=h.PE_DMS_MAX}b=0;d&&(b=a._pe.getPointer(d));
d=e(g);d=a._pe.ensureFloat64(d);l=c(r,l);g=a._pe.ensureInt32(l);if(y=t(b,r,d,y,g))for(t=0;t<r;t++)k[t]=a._pe.UTF8ToString(l[t]);return y}function g(b,c,d,e,h){a._pe.ensureCache.prepare();var r;switch(b){case "dd":r=a._pe._pe_dd_to_geog;break;case "ddm":r=a._pe._pe_ddm_to_geog;break;case "dms":r=a._pe._pe_dms_to_geog}b=0;c&&(b=a._pe.getPointer(c));c=e.map(function(b){return a._pe.ensureString(b)});e=a._pe.ensureInt32(c);c=a._pe.ensureFloat64(Array(2*d));(r=r(b,d,e,c))&&k(h,d,c);return r}d.geog_to_dms=
function(b,c,a,d,e){return r("dms",b,c,a,d,e)};d.dms_to_geog=function(b,c,a,d){return g("dms",b,c,a,d)};d.geog_to_ddm=function(b,c,a,d,e){return r("ddm",b,c,a,d,e)};d.ddm_to_geog=function(b,c,a,d){return g("ddm",b,c,a,d)};d.geog_to_dd=function(b,c,a,d,e){return r("dd",b,c,a,d,e)};d.dd_to_geog=function(b,c,a,d){return g("dd",b,c,a,d)}})(a.PeNotationDms||(a.PeNotationDms={}));var v;(function(d){d.init=function(){d.PE_MGRS_STYLE_NEW=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;d.PE_MGRS_STYLE_OLD=
a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;d.PE_MGRS_STYLE_AUTO=a._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;d.PE_MGRS_180_ZONE_1_PLUS=a._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;d.PE_MGRS_ADD_SPACES=a._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};d.geog_to_mgrs_extended=function(d,g,b,y,k,l,p){a._pe.ensureCache.prepare();var r=0;d&&(r=a._pe.getPointer(d));d=e(b);b=a._pe.ensureFloat64(d);d=c(g,h.PE_MGRS_MAX);var t=a._pe.ensureInt32(d);if(y=a._pe._pe_geog_to_mgrs_extended(r,
g,b,y,k,l,t))for(k=0;k<g;k++)p[k]=a._pe.UTF8ToString(d[k]);return y};d.mgrs_to_geog_extended=function(c,d,b,e,h){a._pe.ensureCache.prepare();var g=0;c&&(g=a._pe.getPointer(c));c=b.map(function(b){return a._pe.ensureString(b)});b=a._pe.ensureInt32(c);c=a._pe.ensureFloat64(Array(2*d));(e=a._pe._pe_mgrs_to_geog_extended(g,d,b,e,c))&&k(h,d,c);return e}})(v=a.PeNotationMgrs||(a.PeNotationMgrs={}));(function(d){d.geog_to_usng=function(d,g,b,y,k,l,p){a._pe.ensureCache.prepare();var r=0;d&&(r=a._pe.getPointer(d));
d=e(b);b=a._pe.ensureFloat64(d);d=c(g,h.PE_MGRS_MAX);var t=a._pe.ensureInt32(d);if(y=a._pe._pe_geog_to_usng(r,g,b,y,k,l,t))for(k=0;k<g;k++)p[k]=a._pe.UTF8ToString(d[k]);return y};d.usng_to_geog=function(c,d,b,e){a._pe.ensureCache.prepare();var h=0;c&&(h=a._pe.getPointer(c));c=b.map(function(b){return a._pe.ensureString(b)});b=a._pe.ensureInt32(c);c=a._pe.ensureFloat64(Array(2*d));(h=a._pe._pe_usng_to_geog(h,d,b,c))&&k(e,d,c);return h}})(a.PeNotationUsng||(a.PeNotationUsng={}));var E;(function(d){d.init=
function(){d.PE_UTM_OPTS_NONE=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;d.PE_UTM_OPTS_ADD_SPACES=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;d.PE_UTM_OPTS_NS=a._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};d.geog_to_utm=function(d,g,b,y,k){a._pe.ensureCache.prepare();var r=0;d&&(r=a._pe.getPointer(d));d=e(b);b=a._pe.ensureFloat64(d);d=c(g,h.PE_UTM_MAX);var l=a._pe.ensureInt32(d);if(y=a._pe._pe_geog_to_utm(r,g,b,y,l))for(r=0;r<g;r++)k[r]=a._pe.UTF8ToString(d[r]);return y};d.utm_to_geog=
function(c,d,b,e,h){a._pe.ensureCache.prepare();var g=0;c&&(g=a._pe.getPointer(c));c=b.map(function(b){return a._pe.ensureString(b)});b=a._pe.ensureInt32(c);c=a._pe.ensureFloat64(Array(2*d));(e=a._pe._pe_utm_to_geog(g,d,b,e,c))&&k(h,d,c);return e}})(E=a.PeNotationUtm||(a.PeNotationUtm={}));var y;(function(c){var d=new Map;c.init=function(){c.PE_PCSINFO_OPTION_NONE=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;c.PE_PCSINFO_OPTION_DOMAIN=a._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;c.PE_POLE_OUTSIDE_BOUNDARY=
a._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;c.PE_POLE_POINT=a._pe.PePCSInfo.prototype.PE_POLE_POINT};c.generate=function(e,b){void 0===b&&(b=c.PE_PCSINFO_OPTION_DOMAIN);var h,g;d.has(e)&&(g=d.get(e),g[b]&&(h=g[b]));h||(h=a._pe.PePCSInfo.prototype.generate(e,b),g||(g=[],d.set(e,g)),g[b]=h);return h}})(y=a.PePCSInfo||(a.PePCSInfo={}));(function(c){c.version_string=function(){return a._pe.PeVersion.prototype.version_string()}})(a.PeVersion||(a.PeVersion={}));a._init=p})},"esri/geometry/support/GeographicTransformation":function(){define(["require",
"exports","./GeographicTransformationStep"],function(z,a,u){return function(){function a(a){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(a&&a.steps){var p=0;for(a=a.steps;p<a.length;p++){var l=a[p];l instanceof u?this.steps.push(l):this.steps.push(new u({wkid:l.wkid,wkt:l.wkt,isInverse:l.isInverse}))}}}a.cacheKey=function(a,p){return[void 0!==a.wkid&&null!==a.wkid?a.wkid.toString():"-1",void 0!==a.wkt&&null!==a.wkt?a.wkt.toString():"",void 0!==p.wkid&&null!==p.wkid?
p.wkid.toString():"-1",void 0!==p.wkt&&null!==p.wkt?p.wkt.toString():""].join()};a.fromGE=function(m){var p=new a,l="",c=0;for(m=m.steps;c<m.length;c++){var e=u.fromGE(m[c]);p.steps.push(e);l+=e.uid.toString()+","}p._cached_projection={};p._gtlistentry=null;p._chain=l;return p};a.prototype.getInverse=function(){var m=new a;m.steps=[];for(var p=this.steps.length-1;0<=p;p--)m.steps.push(this.steps[p].getInverse());return m};a.prototype.getGTListEntry=function(){for(var a="",p=0,l=this.steps;p<l.length;p++)a+=
l[p].uid.toString()+",";a!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=a);return this._gtlistentry};a.prototype.assignCachedGe=function(m,p,l){this._cached_projection[a.cacheKey(m,p)]=l};a.prototype.getCachedGeTransformation=function(m,p){for(var l="",c=0,e=this.steps;c<e.length;c++)l+=e[c].uid.toString()+",";l!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=l);m=this._cached_projection[a.cacheKey(m,p)];return void 0===m?null:m};return a}()})},
"esri/geometry/support/GeographicTransformationStep":function(){define(["require","exports"],function(z,a){var u=0;return function(){function a(a){void 0===a&&(a=null);this.uid=u++;a?(this._wkt=void 0!==a.wkt?a.wkt:null,this._wkid=void 0!==a.wkid?a.wkid:-1,this._isInverse=void 0!==a.isInverse?!0===a.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}a.fromGE=function(m){var p=new a;p._wkt=m.wkt;p._wkid=m.wkid;p._isInverse=m.isInverse;return p};Object.defineProperty(a.prototype,"wkt",
{get:function(){return this._wkt},set:function(a){this._wkt=a;this.uid=u++},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"wkid",{get:function(){return this._wkid},set:function(a){this._wkid=a;this.uid=u++},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isInverse",{get:function(){return this._isInverse},set:function(a){this._isInverse=a;this.uid=u++},enumerable:!0,configurable:!0});a.prototype.getInverse=function(){var m=new a;m._wkt=this.wkt;m._wkid=this._wkid;
m._isInverse=!this.isInverse;return m};return a}()})},"esri/renderers/support/clickToleranceUtils":function(){define(["require","exports"],function(z,a){function u(a,l){return l&&l.xoffset?Math.max(a,Math.abs(l.xoffset)):l&&l.yoffset?Math.max(a,Math.abs(l.yoffset)):a}function m(a,l){if("number"===typeof a)return a;if(a&&a.stops&&a.stops.length){a=a.stops;for(var c=l=0,e=0;e<a.length;e++){var k=a[e].size;"number"===typeof k&&(l+=k,c++)}return l/c}return l}function x(a,l){if(!l)return a;l=l.filter(function(a){return"size"===
a.type}).map(function(c){var e=c.minSize;return(m(c.maxSize,a)+m(e,a))/2});var c=0,e=l.length;if(0===e)return a;for(var k=0;k<e;k++)c+=l[k];return Math.max(Math.floor(c/e),a)}Object.defineProperty(a,"__esModule",{value:!0});a.calculateTolerance=function(a){if(!a)return 6;var l="visualVariables"in a?x(6,a.visualVariables):6;if("simple"===a.type)return u(l,a.symbol);if("unique-value"===a.type){var c=l;a.uniqueValueInfos.forEach(function(a){c=u(c,a.symbol)});return c}if("class-breaks"===a.type){var e=
l;a.classBreakInfos.forEach(function(a){e=u(e,a.symbol)});return e}return l}})},"esri/views/2d/layers/LayerView2D":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Collection ../../../core/collectionUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../layers/support/ClipArea ../../layers/support/ClipRect ../../layers/support/Geometry ../../layers/support/Path".split(" "),function(z,a,u,m,x,
p,l,c,e,k,g,h){Object.defineProperty(a,"__esModule",{value:!0});var q=x.ofType({key:"type",base:e,typeMap:{rect:k,path:h,geometry:g}});a.LayerView2D=function(a){return function(a){function e(){var c=null!==a&&a.apply(this,arguments)||this;c.clips=new q;c.moving=!1;c.attached=!1;c.lastUpdateId=-1;c.updateRequested=!1;return c}u(e,a);e.prototype.initialize=function(){var a=this;this.when(function(){a.requestUpdate()},function(){});var c=function(){return a.notifyChange("rendering")};this.handles.add([l.init(this,
"suspended",function(c){a.container&&(a.container.visible=!c);a.view&&!c&&a.updateRequested&&a.view.requestLayerViewUpdate(a)},!0),l.init(this,["fullOpacity","container"],function(){a.container&&(a.container.opacity=a.fullOpacity)},!0),l.on(this,"container","post-render",c),l.on(this,"container","will-render",c)])};e.prototype.destroy=function(){this.attached&&(this.attached=!1,this.detach());this.handles.remove("initialize");this.updateRequested=!1;this.view=this.layer=null};Object.defineProperty(e.prototype,
"rendering",{get:function(){return this.attached&&!this.suspended&&(this.moving||this.container.renderRequested||this.isRendering())},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"updating",{get:function(){return!this.suspended&&(!this.attached||this.updateRequested||this.isUpdating())},enumerable:!0,configurable:!0});e.prototype.isVisibleAtScale=function(a){var c=!0,d=this.layer,b=d.minScale,d=d.maxScale;if(null!=b&&null!=d){var c=!b,e=!d;!c&&a<=b&&(c=!0);!e&&a>=d&&(e=!0);c=
c&&e}return c};e.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestLayerViewUpdate(this))};e.prototype.processUpdate=function(a){this.isFulfilled()&&!this.isResolved()?this.updateRequested=!1:(this._set("updateParameters",a),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(a)))};e.prototype.isUpdating=function(){return!1};e.prototype.isRendering=function(){return!1};e.prototype.canResume=function(){var a=this.inherited(arguments);
a&&(a=this.isVisibleAtScale(this.view.scale));return a};m([c.property({type:q,set:function(a){a=p.referenceSetter(a,this._get("clips"),q);this._set("clips",a)}})],e.prototype,"clips",void 0);m([c.property()],e.prototype,"moving",void 0);m([c.property({dependsOn:["attached","suspended","moving"]})],e.prototype,"rendering",null);m([c.property()],e.prototype,"attached",void 0);m([c.property()],e.prototype,"container",void 0);m([c.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],
e.prototype,"suspended",void 0);m([c.property({readOnly:!0})],e.prototype,"updateParameters",void 0);m([c.property()],e.prototype,"updateRequested",void 0);m([c.property({dependsOn:["updateRequested","attached","suspended"]})],e.prototype,"updating",null);m([c.property()],e.prototype,"view",void 0);return e=m([c.subclass("esri.views.2d.layers.LayerView2D")],e)}(c.declared(a))}})},"esri/views/layers/support/ClipArea":function(){define("require exports ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/declareExtendsHelper ../../../core/JSONSupport ../../../core/accessorSupport/decorators".split(" "),
function(z,a,u,m,x,p){return function(a){function c(){return null!==a&&a.apply(this,arguments)||this}m(c,a);return c=u([p.subclass("esri.views.layers.support.ClipArea")],c)}(p.declared(x.JSONSupport))})},"esri/views/layers/support/ClipRect":function(){define("require exports ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/declareExtendsHelper ../../../core/accessorSupport/decorators ./ClipArea".split(" "),function(z,a,u,m,x,p){return function(a){function c(){var c=null!==a&&a.apply(this,
arguments)||this;c.type="rect";c.left=null;c.right=null;c.top=null;c.bottom=null;return c}m(c,a);e=c;c.prototype.clone=function(){return new e({left:this.left,right:this.right,top:this.top,bottom:this.bottom})};Object.defineProperty(c.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0});var e;u([x.property({type:[Number,String],json:{write:!0}})],c.prototype,"left",void 0);u([x.property({type:[Number,String],json:{write:!0}})],c.prototype,"right",
void 0);u([x.property({type:[Number,String],json:{write:!0}})],c.prototype,"top",void 0);u([x.property({type:[Number,String],json:{write:!0}})],c.prototype,"bottom",void 0);u([x.property({readOnly:!0,dependsOn:["left","right","top","bottom"]})],c.prototype,"version",null);return c=e=u([x.subclass("esri.views.layers.support.ClipRect")],c)}(x.declared(p))})},"esri/views/layers/support/Geometry":function(){define("require exports ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/declareExtendsHelper ../../../geometry ../../../core/accessorSupport/decorators ../../../geometry/Geometry ../../../geometry/support/jsonUtils ./ClipArea".split(" "),
function(z,a,u,m,x,p,l,c,e){var k={base:l,key:"type",typeMap:{extent:x.Extent,polygon:x.Polygon}};return function(a){function e(){var c=null!==a&&a.apply(this,arguments)||this;c.type="geometry";c.geometry=null;return c}m(e,a);g=e;Object.defineProperty(e.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0});e.prototype.clone=function(){return new g({geometry:this.geometry.clone()})};var g;u([p.property({types:k,json:{read:c.fromJSON,write:!0}})],e.prototype,
"geometry",void 0);u([p.property({readOnly:!0,dependsOn:["geometry"]})],e.prototype,"version",null);return e=g=u([p.subclass("esri.views.layers.support.Geometry")],e)}(p.declared(e))})},"esri/views/layers/support/Path":function(){define("require exports ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/declareExtendsHelper ../../../core/accessorSupport/decorators ./ClipArea".split(" "),function(z,a,u,m,x,p){return function(a){function c(){var c=null!==a&&a.apply(this,arguments)||this;
c.type="path";c.path=[];return c}m(c,a);Object.defineProperty(c.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0});u([x.property({type:[[[Number]]],json:{write:!0}})],c.prototype,"path",void 0);u([x.property({readOnly:!0,dependsOn:["path"]})],c.prototype,"version",null);return c=u([x.subclass("esri.views.layers.support.Path")],c)}(x.declared(p))})},"esri/views/2d/layers/features/tileRenderers":function(){define(["require","exports","../../../../core/nextTick",
"../../../../core/promiseUtils"],function(z,a,u,m){Object.defineProperty(a,"__esModule",{value:!0});a.createOrReuseTileRenderer=function(a,p){if(!a)return m.resolve(null);switch(a.type){case "class-breaks":case "simple":case "unique-value":case "dot-density":case "dictionary":return m.create(function(a){u(function(){return z(["./tileRenderers/SymbolTileRenderer"],a)})}).then(function(a){return a.default}).then(function(a){return new a(p)});case "heatmap":return m.create(function(a){u(function(){return z(["./tileRenderers/HeatmapTileRenderer"],
a)})}).then(function(a){return a.default}).then(function(a){return new a(p)})}return m.resolve(null)}})},"esri/views/2d/layers/features/support/rendererUtils":function(){define(["require","exports","../../../../../core/Logger","../../../../../core/screenUtils","../../../engine"],function(z,a,u,m,x){Object.defineProperty(a,"__esModule",{value:!0});var p=x.definitions.WEBGL_MAX_INNER_STOPS,l=x.definitions.WEBGL_MAX_STOPS,c=u.getLogger("esri.renderers.visualVariables.support.utils");a.simplifyVVRenderer=
function(a){if(!("visualVariables"in a&&a.visualVariables&&a.visualVariables.length))return a;a=a.clone();var e=a.visualVariables.map(function(a){if(("size"===a.type||"color"===a.type||"opacity"===a.type)&&null!=a.stops){var e;var g=a.type;e=a.stops;if(!(e.length<=l))if(c.warn("Found "+e.length+" Visual Variable stops, but MapView only supports "+l+". Displayed stops will be simplified."),e.length>2*l){for(var k=e[0],u=e.slice(1),y=u.pop(),d=u[0].value,r=u[u.length-1].value,t=(r-d)/p,b=[];d<r;d+=
t){for(var x=0;d>=u[x].value;)x++;var B=u[x],z=e[x-1],I=d-z.value,B=B.value===z.value?1:I/(B.value-z.value);"color"===g?(z=u[x],x=e[x-1],I=z.color.clone(),I.r=(1-B)*x.color.r+B*I.r,I.g=(1-B)*x.color.g+B*I.g,I.b=(1-B)*x.color.b+B*I.b,I.a=(1-B)*x.color.a+B*I.a,b.push({value:d,color:I,label:z.label})):"size"===g?(z=u[x],I=e[x-1],x=m.toPt(z.size),I=m.toPt(I.size),b.push({value:d,size:(1-B)*I+B*x,label:z.label})):(z=u[x],b.push({value:d,opacity:(1-B)*e[x-1].opacity+B*z.opacity,label:z.label}))}e=[k].concat(b,
[y])}else{g=e[0];e=e.slice(1);for(k=e.pop();e.length>p;){y=u=0;for(r=1;r<e.length;r++)t=Math.abs(e[r].value-e[r-1].value),t>y&&(y=t,u=r);e.splice(u,1)}e=[g].concat(e,[k])}a.stops=e}return a});a.visualVariables=e;return a}})},"esri/views/2d/layers/support/clusterUtils":function(){define("require exports ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/tsSupport/assignHelper ../../../../core/Error ../../../../core/Logger ../../../../core/maybe ../../../../core/MD5 ../../../../renderers/visualVariables/SizeVariable ../../../../renderers/visualVariables/support/SizeStop ../../engine".split(" "),
function(z,a,u,m,x,p,l,c,e,k,g,h){function q(a,c,g){switch(a){case "avg":case "avg_angle":return"cluster_avg_"+c;case "mode":return"cluster_type_"+c;case "norm":return a=c.toLowerCase()+",norm:field,"+g.toLowerCase(),"cluster_avg_"+e.createMD5Hash(a)}}function v(a,c,e,b){var d=q(e,c,b);a.some(function(b){return b.name===d})||("norm"===e?a.push({name:d,outStatistic:{onStatisticField:c,onStatisticNormalizationField:b,statisticType:e}}):a.push({name:d,outStatistic:{onStatisticField:c,statisticType:e}}));
return d}var E=this;Object.defineProperty(a,"__esModule",{value:!0});var y=l.getLogger("esri.views.2d.layers.support.clusterUtils");a.createClusterRenderer=function(e,g,h,b,k){return m(E,void 0,void 0,function(){var d,g,y;return u(this,function(r){d=h.clone();if(!a.isClusterCompatibleRenderer(d))return[2,d];g="visualVariables"in d&&d.visualVariables||[];y=a.findSizeVV(g);g.forEach(function(b){"rotation"===b.type?b.field=v(e,b.field,"avg_angle"):b.normalizationField?(b.field=v(e,b.field,"norm",b.normalizationField),
b.normalizationField=null):b.field&&(b.field=v(e,b.field,"avg"))});c.isNone(y)&&g.push(a.createClusterCountSizeVariable(b,k));switch(d.type){case "unique-value":d.field&&(d.field=v(e,d.field,"mode"));break;case "class-breaks":d.normalizationField?(d.field=v(e,d.field,"norm",d.normalizationField),d.normalizationField=null):d.field=v(e,d.field,"avg")}d.visualVariables=g;return[2,d]})})};a.findSizeVV=function(a){for(var c=0;c<a.length;c++){var e=a[c];if("size"===e.type)return e}return null};a.getActiveSizeStops=
function(a,c){a=a.featuresTilingScheme.getClosestInfoForScale(a.scale).level;return c.levels?c.levels[a]:null};a.createClusterCountSizeVariable=function(a,e){var d=[new g({value:0,size:0}),new g({value:1})];if(c.isNone(e))return new k({field:"cluster_count",stops:d.concat([new g({value:2,size:0})])});a=Object.keys(e).reduce(function(b,a){var c;return x({},b,(c={},c[a]=d.concat([new g({value:Math.max(2,e[a].minValue),size:"12px"}),new g({value:Math.max(3,e[a].maxValue),size:"50px"})]),c))},{});return new h.LevelDependentSizeVariable({field:"cluster_count",
levels:a})};a.isClusterCompatibleRenderer=function(a){var c=function(b){return y.error(new p("Unsupported-renderer",b,{renderer:a}))};if("valueExpression"in a&&a.valueExpression)return c("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if("unique-value"===a.type){if(a.field2||a.field3)return c("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1}else if("class-breaks"===a.type){if(a.normalizationField){var e=
a.normalizationType;if("field"!==e)return c("FeatureReductionCluster does not support a normalizationType of "+e),!1}}else if("simple"!==a.type)return c("FeatureReductionCluster does not support renderers of type "+a.type),!1;return("visualVariables"in a&&a.visualVariables||[]).some(function(b){return!!("valueExpression"in b&&b.valueExpression)})?(c("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1):!0}})},"esri/core/MD5":function(){define(["require",
"exports"],function(z,a){function u(a,e){var c=(a&65535)+(e&65535);return(a>>16)+(e>>16)+(c>>16)<<16|c&65535}function m(a,e,k,g,h,l){a=u(u(e,a),u(g,l));return u(a<<h|a>>>32-h,k)}function x(a,e,k,g,h,l,p){return m(e&k|~e&g,a,e,h,l,p)}function p(a,e,k,g,h,l,p){return m(e&g|k&~g,a,e,h,l,p)}function l(a,e,k,g,h,l,p){return m(k^(e|~g),a,e,h,l,p)}Object.defineProperty(a,"__esModule",{value:!0});a.outputTypes={Base64:0,Hex:1,String:2,Raw:3};a.createMD5Hash=function(c,e){void 0===e&&(e=a.outputTypes.Hex);
e=e||a.outputTypes.Base64;for(var k=[],g=0,h=8*c.length;g<h;g+=8)k[g>>5]|=(c.charCodeAt(g/8)&255)<<g%32;c=8*c.length;k[c>>5]|=128<<c%32;k[(c+64>>>9<<4)+14]=c;c=1732584193;for(var g=-271733879,h=-1732584194,q=271733878,v=0;v<k.length;v+=16){var E=c,y=g,d=h,r=q;c=x(c,g,h,q,k[v+0],7,-680876936);q=x(q,c,g,h,k[v+1],12,-389564586);h=x(h,q,c,g,k[v+2],17,606105819);g=x(g,h,q,c,k[v+3],22,-1044525330);c=x(c,g,h,q,k[v+4],7,-176418897);q=x(q,c,g,h,k[v+5],12,1200080426);h=x(h,q,c,g,k[v+6],17,-1473231341);g=x(g,
h,q,c,k[v+7],22,-45705983);c=x(c,g,h,q,k[v+8],7,1770035416);q=x(q,c,g,h,k[v+9],12,-1958414417);h=x(h,q,c,g,k[v+10],17,-42063);g=x(g,h,q,c,k[v+11],22,-1990404162);c=x(c,g,h,q,k[v+12],7,1804603682);q=x(q,c,g,h,k[v+13],12,-40341101);h=x(h,q,c,g,k[v+14],17,-1502002290);g=x(g,h,q,c,k[v+15],22,1236535329);c=p(c,g,h,q,k[v+1],5,-165796510);q=p(q,c,g,h,k[v+6],9,-1069501632);h=p(h,q,c,g,k[v+11],14,643717713);g=p(g,h,q,c,k[v+0],20,-373897302);c=p(c,g,h,q,k[v+5],5,-701558691);q=p(q,c,g,h,k[v+10],9,38016083);
h=p(h,q,c,g,k[v+15],14,-660478335);g=p(g,h,q,c,k[v+4],20,-405537848);c=p(c,g,h,q,k[v+9],5,568446438);q=p(q,c,g,h,k[v+14],9,-1019803690);h=p(h,q,c,g,k[v+3],14,-187363961);g=p(g,h,q,c,k[v+8],20,1163531501);c=p(c,g,h,q,k[v+13],5,-1444681467);q=p(q,c,g,h,k[v+2],9,-51403784);h=p(h,q,c,g,k[v+7],14,1735328473);g=p(g,h,q,c,k[v+12],20,-1926607734);c=m(g^h^q,c,g,k[v+5],4,-378558);q=m(c^g^h,q,c,k[v+8],11,-2022574463);h=m(q^c^g,h,q,k[v+11],16,1839030562);g=m(h^q^c,g,h,k[v+14],23,-35309556);c=m(g^h^q,c,g,k[v+
1],4,-1530992060);q=m(c^g^h,q,c,k[v+4],11,1272893353);h=m(q^c^g,h,q,k[v+7],16,-155497632);g=m(h^q^c,g,h,k[v+10],23,-1094730640);c=m(g^h^q,c,g,k[v+13],4,681279174);q=m(c^g^h,q,c,k[v+0],11,-358537222);h=m(q^c^g,h,q,k[v+3],16,-722521979);g=m(h^q^c,g,h,k[v+6],23,76029189);c=m(g^h^q,c,g,k[v+9],4,-640364487);q=m(c^g^h,q,c,k[v+12],11,-421815835);h=m(q^c^g,h,q,k[v+15],16,530742520);g=m(h^q^c,g,h,k[v+2],23,-995338651);c=l(c,g,h,q,k[v+0],6,-198630844);q=l(q,c,g,h,k[v+7],10,1126891415);h=l(h,q,c,g,k[v+14],15,
-1416354905);g=l(g,h,q,c,k[v+5],21,-57434055);c=l(c,g,h,q,k[v+12],6,1700485571);q=l(q,c,g,h,k[v+3],10,-1894986606);h=l(h,q,c,g,k[v+10],15,-1051523);g=l(g,h,q,c,k[v+1],21,-2054922799);c=l(c,g,h,q,k[v+8],6,1873313359);q=l(q,c,g,h,k[v+15],10,-30611744);h=l(h,q,c,g,k[v+6],15,-1560198380);g=l(g,h,q,c,k[v+13],21,1309151649);c=l(c,g,h,q,k[v+4],6,-145523070);q=l(q,c,g,h,k[v+11],10,-1120210379);h=l(h,q,c,g,k[v+2],15,718787259);g=l(g,h,q,c,k[v+9],21,-343485551);c=u(c,E);g=u(g,y);h=u(h,d);q=u(q,r)}k=[c,g,h,
q];switch(e){case a.outputTypes.Raw:return k;case a.outputTypes.Hex:e=[];c=0;for(g=4*k.length;c<g;c++)e.push("0123456789abcdef".charAt(k[c>>2]>>c%4*8+4&15)+"0123456789abcdef".charAt(k[c>>2]>>c%4*8&15));return e.join("");case a.outputTypes.String:e=[];c=0;for(g=32*k.length;c<g;c+=8)e.push(String.fromCharCode(k[c>>5]>>>c%32&255));return e.join("");case a.outputTypes.Base64:e=[];c=0;for(g=4*k.length;c<g;c+=3)for(h=(k[c>>2]>>c%4*8&255)<<16|(k[c+1>>2]>>(c+1)%4*8&255)<<8|k[c+2>>2]>>(c+2)%4*8&255,q=0;4>
q;q++)8*c+6*q>32*k.length?e.push("\x3d"):e.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>6*(3-q)&63));return e.join("")}}})},"esri/views/2d/layers/support/FeatureLayerProxy":function(){define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/tsSupport/assignHelper ../../../../core/tsSupport/generatorHelper ../../../../core/tsSupport/awaiterHelper ../../../../core/Promise ../../../../core/promiseUtils ../../../../core/requireUtils ../../../../core/workers ../../../../core/accessorSupport/decorators module".split(" "),
function(z,a,u,m,x,p,l,c,e,k,g,h,q){Object.defineProperty(a,"__esModule",{value:!0});x=function(a){function c(c){c=a.call(this,c)||this;c._startupResolver=e.createResolver();c.isReady=!1;return c}u(c,a);c.prototype.initialize=function(){this._controller=e.createAbortController();this.addResolvingPromise(this._startWorker(this._controller.signal))};c.prototype.destroy=function(){this._connection.close();this._controller.abort()};Object.defineProperty(c.prototype,"tileRenderer",{set:function(a){this.client.tileRenderer=
a},enumerable:!0,configurable:!0});c.prototype.startup=function(a,c,e,g){return l(this,void 0,void 0,function(){var b,d,h,k;return p(this,function(y){switch(y.label){case 0:return b=this._controller.signal,d=Array.isArray(e.source)?{transferList:e.source,signal:b}:void 0,h=a.tileInfo.toJSON(),k={service:e,config:c,tileInfo:h,options:g},[4,this._connection.invoke("startup",k,d)];case 1:return y.sent(),this._startupResolver.resolve(),this._set("isReady",!0),[2]}})})};c.prototype.update=function(a,c){return l(this,
void 0,void 0,function(){var e;return p(this,function(d){switch(d.label){case 0:return e={config:a,options:c},[4,this._startupResolver.promise];case 1:return d.sent(),[2,this._connection.invoke("update",e)]}})})};c.prototype.setHighlight=function(a){return l(this,void 0,void 0,function(){return p(this,function(c){switch(c.label){case 0:return[4,this._startupResolver.promise];case 1:return c.sent(),[2,this._connection.invoke("controller.setHighlight",a)]}})})};c.prototype.refresh=function(){return l(this,
void 0,void 0,function(){return p(this,function(a){switch(a.label){case 0:return[4,this._startupResolver.promise];case 1:return a.sent(),[2,this._connection.invoke("controller.refresh")]}})})};c.prototype.setViewState=function(a){return l(this,void 0,void 0,function(){return p(this,function(c){switch(c.label){case 0:return[4,this._startupResolver.promise];case 1:return c.sent(),[2,this._connection.invoke("setViewState",a.toJSON())]}})})};c.prototype.queryFeatures=function(a,c){return l(this,void 0,
void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("controller.queryFeatures",a.toJSON(),c)]}})})};c.prototype.queryObjectIds=function(a,c){return l(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("controller.queryObjectIds",a.toJSON(),c)]}})})};c.prototype.queryFeatureCount=
function(a,c){return l(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("controller.queryFeatureCount",a.toJSON(),c)]}})})};c.prototype.queryExtent=function(a,c){return l(this,void 0,void 0,function(){return p(this,function(e){return[2,this._connection.invoke("controller.queryExtent",a.toJSON(),c)]})})};c.prototype.queryLatestObservations=function(a,c){return l(this,void 0,void 0,
function(){return p(this,function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("controller.queryLatestObservations",a.toJSON(),c)]}})})};c.prototype.queryStatistics=function(a){return l(this,void 0,void 0,function(){return p(this,function(c){switch(c.label){case 0:return[4,this._startupResolver.promise];case 1:return c.sent(),[2,this._connection.invoke("controller.queryStatistics",a)]}})})};c.prototype.getObjectId=function(a){return l(this,
void 0,void 0,function(){return p(this,function(c){switch(c.label){case 0:return[4,this._startupResolver.promise];case 1:return c.sent(),[2,this._connection.invoke("controller.getObjectId",a)]}})})};c.prototype.getLocalId=function(a){return l(this,void 0,void 0,function(){return p(this,function(c){switch(c.label){case 0:return[4,this._startupResolver.promise];case 1:return c.sent(),[2,this._connection.invoke("controller.getLocalId",a)]}})})};c.prototype.getAggregate=function(a){return l(this,void 0,
void 0,function(){return p(this,function(c){switch(c.label){case 0:return[4,this._startupResolver.promise];case 1:return c.sent(),[2,this._connection.invoke("controller.getAggregate",a)]}})})};c.prototype.getAggregateValueRanges=function(){return l(this,void 0,void 0,function(){return p(this,function(a){switch(a.label){case 0:return[4,this._startupResolver.promise];case 1:return a.sent(),[2,this._connection.invoke("controller.getAggregateValueRanges")]}})})};c.prototype.mapValidLocalIds=function(a){return l(this,
void 0,void 0,function(){return p(this,function(c){switch(c.label){case 0:return[4,this._startupResolver.promise];case 1:return c.sent(),[2,this._connection.invoke("controller.mapValidLocalIds",a)]}})})};c.prototype.onEdits=function(a){return l(this,void 0,void 0,function(){var c,e,g;return p(this,function(b){switch(b.label){case 0:return[4,this._startupResolver.promise];case 1:return b.sent(),c=a.addedFeatures,e=a.deletedFeatures,g=a.updatedFeatures,[2,this._connection.invoke("controller.onEdits",
{addedFeatures:c,deletedFeatures:e,updatedFeatures:g})]}})})};c.prototype.enableEvent=function(a,c){return l(this,void 0,void 0,function(){return p(this,function(e){switch(e.label){case 0:return[4,this._startupResolver.promise];case 1:return e.sent(),[2,this._connection.invoke("controller.enableEvent",{name:a,value:c})]}})})};c.prototype._startWorker=function(a){return l(this,void 0,void 0,function(){var c,e;return p(this,function(d){switch(d.label){case 0:return c=k.getAbsMid("../features/Pipeline",
z,q),[4,g.open(c,{client:this.client,strategy:"dedicated",signal:a})];case 1:return this._connection=e=d.sent(),[2]}})})};m([h.property()],c.prototype,"isReady",void 0);m([h.property()],c.prototype,"client",void 0);m([h.property()],c.prototype,"tileRenderer",null);return c=m([h.subclass("esri.views.2d.layers.support.FeatureLayerProxy")],c)}(h.declared(c.EsriPromise));a.default=x})},"esri/views/2d/layers/support/popupUtils2D":function(){define(["require","exports","../../../../core/tsSupport/extendsHelper",
"../../../../core/tsSupport/decorateHelper","../../../../geometry/Extent"],function(z,a,u,m,x){Object.defineProperty(a,"__esModule",{value:!0});a.createQueryGeometry=function(a,l,c){var e=c.get("state.resolution"),e=l*("number"===typeof e?e:1);l=a.clone().offset(-e,-e);a=a.clone().offset(e,e);return new x({xmin:Math.min(l.x,a.x),ymin:Math.min(l.y,a.y),xmax:Math.max(l.x,a.x),ymax:Math.max(l.y,a.y),spatialReference:c.spatialReference})}})},"esri/views/2d/layers/support/util":function(){define(["require",
"exports","../../../../core/jsonMap"],function(z,a,u){Object.defineProperty(a,"__esModule",{value:!0});var m=new u.default({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});a.toJSONGeometryType=function(a){return m.toJSON(a)};a.analyzeRings=function(a,m,l){for(var c=[],e=[],k=0,g=0,h=0;h<a.length;h++){var p=a[h],v=g,u=p[0][0],y=p[0][1];c[g++]=u;c[g++]=y;for(var d=0,r=1;r<p.length;++r){var t=
u,b=y,u=p[r][0],y=p[r][1],d=d+(y*t-u*b);c[g++]=u;c[g++]=y}m(d/2);0<d?(0<v-k&&(l(k,v,c,e),k=v),e.length=0):0>d?0<v-k?e.push(.5*(v-k)):g=v:g=v}0<g-k&&l(k,g,c,e)}})},"esri/views/layers/FeatureLayerView":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/Error ../../core/iteratorUtils ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../layers/support/fieldUtils ../../layers/support/timeUtils ../../support/arcadeOnDemand ../../tasks/support/Query ./support/FeatureEffect ./support/FeatureFilter ./support/popupUtils".split(" "),
function(z,a,u,m,x,p,l,c,e,k,g,h,q,v,E,y,d,r,t,b,H){Object.defineProperty(a,"__esModule",{value:!0});var B=k.getLogger("esri.views.layers.FeatureLayerView");a.FeatureLayerView=function(a){return function(a){function k(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b=a.apply(this,b)||this;b._updatingRequiredFieldsPromise=null;b.effect=null;b.filter=null;b.layer=null;b.requiredFields=null;b.view=null;return b}u(k,a);k.prototype.initialize=function(){var b=this;q.init(this,"layer.renderer layer.labelingInfo layer.elevationInfo.featureExpressionInfo filter effect layer.timeInfo timeExtent".split(" "),
function(){return b._handleRequiredFieldsChange()},!0)};Object.defineProperty(k.prototype,"availableFields",{get:function(){var b=this.layer,a=this.layer.fields,c=this.requiredFields;return"outFields"in b&&b.outFields?E.fixFields(a,E.unpackFieldNames(a,b.outFields).concat(c)):E.fixFields(a,c)},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"maximumNumberOfFeatures",{get:function(){return 0},set:function(b){B.error("#maximumNumberOfFeatures\x3d","Setting maximum number of features is not supported")},
enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"maximumNumberOfFeaturesExceeded",{get:function(){return!1},enumerable:!0,configurable:!0});k.prototype.highlight=function(b,a){void 0===a&&(a={});return this.inherited(arguments,[b,a])};k.prototype.createQuery=function(){var b={outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},b=g.isSome(this.filter)?this.filter.createQuery(b):new r(b);this.timeExtent&&(b.timeExtent=b.timeExtent?b.timeExtent.intersection(this.timeExtent):
this.timeExtent.clone());return b};k.prototype.queryFeatures=function(b,a){return this.inherited(arguments,[b,a])};k.prototype.queryObjectIds=function(b,a){return this.inherited(arguments,[b,a])};k.prototype.queryFeatureCount=function(b,a){return this.inherited(arguments,[b,a])};k.prototype.queryExtent=function(b,a){return this.inherited(arguments,[b,a])};k.prototype._loadArcadeModules=function(b){if(b.get("expressionInfos.length"))return d.loadArcade()};k.prototype._handleRequiredFieldsChange=function(){var b=
this,a=this._updateRequiredFields();this._set("_updatingRequiredFieldsPromise",a);a.then(function(){b._updatingRequiredFieldsPromise===a&&b._set("_updatingRequiredFieldsPromise",null)})};k.prototype._updateRequiredFields=function(){return l(this,void 0,void 0,function(){var b,a,c,d,k,l,m,y,r,t,v,q,u;return p(this,function(p){switch(p.label){case 0:if(!this.layer||!this.view)return[2];b="3d"===this.view.type;a=this;d=c=a.layer;k=d.fields;l=d.objectIdField;m=d.renderer;y=new Set;return[4,h.eachAlways([m?
m.collectRequiredFields(y,k):null,E.collectLabelingFields(y,c),b?E.collectElevationFields(y,c):null,g.isSome(this.filter)?E.collectFilterFields(y,c,this.filter):null,this.effect?E.collectFilterFields(y,c,this.effect.filter):null])];case 1:r=p.sent();c.timeInfo&&this.timeExtent&&E.collectFields(y,c.fields,[c.timeInfo.startField,c.timeInfo.endField]);t=0;for(v=r;t<v.length;t++)q=v[t],q.error&&B.error(q.error);E.collectField(y,k,l);u=e.valuesOfSet(y).sort();this._set("requiredFields",u);return[2]}})})};
k.prototype.validateFetchPopupFeatures=function(b){var a=this.layer;if(!this.layer.popupEnabled)return new c("featurelayerview:fetchPopupFeatures","Popups are disabled",{layer:a});if(!H.getFetchPopupTemplate(this.layer,b))return new c("featurelayerview:fetchPopupFeatures","Layer does not define a popup template",{layer:a})};k.prototype.fetchClientPopupFeatures=function(b){return l(this,void 0,void 0,function(){var a,c,e,d,k,l,m,y,r,t,v,q;return p(this,function(p){switch(p.label){case 0:a=g.isSome(b)?
b.clientGraphics:null;if(!a||0===a.length)return[2,h.resolve([])];c=[];e=[];d=this.layer;k=H.getFetchPopupTemplate(d,b);return g.isSome(k)?[4,this._loadArcadeModules(k)]:[2,h.resolve([])];case 1:return m=(l=p.sent())&&l.arcadeUtils.hasGeometryOperations(k),[4,this.createPopupQuery(b)];case 2:y=p.sent();r=E.unpackFieldNames(d.fields,y.outFields);t=0;for(v=a;t<v.length;t++)q=v[t],m||!E.featureHasFields(r,q)?e.push(q):c.push(q);if(0===e.length)return[2,h.resolve(c)];y.objectIds=e.map(function(b){return b.attributes[d.objectIdField]});
return[2,d.queryFeatures(y).then(function(b){return c.concat(b.features)}).catch(function(){return e})]}})})};k.prototype.createPopupQuery=function(b){return l(this,void 0,void 0,function(){var a,c,e;return p(this,function(d){switch(d.label){case 0:return a=this.layer,c=a.createQuery(),c.returnGeometry=!0,c.returnZ=!0,c.returnM=!0,e=c,[4,H.getRequiredFields(this.layer,H.getFetchPopupTemplate(this.layer,b))];case 1:return e.outFields=d.sent(),c.outSpatialReference=this.view.spatialReference,[2,c]}})})};
m([v.property()],k.prototype,"_updatingRequiredFieldsPromise",void 0);m([v.property({readOnly:!0,dependsOn:["layer.outFields?","requiredFields"]})],k.prototype,"availableFields",null);m([v.property({type:t})],k.prototype,"effect",void 0);m([v.property({type:b})],k.prototype,"filter",void 0);m([v.property(y.combinedViewLayerTimeExtentProperty)],k.prototype,"timeExtent",void 0);m([v.property()],k.prototype,"layer",void 0);m([v.property({type:Number})],k.prototype,"maximumNumberOfFeatures",null);m([v.property({readOnly:!0,
type:Boolean})],k.prototype,"maximumNumberOfFeaturesExceeded",null);m([v.property({readOnly:!0})],k.prototype,"requiredFields",void 0);m([v.property()],k.prototype,"view",void 0);return k=m([v.subclass("esri.views.layers.FeatureLayerView")],k)}(v.declared(a))}})},"esri/views/layers/support/FeatureEffect":function(){define("require exports ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/declareExtendsHelper ../../../core/JSONSupport ../../../core/Logger ../../../core/maybe ../../../core/accessorSupport/decorators ./FeatureFilter ./ParsedFeatureEffect ./Transition".split(" "),
function(z,a,u,m,x,p,l,c,e,k,g){var h=p.getLogger("esri.views.layers.support.FeatureEffect");return function(a){function p(){var c=null!==a&&a.apply(this,arguments)||this;c.filter=null;c.includedEffect=null;c.excludedEffect=null;c.excludedLabelsVisible=!1;return c}m(p,a);q=p;Object.defineProperty(p.prototype,"insideEffect",{get:function(){h.warn("insideEffect is a temporary interface that will be removed. Use includedEffect instead");return this.includedEffect},set:function(a){h.warn("insideEffect is a temporary interface that will be removed. Use includedEffect instead");
this.includedEffect=a},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"outsideEffect",{get:function(){h.warn("outsideEffect is a temporary interface that will be removed. Use excludedEffect instead");return this.excludedEffect},set:function(a){h.warn("outsideEffect is a temporary interface that will be removed. Use excludedEffect instead");this.excludedEffect=a},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"parsedIncludedEffect",{get:function(){return l.isSome(this.includedEffect)?
"string"===typeof this.includedEffect?k.fromString(this.includedEffect):new g({from:k.fromString(this.includedEffect.from),to:k.fromString(this.includedEffect.to),duration:this.includedEffect.duration}):null},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"parsedExcludedEffect",{get:function(){return l.isSome(this.excludedEffect)?"string"===typeof this.excludedEffect?k.fromString(this.excludedEffect):new g({from:k.fromString(this.excludedEffect.from),to:k.fromString(this.excludedEffect.to),
duration:this.excludedEffect.duration}):null},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"renderingHash",{get:function(){return this.excludedLabelsVisible+"-"+this.includedEffect+"-"+this.excludedEffect},enumerable:!0,configurable:!0});Object.defineProperty(p.prototype,"done",{get:function(){return(!l.isSome(this.parsedIncludedEffect)||this.parsedIncludedEffect.done)&&(!l.isSome(this.parsedExcludedEffect)||this.parsedExcludedEffect.done)},enumerable:!0,configurable:!0});p.prototype.clone=
function(){return new q({filter:this.filter&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})};var q;u([c.property({type:e,json:{write:!0}})],p.prototype,"filter",void 0);u([c.property({type:String,json:{write:!0}})],p.prototype,"includedEffect",void 0);u([c.property({type:String,json:{write:!0}})],p.prototype,"excludedEffect",void 0);u([c.property({type:Boolean,json:{write:!0}})],p.prototype,"excludedLabelsVisible",
void 0);u([c.property({dependsOn:["includedEffect"]})],p.prototype,"parsedIncludedEffect",null);u([c.property({dependsOn:["excludedEffect"]})],p.prototype,"parsedExcludedEffect",null);u([c.property({dependsOn:["includedEffect","excludedEffect"]})],p.prototype,"renderingHash",null);return p=q=u([c.subclass("esri.views.layers.support.FeatureEffect")],p)}(c.declared(x.JSONSupport))})},"esri/views/layers/support/FeatureFilter":function(){define("require exports ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/assignHelper ../../../geometry ../../../TimeExtent ../../../core/iteratorUtils ../../../core/jsonMap ../../../core/JSONSupport ../../../core/lang ../../../core/accessorSupport/decorators ../../../geometry/support/jsonUtils ../../../tasks/support/Query".split(" "),
function(z,a,u,m,x,p,l,c,e,k,g,h,q,v){var E=new e.default({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),y=new e.default({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",
esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});return function(a){function e(b){b=a.call(this,b)||this;b.where=null;b.geometry=null;b.spatialRelationship="intersects";b.hiddenIds=new Set;b.distance=void 0;b.objectIds=null;b.units=null;b.timeExtent=null;b.enabled=!1;return b}m(e,a);d=e;e.prototype.writeWhere=function(b,a){a.where=b||"1\x3d1"};e.prototype.enable=function(){this._set("enabled",!0)};e.prototype.createQuery=
function(b){void 0===b&&(b={});var a=this.where,c=this.spatialRelationship,e=this.timeExtent,d=this.objectIds,h=this.units,k=this.distance;return new v(x({geometry:g.clone(this.geometry),objectIds:g.clone(d),spatialRelationship:c,timeExtent:g.clone(e),where:a,units:h,distance:k},b))};e.prototype.clone=function(){var b=this.where,a=this.geometry,c=this.spatialRelationship,e=this.hiddenIds,h=this.timeExtent,k=this.objectIds,l=this.units,m=this.distance,p=new Set;e.forEach(function(b){return p.add(b)});
return new d({geometry:g.clone(a),hiddenIds:p,objectIds:g.clone(k),spatialRelationship:c,timeExtent:g.clone(h),where:b,units:l,distance:m})};var d;u([h.property({type:String})],e.prototype,"where",void 0);u([h.writer("where")],e.prototype,"writeWhere",null);u([h.property({types:p.geometryTypes,json:{read:q.fromJSON,write:!0}})],e.prototype,"geometry",void 0);u([h.property({type:String,json:{read:{source:"spatialRel",reader:E.read},write:{target:"spatialRel",writer:E.write}}})],e.prototype,"spatialRelationship",
void 0);u([h.property({json:{write:function(b,a,e){return a[e]=c.valuesOfSet(b)},read:function(b){return c.createSetFromValues(b)}}})],e.prototype,"hiddenIds",void 0);u([h.property({type:Number,json:{write:{overridePolicy:function(b){return{enabled:0<b}}}}})],e.prototype,"distance",void 0);u([h.property({type:[Number],json:{write:!0}})],e.prototype,"objectIds",void 0);u([h.property({type:String,json:{read:y.read,write:{writer:y.write,overridePolicy:function(b){return{enabled:b&&0<this.distance}}}}})],
e.prototype,"units",void 0);u([h.property({type:l,json:{write:!0}})],e.prototype,"timeExtent",void 0);u([h.property({readOnly:!0})],e.prototype,"enabled",void 0);return e=d=u([h.subclass("esri.views.layers.support.FeatureFilter")],e)}(h.declared(k.JSONSupport))})},"esri/views/layers/support/ParsedFeatureEffect":function(){define("require exports ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/assignHelper ../../../core/Error ../../../core/JSONSupport ../../../core/Logger ../../../core/maybe ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/mat4 ../../../core/libs/gl-matrix-2/mat4f32 ./cssFilterParser".split(" "),
function(z,a,u,m,x,p,l,c,e,k,g,h,q){var v=c.getLogger("esri.views.layers.support.ParsedFeatureEffect"),E={grayscale:function(a){a=1-a.amount;a=h.mat4f32.fromValues(.2126+.7874*a,.7152-.7152*a,.0722-.0722*a,0,.2126-.2126*a,.7152+.2848*a,.0722-.0722*a,0,.2126-.2126*a,.7152-.7152*a,.0722+.9278*a,0,0,0,0,1);return g.mat4.transpose(a,a)},sepia:function(a){a=1-a.amount;a=h.mat4f32.fromValues(.393+.607*a,.769-.769*a,.189-.189*a,0,.349-.349*a,.686+.314*a,.168-.168*a,0,.272-.272*a,.534-.534*a,.131+.869*a,
0,0,0,0,1);return g.mat4.transpose(a,a)},saturate:function(a){a=a.amount;a=h.mat4f32.fromValues(.213+.787*a,.715-.715*a,.072-.072*a,0,.213-.213*a,.715+.285*a,.072-.072*a,0,.213-.213*a,.715-.715*a,.072+.928*a,0,0,0,0,1);return g.mat4.transpose(a,a)},"hue-rotate":function(a){var c=Math.sin(a.angle*Math.PI/180);a=Math.cos(a.angle*Math.PI/180);c=h.mat4f32.fromValues(.213+.787*a-.213*c,.715-.715*a-.715*c,.072-.072*a+.928*c,0,.213-.213*a+.143*c,.715+.285*a+.14*c,.072-.072*a-.283*c,0,.213-.213*a-.787*c,
.715-.715*a+.715*c,.072+.928*a+.072*c,0,0,0,0,1);return g.mat4.transpose(c,c)},invert:function(a){var c=1-2*a.amount;a=a.amount;c=h.mat4f32.fromValues(c,0,0,a,0,c,0,a,0,0,c,a,0,0,0,1);return g.mat4.transpose(c,c)},brightness:function(a){a=a.amount;a=h.mat4f32.fromValues(a,0,0,0,0,a,0,0,0,0,a,0,0,0,0,1);return g.mat4.transpose(a,a)},contrast:function(a){a=a.amount;a=h.mat4f32.fromValues(a,0,0,.5-.5*a,0,a,0,.5-.5*a,0,0,a,.5-.5*a,0,0,0,1);return g.mat4.transpose(a,a)}};return function(a){function c(){var c=
null!==a&&a.apply(this,arguments)||this;c.customTransforms=null;c.done=!0;return c}m(c,a);l=c;c.fromString=function(a){var b=[],c=null;try{for(var e=0,d=q.parse(a);e<d.length;e++){var g=d[e];"opacity"===g.type?c=g:b.push(g)}}catch(ga){v.error(new p("invalid-type","Encountered an error when parsing css",ga))}return new l({transforms:b,opacity:c})};c.prototype.getOpacity=function(){return e.isSome(this.opacity)?this.opacity.amount:1};c.prototype.getColorMatrix=function(){var a=this;return(this.transforms||
[]).map(function(a){return x({},a)}).reverse().reduce(function(b,c){return g.mat4.multiply(b,b,a._getFactory(c)(c))},h.mat4f32.create())};c.prototype.clone=function(){return new l({transforms:this.transforms&&this.transforms.map(function(a){return x({},a)}),customTransforms:this.customTransforms&&this.customTransforms.map(function(a){return x({},a)})})};c.prototype._getFactory=function(a){var b=E[a.type];if(b)return b;if(this.customTransforms)for(var b=function(b){if(b.type===a.type){b=h.mat4f32.fromValues.apply(h.mat4f32,
b.matrix);var c=g.mat4.transpose(b,b);return{value:function(){return c}}}},c=0,e=this.customTransforms;c<e.length;c++){var d=b(e[c]);if("object"===typeof d)return d.value}v.error("invalid-type","No effect "+a.type+" exists");return function(){return h.mat4f32.create()}};var l;u([k.property()],c.prototype,"opacity",void 0);u([k.property()],c.prototype,"transforms",void 0);u([k.property()],c.prototype,"customTransforms",void 0);return c=l=u([k.subclass("esri.views.layers.support.ParsedFeatureEffect")],
c)}(k.declared(l.JSONSupport))})},"esri/views/layers/support/cssFilterParser":function(){define([],function(){function z(a,u,m,x){this.message=a;this.expected=u;this.found=m;this.location=x;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,z)}(function(a,u){function m(){this.constructor=a}m.prototype=u.prototype;a.prototype=new m})(z,Error);z.buildMessage=function(a,u){function m(a){return a.charCodeAt(0).toString(16).toUpperCase()}function x(a){return a.replace(/\\/g,
"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(a){return"\\x0"+m(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(a){return"\\x"+m(a)})}function p(a){return a.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(a){return"\\x0"+m(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,
function(a){return"\\x"+m(a)})}var l={literal:function(a){return'"'+x(a.text)+'"'},"class":function(a){var c="",k;for(k=0;k<a.parts.length;k++)c+=a.parts[k]instanceof Array?p(a.parts[k][0])+"-"+p(a.parts[k][1]):p(a.parts[k]);return"["+(a.inverted?"^":"")+c+"]"},any:function(a){return"any character"},end:function(a){return"end of input"},other:function(a){return a.description}};return"Expected "+function(a){var c=Array(a.length),k;for(k=0;k<a.length;k++){var g=k,h;h=a[k];h=l[h.type](h);c[g]=h}c.sort();
if(0<c.length){for(a=k=1;k<c.length;k++)c[k-1]!==c[k]&&(c[a]=c[k],a++);c.length=a}switch(c.length){case 1:return c[0];case 2:return c[0]+" or "+c[1];default:return c.slice(0,-1).join(", ")+", or "+c[c.length-1]}}(a)+" but "+(u?'"'+x(u)+'"':"end of input")+" found."};return{SyntaxError:z,parse:function(a,u){function m(a,b){return{type:"literal",text:a,ignoreCase:b}}function x(a,b,c){return{type:"class",parts:a,inverted:b,ignoreCase:c}}function p(a){return{type:"other",description:a}}function l(b){var c=
oa[b],e;if(!c){for(e=b-1;!oa[e];)e--;c=oa[e];for(c={line:c.line,column:c.column};e<b;)10===a.charCodeAt(e)?(c.line++,c.column=1):c.column++,e++;oa[b]=c}return c}function c(a,b){var c=l(a),e=l(b);return{start:{offset:a,line:c.line,column:c.column},end:{offset:b,line:e.line,column:e.column}}}function e(a){f<da||(f>da&&(da=f,pa=[]),pa.push(a))}function k(){var c,d;w++;c=f;d=t();d!==b?(a.substr(f,4)===I?(d=I,f+=4):(d=b,0===w&&e(ga)),d!==b?(d=t(),d!==b?(A=c,c=null):(f=c,c=b)):(f=c,c=b)):(f=c,c=b);w--;
c===b&&(d=b,0===w&&e(va));if(c===b)if(c=[],d=g(),d!==b)for(;d!==b;)c.push(d),d=g();else c=b;return c}function g(){var d,g,k,l,m,p,u,x,H;w++;g=f;k=t();k!==b?(a.substr(f,5)===Qa?(l=Qa,f+=5):(l=b,0===w&&e(fb)),l!==b?(m=t(),m!==b?(p=y(),p!==b?(u=t(),u!==b?(41===a.charCodeAt(f)?(x=T,f++):(x=b,0===w&&e(L)),x!==b?(H=t(),H!==b?(A=g,g=k={type:"blur",radius:p}):(f=g,g=b)):(f=g,g=b)):(f=g,g=b)):(f=g,g=b)):(f=g,g=b)):(f=g,g=b)):(f=g,g=b);w--;g===b&&(k=b,0===w&&e(xa));d=g;if(d===b){var B,I,Fa,da,ha,ja,Da,cb;w++;
B=f;I=t();I!==b?(a.substr(f,11)===Ra?(Fa=Ra,f+=11):(Fa=b,0===w&&e(hb)),Fa!==b?(da=t(),da!==b?(ha=h(),ha!==b?(ja=t(),ja!==b?(41===a.charCodeAt(f)?(Da=T,f++):(Da=b,0===w&&e(L)),Da!==b?(cb=t(),cb!==b?(A=B,B=I={type:"brightness",amount:ha}):(f=B,B=b)):(f=B,B=b)):(f=B,B=b)):(f=B,B=b)):(f=B,B=b)):(f=B,B=b)):(f=B,B=b);w--;B===b&&(I=b,0===w&&e(gb));d=B;if(d===b){var M,ga,Ea,oa,na,va,pa,Ga;w++;M=f;ga=t();ga!==b?(a.substr(f,9)===Sa?(Ea=Sa,f+=9):(Ea=b,0===w&&e(jb)),Ea!==b?(oa=t(),oa!==b?(na=h(),na!==b?(va=t(),
va!==b?(41===a.charCodeAt(f)?(pa=T,f++):(pa=b,0===w&&e(L)),pa!==b?(Ga=t(),Ga!==b?(A=M,M=ga={type:"contrast",amount:na}):(f=M,M=b)):(f=M,M=b)):(f=M,M=b)):(f=M,M=b)):(f=M,M=b)):(f=M,M=b)):(f=M,M=b);w--;M===b&&(ga=b,0===w&&e(ib));d=M;if(d===b){var F,Ta,nb,Ha,ob,Ia,pb,Ja,za,Ka,Aa,La,qb,Ma;w++;F=f;Ta=t();if(Ta!==b)if(a.substr(f,12)===ya?(nb=ya,f+=12):(nb=b,0===w&&e(lb)),nb!==b)if(Ha=t(),Ha!==b)if(ob=y(),ob!==b)if(Ia=t(),Ia!==b)if(pb=y(),pb!==b)if(Ja=t(),Ja!==b)if(za=y(),za===b&&(za=null),za!==b)if(Ka=
t(),Ka!==b){var n,D,K,C,G,J,Y,U,ea,V,fa,W,Z,aa,Ba,wa,Na,rb;n=f;35===a.charCodeAt(f)?(D=Mb,f++):(D=b,0===w&&e(Nb));if(D!==b)if(K=f,C=r(),C!==b?(G=r(),G!==b?K=C=[C,G]:(f=K,K=b)):(f=K,K=b),K!==b)if(C=f,G=r(),G!==b?(J=r(),J!==b?C=G=[G,J]:(f=C,C=b)):(f=C,C=b),C!==b)if(G=f,J=r(),J!==b?(Y=r(),Y!==b?G=J=[J,Y]:(f=G,G=b)):(f=G,G=b),G!==b){A=n;var db=C,eb=G;n=D=[parseInt(K.join(""),16),parseInt(db.join(""),16),parseInt(eb.join(""),16)]}else f=n,n=b;else f=n,n=b;else f=n,n=b;else f=n,n=b;if(n===b){n=f;35===a.charCodeAt(f)?
(D=Mb,f++):(D=b,0===w&&e(Nb));if(D!==b)if(K=r(),K!==b)if(C=r(),C!==b)if(G=r(),G!==b){A=n;var Oa=C,Pa=G;n=D=[parseInt([K,K].join(""),16),parseInt([Oa,Oa].join(""),16),parseInt([Pa,Pa].join(""),16)]}else f=n,n=b;else f=n,n=b;else f=n,n=b;else f=n,n=b;if(n===b&&(n=f,a.substr(f,5)===ka?(D=ka,f+=5):(D=b,0===w&&e(Ua)),D!==b?(K=t(),K!==b?(C=v(),C!==b?(G=t(),G!==b?(44===a.charCodeAt(f)?(J=ba,f++):(J=b,0===w&&e(ca)),J!==b?(Y=t(),Y!==b?(U=v(),U!==b?(ea=t(),ea!==b?(44===a.charCodeAt(f)?(V=ba,f++):(V=b,0===w&&
e(ca)),V!==b?(fa=t(),fa!==b?(W=v(),W!==b?(Z=t(),Z!==b?(44===a.charCodeAt(f)?(aa=ba,f++):(aa=b,0===w&&e(ca)),aa!==b?(Ba=t(),Ba!==b?(wa=h(),wa!==b?(Na=t(),Na!==b?(41===a.charCodeAt(f)?(rb=T,f++):(rb=b,0===w&&e(L)),rb!==b?(A=n,n=D=[255*C,255*U,255*W,wa]):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b),n===b&&(n=f,a.substr(f,5)===ka?(D=ka,f+=5):(D=b,0===w&&e(Ua)),D!==
b?(K=t(),K!==b?(C=q(),C!==b?(G=t(),G!==b?(44===a.charCodeAt(f)?(J=ba,f++):(J=b,0===w&&e(ca)),J!==b?(Y=t(),Y!==b?(U=q(),U!==b?(ea=t(),ea!==b?(44===a.charCodeAt(f)?(V=ba,f++):(V=b,0===w&&e(ca)),V!==b?(fa=t(),fa!==b?(W=q(),W!==b?(44===a.charCodeAt(f)?(Z=ba,f++):(Z=b,0===w&&e(ca)),Z!==b?(aa=t(),aa!==b?(Ba=h(),Ba!==b?(41===a.charCodeAt(f)?(wa=T,f++):(wa=b,0===w&&e(L)),wa!==b?(A=n,n=D=[C,U,W,Ba]):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):
(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b),n===b&&(n=f,a.substr(f,5)===ka?(D=ka,f+=5):(D=b,0===w&&e(Ua)),D!==b?(K=t(),K!==b?(C=v(),C!==b?(G=t(),G!==b?(44===a.charCodeAt(f)?(J=ba,f++):(J=b,0===w&&e(ca)),J!==b?(Y=t(),Y!==b?(U=v(),U!==b?(ea=t(),ea!==b?(44===a.charCodeAt(f)?(V=ba,f++):(V=b,0===w&&e(ca)),V!==b?(fa=t(),fa!==b?(W=v(),W!==b?(Z=t(),Z!==b?(41===a.charCodeAt(f)?(aa=T,f++):(aa=b,0===w&&e(L)),aa!==b?(A=n,n=D=[255*C,255*U,255*W,1]):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=
b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b),n===b&&(n=f,a.substr(f,5)===ka?(D=ka,f+=5):(D=b,0===w&&e(Ua)),D!==b?(K=t(),K!==b?(C=q(),C!==b?(G=t(),G!==b?(44===a.charCodeAt(f)?(J=ba,f++):(J=b,0===w&&e(ca)),J!==b?(Y=t(),Y!==b?(U=q(),U!==b?(ea=t(),ea!==b?(44===a.charCodeAt(f)?(V=ba,f++):(V=b,0===w&&e(ca)),V!==b?(fa=t(),fa!==b?(W=q(),W!==b?(41===a.charCodeAt(f)?(Z=T,f++):(Z=b,0===w&&e(L)),Z!==b?(A=n,n=D=[C,U,W,1]):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):
(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b),n===b&&(n=f,a.substr(f,4)===Va?(D=Va,f+=4):(D=b,0===w&&e(Ob)),D!==b?(K=t(),K!==b?(C=v(),C!==b?(G=t(),G!==b?(44===a.charCodeAt(f)?(J=ba,f++):(J=b,0===w&&e(ca)),J!==b?(Y=t(),Y!==b?(U=v(),U!==b?(ea=t(),ea!==b?(44===a.charCodeAt(f)?(V=ba,f++):(V=b,0===w&&e(ca)),V!==b?(fa=t(),fa!==b?(W=v(),W!==b?(Z=t(),Z!==b?(41===a.charCodeAt(f)?(aa=T,f++):(aa=b,0===w&&e(L)),aa!==b?(A=n,n=D=[255*C,255*U,255*W,1]):(f=n,n=b)):(f=n,n=
b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b),n===b&&(n=f,a.substr(f,4)===Va?(D=Va,f+=4):(D=b,0===w&&e(Ob)),D!==b?(K=t(),K!==b?(C=q(),C!==b?(G=t(),G!==b?(44===a.charCodeAt(f)?(J=ba,f++):(J=b,0===w&&e(ca)),J!==b?(Y=t(),Y!==b?(U=q(),U!==b?(ea=t(),ea!==b?(44===a.charCodeAt(f)?(V=ba,f++):(V=b,0===w&&e(ca)),V!==b?(fa=t(),fa!==b?(W=q(),W!==b?(Z=t(),Z!==b?(41===a.charCodeAt(f)?(aa=T,f++):(aa=b,0===w&&e(L)),aa!==b?(A=n,n=D=[C,U,
W,1]):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b)):(f=n,n=b),n===b))))))){var Ca,qa,ra;w++;Ca=f;qa=[];Pb.test(a.charAt(f))?(ra=a.charAt(f),f++):(ra=b,0===w&&e(Qb));if(ra!==b)for(;ra!==b;)qa.push(ra),Pb.test(a.charAt(f))?(ra=a.charAt(f),f++):(ra=b,0===w&&e(Qb));else qa=b;if(qa!==b){A=Ca;var sb=a.substring(A,f);if(!qc.has(sb)){var Lb='unknown color "'+sb+'"',Wa=void 0,Wa=void 0!==Wa?Wa:c(A,f);throw new z(Lb,null,
null,Wa);}qa=Rb[sb].concat(1)}Ca=qa;w--;Ca===b&&(qa=b,0===w&&e(rc));n=Ca}}Aa=n;Aa===b&&(Aa=null);Aa!==b?(La=t(),La!==b?(41===a.charCodeAt(f)?(qb=T,f++):(qb=b,0===w&&e(L)),qb!==b?(Ma=t(),Ma!==b?(A=F,F=Ta={type:"drop-shadow",offsetX:ob,offsetY:pb,blurRadius:za,color:Aa}):(f=F,F=b)):(f=F,F=b)):(f=F,F=b)):(f=F,F=b)}else f=F,F=b;else f=F,F=b;else f=F,F=b;else f=F,F=b;else f=F,F=b;else f=F,F=b;else f=F,F=b;else f=F,F=b;else f=F,F=b;w--;F===b&&(Ta=b,0===w&&e(kb));d=F;if(d===b){var N,Xa,tb,Sb,ub,Tb,vb,Ub;
w++;N=f;Xa=t();Xa!==b?(a.substr(f,10)===la?(tb=la,f+=10):(tb=b,0===w&&e(sc)),tb!==b?(Sb=t(),Sb!==b?(ub=h(),ub!==b?(Tb=t(),Tb!==b?(41===a.charCodeAt(f)?(vb=T,f++):(vb=b,0===w&&e(L)),vb!==b?(Ub=t(),Ub!==b?(A=N,N=Xa={type:"grayscale",amount:ub}):(f=N,N=b)):(f=N,N=b)):(f=N,N=b)):(f=N,N=b)):(f=N,N=b)):(f=N,N=b)):(f=N,N=b);w--;N===b&&(Xa=b,0===w&&e(mb));d=N;if(d===b){var O,Ya,wb,Vb,xb,Wb,yb,Xb;w++;O=f;Ya=t();if(Ya!==b)if(a.substr(f,11)===sa?(wb=sa,f+=11):(wb=b,0===w&&e(tc)),wb!==b)if(Vb=t(),Vb!==b){var X,
ma,ta;w++;X=f;var ia,ua,Yb;w++;ia=f;uc.test(a.charAt(f))?(ua=a.charAt(f),f++):(ua=b,0===w&&e(vc));ua===b&&(ua=null);ua!==b?(Yb=q(),Yb!==b?(A=ia,ia=ua=parseFloat(a.substring(A,f))):(f=ia,ia=b)):(f=ia,ia=b);w--;ia===b&&(ua=b,0===w&&e(wc));ma=ia;ma!==b?(ta=E(),ta!==b?(A=X,X=ma*=ta):(f=X,X=b)):(f=X,X=b);X===b&&(X=f,48===a.charCodeAt(f)?(ma=Zb,f++):(ma=b,0===w&&e($b)),ma!==b?(ta=E(),ta===b&&(ta=null),ta!==b?(A=X,X=ma=0):(f=X,X=b)):(f=X,X=b));w--;X===b&&(ma=b,0===w&&e(xc));xb=X;xb!==b?(Wb=t(),Wb!==b?(41===
a.charCodeAt(f)?(yb=T,f++):(yb=b,0===w&&e(L)),yb!==b?(Xb=t(),Xb!==b?(A=O,O=Ya={type:"hue-rotate",angle:xb}):(f=O,O=b)):(f=O,O=b)):(f=O,O=b)):(f=O,O=b)}else f=O,O=b;else f=O,O=b;else f=O,O=b;w--;O===b&&(Ya=b,0===w&&e(yc));d=O;if(d===b){var P,Za,zb,ac,Ab,bc,Bb,cc;w++;P=f;Za=t();Za!==b?(a.substr(f,7)===dc?(zb=dc,f+=7):(zb=b,0===w&&e(zc)),zb!==b?(ac=t(),ac!==b?(Ab=h(),Ab!==b?(bc=t(),bc!==b?(41===a.charCodeAt(f)?(Bb=T,f++):(Bb=b,0===w&&e(L)),Bb!==b?(cc=t(),cc!==b?(A=P,P=Za={type:"invert",amount:Ab}):(f=
P,P=b)):(f=P,P=b)):(f=P,P=b)):(f=P,P=b)):(f=P,P=b)):(f=P,P=b)):(f=P,P=b);w--;P===b&&(Za=b,0===w&&e(Ac));d=P;if(d===b){var Q,$a,Cb,ec,Db,fc,Eb,gc;w++;Q=f;$a=t();$a!==b?(a.substr(f,8)===hc?(Cb=hc,f+=8):(Cb=b,0===w&&e(Bc)),Cb!==b?(ec=t(),ec!==b?(Db=h(),Db!==b?(fc=t(),fc!==b?(41===a.charCodeAt(f)?(Eb=T,f++):(Eb=b,0===w&&e(L)),Eb!==b?(gc=t(),gc!==b?(A=Q,Q=$a={type:"opacity",amount:Db}):(f=Q,Q=b)):(f=Q,Q=b)):(f=Q,Q=b)):(f=Q,Q=b)):(f=Q,Q=b)):(f=Q,Q=b)):(f=Q,Q=b);w--;Q===b&&($a=b,0===w&&e(Cc));d=Q;if(d===
b){var R,ab,Fb,ic,Gb,jc,Hb,kc;w++;R=f;ab=t();ab!==b?(a.substr(f,9)===lc?(Fb=lc,f+=9):(Fb=b,0===w&&e(Dc)),Fb!==b?(ic=t(),ic!==b?(Gb=h(),Gb!==b?(jc=t(),jc!==b?(41===a.charCodeAt(f)?(Hb=T,f++):(Hb=b,0===w&&e(L)),Hb!==b?(kc=t(),kc!==b?(A=R,R=ab={type:"saturate",amount:Gb}):(f=R,R=b)):(f=R,R=b)):(f=R,R=b)):(f=R,R=b)):(f=R,R=b)):(f=R,R=b)):(f=R,R=b);w--;R===b&&(ab=b,0===w&&e(Ec));d=R;if(d===b){var S,bb,Ib,mc,Jb,nc,Kb,oc;w++;S=f;bb=t();bb!==b?(a.substr(f,6)===pc?(Ib=pc,f+=6):(Ib=b,0===w&&e(Fc)),Ib!==b?(mc=
t(),mc!==b?(Jb=h(),Jb!==b?(nc=t(),nc!==b?(41===a.charCodeAt(f)?(Kb=T,f++):(Kb=b,0===w&&e(L)),Kb!==b?(oc=t(),oc!==b?(A=S,S=bb={type:"sepia",amount:Jb}):(f=S,S=b)):(f=S,S=b)):(f=S,S=b)):(f=S,S=b)):(f=S,S=b)):(f=S,S=b)):(f=S,S=b);w--;S===b&&(bb=b,0===w&&e(Gc));d=S}}}}}}}}}return d}function h(){var a;w++;a=v();a===b&&(a=q());w--;a===b&&0===w&&e(cb);return a}function q(){var c,d,g;w++;c=f;d=[];ha.test(a.charAt(f))?(g=a.charAt(f),f++):(g=b,0===w&&e(ja));if(g!==b)for(;g!==b;)d.push(g),ha.test(a.charAt(f))?
(g=a.charAt(f),f++):(g=b,0===w&&e(ja));else d=b;if(d!==b)if(46===a.charCodeAt(f)?(g=Da,f++):(g=b,0===w&&e(Lb)),g!==b){d=[];ha.test(a.charAt(f))?(g=a.charAt(f),f++):(g=b,0===w&&e(ja));if(g!==b)for(;g!==b;)d.push(g),ha.test(a.charAt(f))?(g=a.charAt(f),f++):(g=b,0===w&&e(ja));else d=b;d!==b?(A=c,c=d=parseFloat(a.substring(A,f))):(f=c,c=b)}else f=c,c=b;else f=c,c=b;if(c===b){w++;c=f;d=[];ha.test(a.charAt(f))?(g=a.charAt(f),f++):(g=b,0===w&&e(ja));if(g!==b)for(;g!==b;)d.push(g),ha.test(a.charAt(f))?(g=
a.charAt(f),f++):(g=b,0===w&&e(ja));else d=b;d!==b&&(A=c,d=parseInt(a.substring(A,f),10));c=d;w--;c===b&&(d=b,0===w&&e(Ea))}w--;c===b&&(d=b,0===w&&e(Fa));return c}function v(){var c,d,g;c=f;d=q();d!==b?(37===a.charCodeAt(f)?(g=Hc,f++):(g=b,0===w&&e(Ic)),g!==b?(A=c,c=d/100):(f=c,c=b)):(f=c,c=b);return c}function E(){var c,d;w++;c=f;a.substr(f,3)===Ga?(d=Ga,f+=3):(d=b,0===w&&e(Jc));d!==b&&(A=c,d=1);c=d;c===b&&(c=f,a.substr(f,4)===Ha?(d=Ha,f+=4):(d=b,0===w&&e(Kc)),d!==b&&(A=c,d=.9),c=d,c===b&&(c=f,a.substr(f,
3)===Ia?(d=Ia,f+=3):(d=b,0===w&&e(Lc)),d!==b&&(A=c,d=180/Math.PI),c=d,c===b&&(c=f,a.substr(f,4)===Ja?(d=Ja,f+=4):(d=b,0===w&&e(Mc)),d!==b&&(A=c,d=1/360),c=d)));w--;c===b&&(d=b,0===w&&e(Nc));return c}function y(){var c,g,h;w++;c=f;g=q();g!==b?(h=d(),h!==b?(A=c,c=g*h):(f=c,c=b)):(f=c,c=b);c===b&&(c=f,48===a.charCodeAt(f)?(g=Zb,f++):(g=b,0===w&&e($b)),g!==b?(h=d(),h===b&&(h=null),h!==b?(A=c,c=0):(f=c,c=b)):(f=c,c=b));w--;c===b&&(g=b,0===w&&e(Oc));return c}function d(){var c,d;c=f;a.substr(f,2)===Ka?
(d=Ka,f+=2):(d=b,0===w&&e(Pc));d!==b&&(A=c,d=1);c=d;c===b&&(c=f,a.substr(f,2)===La?(d=La,f+=2):(d=b,0===w&&e(Qc)),d!==b&&(A=c,d=96/2.54),c=d,c===b&&(c=f,a.substr(f,2)===Ma?(d=Ma,f+=2):(d=b,0===w&&e(Rc)),d!==b&&(A=c,d=96/2.54/10),c=d,c===b&&(c=f,81===a.charCodeAt(f)?(d=Sc,f++):(d=b,0===w&&e(Tc)),d!==b&&(A=c,d=96/2.54/40),c=d,c===b&&(c=f,a.substr(f,2)===Na?(d=Na,f+=2):(d=b,0===w&&e(Uc)),d!==b&&(A=c,d=96),c=d,c===b&&(c=f,a.substr(f,2)===db?(d=db,f+=2):(d=b,0===w&&e(Vc)),d!==b&&(A=c,d=16),c=d,c===b&&
(c=f,a.substr(f,2)===eb?(d=eb,f+=2):(d=b,0===w&&e(Wc)),d!==b&&(A=c,d=96/73),c=d))))));return c}function r(){var c;Xc.test(a.charAt(f))?(c=a.charAt(f),f++):(c=b,0===w&&e(Yc));return c}function t(){var c,d;w++;c=[];Oa.test(a.charAt(f))?(d=a.charAt(f),f++):(d=b,0===w&&e(Pa));for(;d!==b;)c.push(d),Oa.test(a.charAt(f))?(d=a.charAt(f),f++):(d=b,0===w&&e(Pa));w--;c===b&&(d=b,0===w&&e(Zc));return c}u=void 0!==u?u:{};var b={},H={start:k},B=k,va=p("none"),I="none",ga=m("none",!1),xa=p("blur()"),Qa="blur(",
fb=m("blur(",!1),T=")",L=m(")",!1),gb=p("brightness()"),Ra="brightness(",hb=m("brightness(",!1),ib=p("contrast()"),Sa="contrast(",jb=m("contrast(",!1),kb=p("drop-shadow()"),ya="drop-shadow(",lb=m("drop-shadow(",!1),mb=p("grayscale()"),la="grayscale(",sc=m("grayscale(",!1),yc=p("hue-rotate()"),sa="hue-rotate(",tc=m("hue-rotate(",!1),Ac=p("invert()"),dc="invert(",zc=m("invert(",!1),Cc=p("opacity()"),hc="opacity(",Bc=m("opacity(",!1),Ec=p("saturate()"),lc="saturate(",Dc=m("saturate(",!1),Gc=p("sepia()"),
pc="sepia(",Fc=m("sepia(",!1),cb=p("\x3cnumber-percentage\x3e"),Ea=p("\x3cinteger\x3e"),ha=/^[0-9]/,ja=x([["0","9"]],!1,!1),Fa=p("\x3cnumber\x3e"),Da=".",Lb=m(".",!1),wc=p("\x3csignedNumber\x3e"),uc=/^[+\-]/,vc=x(["+","-"],!1,!1),Hc="%",Ic=m("%",!1),xc=p("\x3cangle\x3e"),Zb="0",$b=m("0",!1),Nc=p("\x3cunit\x3e"),Ga="deg",Jc=m("deg",!1),Ha="grad",Kc=m("grad",!1),Ia="rad",Lc=m("rad",!1),Ja="turn",Mc=m("turn",!1),Oc=p("\x3clength\x3e"),Ka="px",Pc=m("px",!1),La="cm",Qc=m("cm",!1),Ma="mm",Rc=m("mm",!1),
Sc="Q",Tc=m("Q",!1),Na="in",Uc=m("in",!1),db="pc",Vc=m("pc",!1),eb="pt",Wc=m("pt",!1),Mb="#",Nb=m("#",!1),ka="rgba(",Ua=m("rgba(",!1),ba=",",ca=m(",",!1),Va="rgb(",Ob=m("rgb(",!1),Xc=/^[0-9a-fA-F]/,Yc=x([["0","9"],["a","f"],["A","F"]],!1,!1),Zc=p("whitespace"),Oa=/^[ \t\n\r]/,Pa=x([" ","\t","\n","\r"],!1,!1),rc=p("\x3cnamed-color\x3e"),Pb=/^[a-z]/,Qb=x([["a","z"]],!1,!1),f=0,A=0,oa=[{line:1,column:1}],da=0,pa=[],w=0,na;if("startRule"in u){if(!(u.startRule in H))throw Error("Can't start parsing from rule \""+
u.startRule+'".');B=H[u.startRule]}var Rb={transparent:[0,0,0,0],black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,
205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],
darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,
128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,
206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,
225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rebeccapurple:[102,51,153],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,
128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]},qc=new Set(Object.keys(Rb));na=B();if(na!==b&&f===a.length)return na;na!==
b&&f<a.length&&e({type:"end"});throw function(a,b,c){return new z(z.buildMessage(a,b),a,b,c)}(pa,da<a.length?a.charAt(da):null,da<a.length?c(da,da+1):c(da,da));}}})},"esri/views/layers/support/Transition":function(){define("require exports ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/declareExtendsHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../../core/libs/gl-matrix-2/mat4".split(" "),function(z,a,u,m,x,p,l){return function(a){function c(){var c=null!==
a&&a.apply(this,arguments)||this;c.from=null;c.to=null;c.duration=4E3;c.repeat=!0;c.done=!1;return c}m(c,a);k=c;c.prototype.getColorMatrix=function(){this.done=!1;if(null==this._lastTime)this._currentStep=0,this._lastTime=Date.now();else{var a=this._lastTime,c=Date.now();this._currentStep+=c-a;2147483647<=this._currentStep&&(this._currentStep=0);this._lastTime=c}var a=this._currentStep%this.duration/(this.duration/2),a=1>=a?a:2-a,c=this.from.getColorMatrix(),e=this.to.getColorMatrix();l.mat4.multiplyScalar(c,
c,1-a);l.mat4.multiplyScalar(e,e,a);!this.repeat&&this._currentStep>=this.duration&&(this.done=!0);return l.mat4.add(c,c,e)};c.prototype.getOpacity=function(){throw Error("No getOpacity definition for Transition");};c.prototype.clone=function(){var a=new k({from:this.from.clone(),to:this.to.clone(),duration:this.duration});a._lastTime=this._lastTime;a._currentStep=this._currentStep;return a};var k;u([p.property()],c.prototype,"from",void 0);u([p.property()],c.prototype,"to",void 0);u([p.property({type:Number})],
c.prototype,"duration",void 0);u([p.property({type:Boolean})],c.prototype,"repeat",void 0);return c=k=u([p.subclass("esri.views.layers.support.Transition")],c)}(p.declared(x))})},"esri/views/layers/support/popupUtils":function(){define("require exports ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper @dojo/framework/shim/array ../../../core/maybe ../../../layers/support/fieldUtils".split(" "),function(z,a,u,m,x,p,l){Object.defineProperty(a,"__esModule",{value:!0});a.getRequiredFields=
function(a,e){void 0===e&&(e=a.popupTemplate);return m(this,void 0,void 0,function(){var c,g,h,m,v,z,y,d,r,t,b;return u(this,function(k){switch(k.label){case 0:return p.isSome(e)?[4,e.getRequiredFields(a.fields)]:[2,[]];case 1:c=k.sent();g=e.lastEditInfoEnabled;h=a.objectIdField;m=a.typeIdField;v=a.globalIdField;if(x.includes(c,"*"))return[2,["*"]];y=l.fixFields;d=[a.fields];t=(r=c).concat;return(b=g)?[4,l.getFeatureEditFields(a)]:[3,3];case 2:b=k.sent(),k.label=3;case 3:return z=y.apply(void 0,d.concat([t.apply(r,
[b||null])])),m&&z.push(m),z&&h&&l.hasField(a.fields,h)&&-1===z.indexOf(h)&&z.push(h),z&&v&&l.hasField(a.fields,v)&&-1===z.indexOf(v)&&z.push(v),[2,z]}})})};a.getFetchPopupTemplate=function(a,e){return a.popupTemplate?a.popupTemplate:p.isSome(e)&&e.defaultPopupTemplateEnabled&&p.isSome(a.defaultPopupTemplate)?a.defaultPopupTemplate:null}})},"*noref":1}});
define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/paramHelper ../../../core/tsSupport/assignHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../AggregateGraphic ../../../geometry ../../../Graphic ../../../core/arrayUtils ../../../core/Collection ../../../core/Error ../../../core/has ../../../core/iteratorUtils ../../../core/Logger ../../../core/maybe ../../../core/promiseUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../../layers/graphics/data/projectionSupport ../../../renderers/support/clickToleranceUtils ../../../tasks/support/FeatureSet ../../../tasks/support/Query ../engine ./LayerView2D ./features/tileRenderers ./features/support/rendererUtils ./support/clusterUtils ./support/FeatureLayerProxy ./support/popupUtils2D ./support/util ../tiling/TileStrategy ../../layers/FeatureLayerView ../../layers/LayerView ../../layers/RefreshableLayerView ../../../views/layers/support/FeatureFilter ../../layers/support/FeatureEffect".split(" "),function(z,
a,u,m,x,p,l,c,e,k,g,h,q,v,E,y,d,r,t,b,H,B,va,I,ga,xa,Qa,fb,T,L,gb,Ra,hb,ib,Sa,jb,kb,ya,lb){function mb(a){return a&&"openPorts"in a}var la=d.getLogger("esri.views.2d.layers.FeatureLayerView2D");return function(a){function d(){var b=null!==a&&a.apply(this,arguments)||this;b._pipelineIsUpdating=!0;b._updatingPipelineConfig=!1;b._viewStateId=-1;b._visibilityOverrides=new Set;b._effect=null;b._highlightIds=new Map;b._onGoingEdits=0;b.container=new xa.Container;b.filter=null;b.doRefresh=t.debounce(function(){b._onGoingEdits=
0;return b._proxy.refresh().catch(function(a){t.isAbortError(a)||la.error(a)})});b._onRenderingConfigChange=t.debounce(function(){return c(b,void 0,void 0,function(){var a,b,c,d,e,g,h,k,m,p,sa,q,u,t,v,x,z;return l(this,function(l){switch(l.label){case 0:if(!this._hasRequiredSupport(this.layer))return[2];this._set("_updatingPipelineConfig",!0);return[4,this._effectiveRendererPromise];case 1:return a=l.sent(),b=a.renderer,c=a.aggregateFields,d=a.featureReduction,[4,this._updateRequiredFields()];case 2:return l.sent(),
e=this.availableFields.join("."),g=this._createLayerFilterHash(),h=this._createTileRendererHash(b),k=this._createFeatureDataHash(b),m=this._createMeshHash(b),p=e!==this._clientDataHash,sa=g!==this._layerFilterHash,u=(q=k!==this._featureDataHash||p)&&!!this.layer.featureReduction,t=m!==this._meshHash||u,v={invalidateFeatureData:q,invalidateMesh:t,layerFilterChanged:sa},x=this._createConfiguration(b,c,d),h===this._tileRendererHash?[3,9]:[4,this._initTileRenderer(b)];case 3:return l.sent(),[4,this._createServiceOptions()];
case 4:return z=l.sent(),this.effects.forEach(function(a){return r.isSome(a)&&r.isSome(a.filter)&&a.filter.enable()}),this.tileRenderer.onConfigUpdate(b),[4,this._proxy.startup(this.view.featuresTilingScheme,x,z,v)];case 5:return l.sent(),this.hasHighlight()?[4,this._proxy.setHighlight(y.keysOfMap(this._highlightIds))]:[3,7];case 6:l.sent(),l.label=7;case 7:return[4,this._onceTilesUpdated()];case 8:return l.sent(),this.tileRenderer.onConfigUpdate(b),[3,14];case 9:return this._lockAttributeTextureUpload(),
p||sa||q||t?[4,this._proxy.update(x,v)]:[3,11];case 10:l.sent(),l.label=11;case 11:return sa?[4,this._onceTilesUpdated()]:[3,13];case 12:l.sent(),l.label=13;case 13:this._unlockAttributeTextureUpload(),this.effects.forEach(function(a){return r.isSome(a)&&r.isSome(a.filter)&&a.filter.enable()}),this.tileRenderer.onConfigUpdate(b),this._forceAttributeTextureUpload(),l.label=14;case 14:return this._clientDataHash=e,this._layerFilterHash=g,this._tileRendererHash=h,this._meshHash=m,this._featureDataHash=
k,this.tileRenderer.invalidateLabels(),this.requestUpdate(),[2]}})})});b._updateHighlight=t.debounce(function(){return c(b,void 0,void 0,function(){return l(this,function(a){return[2,this._proxy.setHighlight(y.keysOfMap(this._highlightIds))]})})});return b}u(d,a);d.prototype.destroy=function(){this._proxy.destroy();r.andThen(this._updateClusterSizeTask,function(a){return a.remove()})};d.prototype.initialize=function(){var a=this;this.addResolvingPromise(this._initProxy());this.handles.add([this.clips.on("change",
function(){return a.tileRenderer&&a.tileRenderer.onConfigUpdate(a._effectiveRenderer)}),this.on("valueRangesChanged",function(b){a._set("_aggregateValueRanges",b.valueRanges)})])};d.prototype._initProxy=function(){return c(this,void 0,void 0,function(){var a,b,c;return l(this,function(d){if(this.layer.isTable)throw new v("featurelayerview:table-not-supported","table feature layer can't be displayed",{layer:this.layer});a=this.layer.spatialReference;b=k.SpatialReference.WGS84;if(this.layer.featureReduction&&
!B.doesBrowserSupportProjection(a,b))throw new v("featurelayerview:featureReduction-not-supported","cannot project feature layer to WGS84",{inSpatialReference:a,outSpatialReference:b});this._proxy&&this._proxy.destroy();c=this._createClientOptions();this._set("_proxy",new gb.default({client:c}));return[2,this._proxy.when()]})})};Object.defineProperty(d.prototype,"_effectiveRendererPromise",{get:function(){var a=this,b=this._getEffectiveRenderer();b.then(function(b){return a._set("_effectiveRenderer",
b.renderer)});return b},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"labelsVisible",{get:function(){return!this.suspended&&this.layer.labelingInfo&&this.layer.labelsVisible},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"effect",{get:function(){return r.unwrapOr(this._effect,null)},set:function(a){var b=this._effect;r.isSome(b)&&r.isSome(b.filter)&&b.filter.enabled&&r.isSome(a)&&r.isSome(a.filter)&&a.filter.enable();this._effect=a;this.notifyChange("effect")},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"effects",{get:function(){return this.effect&&[this.effect]||[]},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"numFeatures",{get:function(){var a=0;this.attached&&this._tileStrategy.tiles.forEach(function(b){a+=b.iconDisplayRecords?b.iconDisplayRecords.length:0});return a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"renderingConfigHash",{get:function(){if(!this.layer)return null;var a=this.availableFields,
b=this.layer,c=b.definitionExpression,d=b.renderer,b=b.labelingInfo,e="feature"===this.layer.type?this.layer.gdbVersion:void 0,g="feature"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,h=this.timeExtent,k="filter"in this.layer&&this.layer.filter&&""+JSON.stringify(this.layer.filter.geometry)+this.layer.filter.where,l=JSON.stringify(this.clips),m=this.layer.featureReduction&&this.layer.featureReduction.toJSON();return JSON.stringify({filterHash:r.isSome(this.filter)&&
this.filter.toJSON(),effectHash:r.isSome(this.effect)&&this.effect.toJSON(),streamFilter:k,gdbVersion:e,definitionExpression:c,historicMoment:g,availableFields:a,renderer:d,labelingInfo:b,timeExtent:h,clipsHash:l,featureReduction:m})},enumerable:!0,configurable:!0});d.prototype.highlight=function(a){var b=this,c;a instanceof g?c=[a.getObjectId()]:"number"===typeof a?c=[a]:q.isCollection(a)?c=a.map(function(a){return a&&a.getAttribute(b.layer.objectIdField)}).toArray():Array.isArray(a)&&0<a.length&&
(c="number"===typeof a[0]?a:a.map(function(a){return a&&a.getAttribute(b.layer.objectIdField)}));if(!c||!c.length)return{remove:function(){},pause:function(){},resume:function(){}};c=c.filter(function(a){return null!=a});this._addHighlight(c);return{remove:function(){return b._removeHighlight(c)},pause:function(){return b._removeHighlight(c)},resume:function(){return b._addHighlight(c)}}};d.prototype.hasHighlight=function(){return!!this._highlightIds.size};d.prototype.hitTest=function(a,b){return this._hitTest(a,
b)};d.prototype.queryStatistics=function(){return this._proxy.queryStatistics()};d.prototype.queryFeatures=function(a,b){var c=this;return this.queryFeaturesJSON(a,b).then(function(a){a=I.fromJSON(a);a.features.forEach(function(a){a.layer=c.layer;a.sourceLayer=c.layer});return a})};d.prototype.queryFeaturesJSON=function(a,b){return this._proxy.queryFeatures(this._cleanUpQuery(a),b)};d.prototype.queryObjectIds=function(a,b){return this._proxy.queryObjectIds(this._cleanUpQuery(a),b)};d.prototype.queryFeatureCount=
function(a,b){return this._proxy.queryFeatureCount(this._cleanUpQuery(a),b)};d.prototype.queryExtent=function(a,b){return this._proxy.queryExtent(this._cleanUpQuery(a),b).then(function(a){return{count:a.count,extent:k.Extent.fromJSON(a.extent)}})};d.prototype.setVisibility=function(a,b){b?this._visibilityOverrides.delete(a):this._visibilityOverrides.add(a);this._renderingConfigHashChanged()};d.prototype.update=function(a){this.attached&&this._tileStrategy&&this.tileRenderer&&(this._tileStrategy.update(a)||
this.requestUpdate(),a=a.state,this._viewStateId!==a.id&&(this._proxy.setViewState(a),this._viewStateId=a.id),this.notifyChange("numFeatures"),this.notifyChange("updating"))};d.prototype.attach=function(){var a=this;this.view.timeline.record(this.layer.title+" (FeatureLayer) Attach");this._tileStrategy=new ib({cachePolicy:"purge",acquireTile:function(b){return a._acquireTile(b)},releaseTile:function(b){return a._releaseTile(b)},tileInfoView:this.view.featuresTilingScheme,buffer:0});this.handles.add([this.layer.on("edits",
function(b){return c(a,void 0,void 0,function(){return l(this,function(a){switch(a.label){case 0:return this._onGoingEdits++,[4,this._proxy.onEdits(b)];case 1:return a.sent(),this._onGoingEdits=Math.max(0,this._onGoingEdits-1),[2]}})})}),b.init(this,"renderingConfigHash",function(){return a._renderingConfigHashChanged()},!0)],"attach")};d.prototype.detach=function(){this.container.removeAllChildren();this.handles.remove("attach");this._updatingPipelineConfig=!1;this.tileRenderer&&(this.tileRenderer.uninstall(this.container),
this.tileRenderer=null);this._tileStrategy&&(this._tileStrategy.destroy(),this._tileStrategy=null)};d.prototype.moveStart=function(){this.requestUpdate()};d.prototype.viewChange=function(){this.requestUpdate()};d.prototype.moveEnd=function(){this.requestUpdate()};d.prototype.fetchPopupFeatures=function(a,b){return c(this,void 0,void 0,function(){var c,d,g,k;return l(this,function(l){if(r.isSome(b)&&b.clientGraphics.length&&(c=b.clientGraphics[0],c instanceof e))return[2,[c]];if(d=this.validateFetchPopupFeatures(b))return[2,
t.reject(d)];if(r.isSome(b)&&0===b.clientGraphics.length)return[2,t.resolve([])];g=this.fetchClientPopupFeatures(b);if(!a)return[2,g];k=this._fetchServicePopupFeatures(a,b);return[2,t.eachAlwaysValues([g,k]).then(h.flatten)]})})};d.prototype._fetchServicePopupFeatures=function(a,b){return c(this,void 0,void 0,function(){var c,d,e,g,h,k,m,p,q,t;return l(this,function(l){switch(l.label){case 0:return[4,this.createPopupQuery(b)];case 1:c=l.sent();d=this.layer;e=d.renderer;g=va.calculateTolerance(e);
c.geometry=this.createFetchPopupFeaturesQueryGeometry(a,g);h=new Set;k=d.objectIdField;if(m=r.isSome(b)?b.clientGraphics:null)for(p=0,q=m;p<q.length;p++)t=q[p],h.add(t.attributes[k]);return[2,d.queryFeatures(c).then(function(a){return a.features.filter(function(a){return!h.has(a.attributes[k])})})]}})})};d.prototype.createFetchPopupFeaturesQueryGeometry=function(a,b){return Ra.createQueryGeometry(a,b,this.view)};d.prototype.isUpdating=function(){return null!=this.layer.renderer&&(null!=this._updatingRequiredFieldsPromise||
null==this.tileRenderer||!this._proxy||!this._proxy.isReady||this._pipelineIsUpdating||this._updatingPipelineConfig||this.tileRenderer.updating||0<this._onGoingEdits)};d.prototype._createClientOptions=function(){var a=this;return{setUpdating:function(b){a._set("_pipelineIsUpdating",b)},emitEvent:function(b){a.emit(b.name,b.event)}}};d.prototype._createServiceOptions=function(){return c(this,void 0,void 0,function(){var a,b,c,d,e,g,h,k,m;return l(this,function(l){switch(l.label){case 0:return a=this.layer,
b=a.capabilities,c=a.objectIdField,d=a.fields.map(function(a){return a.toJSON()}),e=a.fullExtent&&a.fullExtent.toJSON(),g=hb.toJSONGeometryType(a.geometryType),h=a.timeInfo&&a.timeInfo.toJSON()||null,mb(a.source)?[4,a.source.openPorts()]:[3,2];case 1:return m=l.sent(),[3,3];case 2:m="dynamicDataSource"in a?a.dynamicDataSource?a.parsedUrl:a.url+"/"+a.layerId:a.parsedUrl,l.label=3;case 3:return k=m,[2,{type:"on-demand",maxRecordCount:b.query.maxRecordCount,tileMaxRecordCount:b.query.tileMaxRecordCount,
capabilities:b,fields:d,fullExtent:e,geometryType:g,objectIdField:c,source:k,timeInfo:h}]}})})};d.prototype._createMemoryServiceOptions=function(a){return c(this,void 0,void 0,function(){var b;return l(this,function(c){switch(c.label){case 0:return[4,a.openPorts()];case 1:return b=c.sent(),[2,p({},this._createServiceOptions(),{type:"memory",source:b})]}})})};d.prototype._cleanUpQuery=function(a){a=ga.from(a)||this.createQuery();a.outSpatialReference||(a.outSpatialReference=this.view.spatialReference);
return a};d.prototype._createUpdateClusterSizeTask=function(a,b){var d=this;return this.watch("_aggregateValueRanges",function(e){return c(d,void 0,void 0,function(){return l(this,function(c){this._updateClusterEffectiveRendererSizeVariable(a,b,e);if(!this._updatingPipelineConfig)this.tileRenderer.onConfigUpdate(this._effectiveRenderer);return[2]})})})};d.prototype._updateClusterEffectiveRendererSizeVariable=function(a,b,d){return c(this,void 0,void 0,function(){var c,e;return l(this,function(g){"visualVariables"in
a&&a.visualVariables&&(c=L.findSizeVV(a.visualVariables),r.isSome(c)&&"cluster_count"===c.field&&(e=a.visualVariables.indexOf(c),a.visualVariables[e]=L.createClusterCountSizeVariable(b,d),this._set("_effectiveRenderer",a.clone())));return[2]})})};d.prototype._getEffectiveRenderer=function(){return c(this,void 0,void 0,function(){var a,b,c,d,e;return l(this,function(g){switch(g.label){case 0:a=this.layer.renderer;b=this.layer.featureReduction;r.isSome(this._updateClusterSizeTask)&&(this._updateClusterSizeTask.remove(),
this._updateClusterSizeTask=null);if(!b||"cluster"!==b.type||!L.isClusterCompatibleRenderer(a))return[3,2];c=b;d=[];return[4,L.createClusterRenderer(d,this.layer.fields,a,c,this._aggregateValueRanges)];case 1:return e=g.sent(),r.andThen(this._updateClusterSizeTask,function(a){return a.remove()}),this._updateClusterSizeTask=this._createUpdateClusterSizeTask(e,c),[2,{renderer:e,aggregateFields:d,featureReduction:b}];case 2:return[2,{renderer:a,aggregateFields:[],featureReduction:null}]}})})};d.prototype._acquireTile=
function(a){var b=this;a=this.tileRenderer.acquireTile(a);a.once("attach",function(){b.requestUpdate()});return a};d.prototype._releaseTile=function(a){this.tileRenderer.releaseTile(a)};d.prototype._initTileRenderer=function(a){return c(this,void 0,void 0,function(){var b;return l(this,function(c){switch(c.label){case 0:return[4,fb.createOrReuseTileRenderer(a,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer})];case 1:return b=c.sent(),this.tileRenderer&&(this._tileStrategy.clear(),
this.tileRenderer.uninstall(this.container),this.tileRenderer.destroy(),this.tileRenderer=null),this._proxy.tileRenderer=b,this._set("tileRenderer",b),this.tileRenderer.install(this.container),this.tileRenderer.onConfigUpdate(a),this.requestUpdate(),[2,this.tileRenderer]}})})};d.prototype._createLayerFilterHash=function(){var a=this.layer.definitionExpression,b="feature"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0;return a+"."+b+"."+("feature"===this.layer.type?
this.layer.gdbVersion:void 0)};d.prototype._createTileRendererHash=function(a){return("heatmap"===a.type?"heatmap":"symbol")+"."+("dot-density"===a.type)};d.prototype._createFeatureDataHash=function(a){a=a.getAttributeHash();var b=JSON.stringify(this.filter),c=r.isSome(this.effect)&&JSON.stringify(this.effect.filter),d=JSON.stringify(this.timeExtent),e="";this._visibilityOverrides.forEach(function(a){return e+=a});return a+"."+b+"."+c+"."+d+"."+e};d.prototype._createMeshHash=function(a){var b=xa.getVVFlags("visualVariables"in
a&&a.visualVariables||[]),c=this.layer.labelingInfo&&this.layer.labelingInfo.map(function(a){return JSON.stringify(a)}).join("/"),d=JSON.stringify(this.layer.featureReduction);return a.getMeshHash()+"."+b+"."+c+"."+d};d.prototype._injectOverrides=function(a){var b=this.filter&&this.filter.timeExtent,b=this.timeExtent&&b?this.timeExtent.intersection(b):this.timeExtent||b;if(!this._visibilityOverrides.size&&!b)return a;a=r.isSome(this.filter)&&this.filter.clone()||new ya;a.hiddenIds=this._visibilityOverrides;
a.timeExtent=b;return a};d.prototype._createConfiguration=function(a,b,c){a=T.simplifyVVRenderer(a);var d=this.layer.labelingInfo,e="feature"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,g="feature"===this.layer.type?this.layer.gdbVersion:void 0,h=Array(xa.definitions.MAX_FILTERS),k=this._injectOverrides(this.filter);h[0]=r.isSome(k)&&k.toJSON()||null;h[1]=r.isSome(this.effect)&&this.effect.filter&&this.effect.filter.toJSON()||null;return{featureReduction:r.andThen(c,
function(a){return a.toJSON()}),definitionExpression:this.layer.definitionExpression,availableFields:this.availableFields,labelingInfo:d&&d.map(function(a){return a.toJSON()}),renderer:a.toJSON(),gdbVersion:g,historicMoment:e,devicePixelRatio:window.devicePixelRatio||1,filters:h,aggregateFields:b}};d.prototype._hasRequiredSupport=function(a){return"dot-density"!==a.renderer.type||E("esri-webgl-texture-float")?!0:(la.error(new v("webgl-missing-extension","Missing WebGL extension OES_Texture_Float which is required for DotDensity")),
!1)};d.prototype._onceTilesUpdated=function(){this.requestUpdate();return b.whenFalseOnce(this,"_pipelineIsUpdating",!0)};d.prototype._lockAttributeTextureUpload=function(){this.tileRenderer&&this.tileRenderer.lockAttributeTextureUpload()};d.prototype._unlockAttributeTextureUpload=function(){this.tileRenderer&&this.tileRenderer.unlockAttributeTextureUpload()};d.prototype._forceAttributeTextureUpload=function(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()};d.prototype._renderingConfigHashChanged=
function(){var a=this;this.view.timeline.begin(this.layer.title+" (FeatureLayer) Initial Pipeline Config");var b=this._onRenderingConfigChange();this._updatingPromise=b;var c=function(){b===a._updatingPromise&&a._set("_updatingPipelineConfig",!1);a.view.timeline.end(a.layer.title+" (FeatureLayer) Initial Pipeline Config")};b.then(c).catch(function(a){t.isAbortError(a)||la.error(a);c()})};d.prototype._addHighlight=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(this._highlightIds.has(c)){var d=
this._highlightIds.get(c);this._highlightIds.set(c,d+1)}else this._highlightIds.set(c,1)}this._updateHighlight().catch(function(a){t.isAbortError(a)||la.error(a)})};d.prototype._removeHighlight=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(this._highlightIds.has(c)){var d=this._highlightIds.get(c)-1;0===d?this._highlightIds.delete(c):this._highlightIds.set(c,d)}}this._updateHighlight().catch(function(a){t.isAbortError(a)||la.error(a)})};d.prototype._createHittestResult=function(a){a.layer=
this.layer;a.sourceLayer=this.layer;r.isSome(a.geometry)&&(a.geometry.spatialReference=this.view.spatialReference);return a};d.prototype._queryFeature=function(a){return c(this,void 0,void 0,function(){var b,c,d;return l(this,function(e){switch(e.label){case 0:return[4,this._proxy.getObjectId(a)];case 1:return b=e.sent(),[4,this._proxy.queryFeatures(new ga({objectIds:[b],outSpatialReference:this.view.spatialReference,returnGeometry:!0}))];case 2:return c=e.sent(),(d=c.features[0])?[2,d]:[2,null]}})})};
d.prototype._hitTest=function(a,b){return c(this,void 0,void 0,function(){var c,d,h,k,m=this;return l(this,function(l){switch(l.label){case 0:return this.suspended||!this.tileRenderer?[2,null]:[4,this.tileRenderer.hitTest(a,b)];case 1:return c=l.sent(),0!==c.length?[3,3]:[4,t.after(1)];case 2:return l.sent(),[2,null];case 3:return d=c[0],1===(d&2147483648)>>>31?[3,5]:[4,this._queryFeature(d)];case 4:return h=l.sent(),[2,r.andThen(h,function(a){return m._createHittestResult(g.fromJSON(a))})];case 5:return[4,
this._proxy.getAggregate(d)];case 6:return k=l.sent(),r.isNone(k)?[2,null]:r.isSome(k.referenceId)?[4,this._queryFeature(k.referenceId)]:[3,8];case 7:return h=l.sent(),[2,r.andThen(h,function(a){return m._createHittestResult(g.fromJSON(a))})];case 8:return[2,this._createHittestResult(e.fromJSON(k))]}})})};m([H.property()],d.prototype,"_proxy",void 0);m([H.property()],d.prototype,"_pipelineIsUpdating",void 0);m([H.property()],d.prototype,"_updatingPipelineConfig",void 0);m([H.property()],d.prototype,
"_effectiveRenderer",void 0);m([H.property()],d.prototype,"_aggregateValueRanges",void 0);m([H.property()],d.prototype,"_onGoingEdits",void 0);m([H.property({dependsOn:["layer.renderer","layer.featureReduction"]})],d.prototype,"_effectiveRendererPromise",null);m([H.property({dependsOn:["suspended","layer.labelingInfo","layer.labelsVisible"]})],d.prototype,"labelsVisible",null);m([H.property({type:ya})],d.prototype,"filter",void 0);m([H.property({type:lb})],d.prototype,"effect",null);m([H.property({readOnly:!0,
dependsOn:["effect"]})],d.prototype,"effects",null);m([H.property()],d.prototype,"numFeatures",null);m([H.property({dependsOn:"layer.renderer availableFields layer.definitionExpression layer.gdbVersion? layer.filter? layer.historicMoment? layer.labelingInfo layer.featureReduction filter effect timeExtent clips".split(" ")})],d.prototype,"renderingConfigHash",null);m([H.property()],d.prototype,"tileRenderer",void 0);m([H.property({dependsOn:"layer.renderer tileRenderer.updating _updatingPipelineConfig _pipelineIsUpdating _updatingRequiredFieldsPromise _proxy _proxy.isReady? _onGoingEdits".split(" ")})],
d.prototype,"updating",void 0);return d=m([H.subclass("esri.views.2d.layers.FeatureLayerView2D")],d)}(H.declared(Sa.FeatureLayerView(kb.RefreshableLayerView(Qa.LayerView2D(jb)))))});